<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `Builder` struct in crate `rustc_mir_build`."><meta name="keywords" content="rust, rustlang, rust-lang, Builder"><title>Builder in rustc_mir_build::build - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../normalize.css"><link rel="stylesheet" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../ayu.css" disabled><link rel="stylesheet" href="../../dark.css" disabled><link rel="stylesheet" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../rustc_mir_build/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../rustc_mir_build/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Builder</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#fields">Fields</a></h3><ul><li><a href="#structfield.arg_count">arg_count</a></li><li><a href="#structfield.block_context">block_context</a></li><li><a href="#structfield.canonical_user_type_annotations">canonical_user_type_annotations</a></li><li><a href="#structfield.cfg">cfg</a></li><li><a href="#structfield.check_overflow">check_overflow</a></li><li><a href="#structfield.def_id">def_id</a></li><li><a href="#structfield.fn_span">fn_span</a></li><li><a href="#structfield.generator_kind">generator_kind</a></li><li><a href="#structfield.guard_context">guard_context</a></li><li><a href="#structfield.hir_id">hir_id</a></li><li><a href="#structfield.in_scope_unsafe">in_scope_unsafe</a></li><li><a href="#structfield.infcx">infcx</a></li><li><a href="#structfield.local_decls">local_decls</a></li><li><a href="#structfield.param_env">param_env</a></li><li><a href="#structfield.parent_module">parent_module</a></li><li><a href="#structfield.region_scope_tree">region_scope_tree</a></li><li><a href="#structfield.scopes">scopes</a></li><li><a href="#structfield.source_scope">source_scope</a></li><li><a href="#structfield.source_scopes">source_scopes</a></li><li><a href="#structfield.tcx">tcx</a></li><li><a href="#structfield.thir">thir</a></li><li><a href="#structfield.typeck_results">typeck_results</a></li><li><a href="#structfield.unit_temp">unit_temp</a></li><li><a href="#structfield.upvars">upvars</a></li><li><a href="#structfield.var_debug_info">var_debug_info</a></li><li><a href="#structfield.var_indices">var_indices</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#implementations">Methods</a></h3><ul><li><a href="#method.add_cases_to_switch">add_cases_to_switch</a></li><li><a href="#method.add_dummy_assignment">add_dummy_assignment</a></li><li><a href="#method.add_fake_borrows_of_base">add_fake_borrows_of_base</a></li><li><a href="#method.add_variants_to_switch">add_variants_to_switch</a></li><li><a href="#method.args_and_body">args_and_body</a></li><li><a href="#method.as_call_operand">as_call_operand</a></li><li><a href="#method.as_constant">as_constant</a></li><li><a href="#method.as_local_call_operand">as_local_call_operand</a></li><li><a href="#method.as_local_operand">as_local_operand</a></li><li><a href="#method.as_local_rvalue">as_local_rvalue</a></li><li><a href="#method.as_operand">as_operand</a></li><li><a href="#method.as_place">as_place</a></li><li><a href="#method.as_place_builder">as_place_builder</a></li><li><a href="#method.as_read_only_place">as_read_only_place</a></li><li><a href="#method.as_read_only_place_builder">as_read_only_place_builder</a></li><li><a href="#method.as_rvalue">as_rvalue</a></li><li><a href="#method.as_temp">as_temp</a></li><li><a href="#method.as_temp_inner">as_temp_inner</a></li><li><a href="#method.ascribe_types">ascribe_types</a></li><li><a href="#method.assert">assert</a></li><li><a href="#method.ast_block">ast_block</a></li><li><a href="#method.ast_block_stmts">ast_block_stmts</a></li><li><a href="#method.ast_let_else">ast_let_else</a></li><li><a href="#method.bind_and_guard_matched_candidate">bind_and_guard_matched_candidate</a></li><li><a href="#method.bind_matched_candidate_for_arm_body">bind_matched_candidate_for_arm_body</a></li><li><a href="#method.bind_matched_candidate_for_guard">bind_matched_candidate_for_guard</a></li><li><a href="#method.bind_pattern">bind_pattern</a></li><li><a href="#method.bounds_check">bounds_check</a></li><li><a href="#method.break_for_else">break_for_else</a></li><li><a href="#method.break_scope">break_scope</a></li><li><a href="#method.build_binary_op">build_binary_op</a></li><li><a href="#method.build_drop_and_replace">build_drop_and_replace</a></li><li><a href="#method.build_drop_trees">build_drop_trees</a></li><li><a href="#method.build_exit_tree">build_exit_tree</a></li><li><a href="#method.build_generator_drop_trees">build_generator_drop_trees</a></li><li><a href="#method.build_unwind_tree">build_unwind_tree</a></li><li><a href="#method.build_zero_repeat">build_zero_repeat</a></li><li><a href="#method.calculate_fake_borrows">calculate_fake_borrows</a></li><li><a href="#method.candidate_after_slice_test">candidate_after_slice_test</a></li><li><a href="#method.candidate_after_variant_switch">candidate_after_variant_switch</a></li><li><a href="#method.candidate_without_match_pair">candidate_without_match_pair</a></li><li><a href="#method.clear_top_scope">clear_top_scope</a></li><li><a href="#method.compare">compare</a></li><li><a href="#method.const_range_contains">const_range_contains</a></li><li><a href="#method.consume_by_copy_or_move">consume_by_copy_or_move</a></li><li><a href="#method.create_match_candidates">create_match_candidates</a></li><li><a href="#method.create_or_subcandidates">create_or_subcandidates</a></li><li><a href="#method.declare_binding">declare_binding</a></li><li><a href="#method.declare_bindings">declare_bindings</a></li><li><a href="#method.diverge_cleanup">diverge_cleanup</a></li><li><a href="#method.diverge_from">diverge_from</a></li><li><a href="#method.error_simplifyable">error_simplifyable</a></li><li><a href="#method.expr_as_place">expr_as_place</a></li><li><a href="#method.expr_into_dest">expr_into_dest</a></li><li><a href="#method.expr_into_pattern">expr_into_pattern</a></li><li><a href="#method.false_edges">false_edges</a></li><li><a href="#method.field_match_pairs">field_match_pairs</a></li><li><a href="#method.finish">finish</a></li><li><a href="#method.generator_drop_cleanup">generator_drop_cleanup</a></li><li><a href="#method.get_unit_temp">get_unit_temp</a></li><li><a href="#method.in_breakable_scope">in_breakable_scope</a></li><li><a href="#method.in_if_then_scope">in_if_then_scope</a></li><li><a href="#method.in_opt_scope">in_opt_scope</a></li><li><a href="#method.in_scope">in_scope</a></li><li><a href="#method.is_bound_var_in_guard">is_bound_var_in_guard</a></li><li><a href="#method.is_let">is_let</a></li><li><a href="#method.leave_top_scope">leave_top_scope</a></li><li><a href="#method.limit_capture_mutability">limit_capture_mutability</a></li><li><a href="#method.literal_operand">literal_operand</a></li><li><a href="#method.local_scope">local_scope</a></li><li><a href="#method.lower_captured_upvar">lower_captured_upvar</a></li><li><a href="#method.lower_index_expression">lower_index_expression</a></li><li><a href="#method.lower_let_expr">lower_let_expr</a></li><li><a href="#method.lower_match_arms">lower_match_arms</a></li><li><a href="#method.lower_match_tree">lower_match_tree</a></li><li><a href="#method.lower_scrutinee">lower_scrutinee</a></li><li><a href="#method.match_candidates">match_candidates</a></li><li><a href="#method.match_expr">match_expr</a></li><li><a href="#method.match_simplified_candidates">match_simplified_candidates</a></li><li><a href="#method.merge_trivial_subcandidates">merge_trivial_subcandidates</a></li><li><a href="#method.minval_literal">minval_literal</a></li><li><a href="#method.neg_1_literal">neg_1_literal</a></li><li><a href="#method.new">new</a></li><li><a href="#method.new_source_scope">new_source_scope</a></li><li><a href="#method.non_scalar_compare">non_scalar_compare</a></li><li><a href="#method.perform_test">perform_test</a></li><li><a href="#method.place_into_pattern">place_into_pattern</a></li><li><a href="#method.pop_scope">pop_scope</a></li><li><a href="#method.prefix_slice_suffix">prefix_slice_suffix</a></li><li><a href="#method.push_scope">push_scope</a></li><li><a href="#method.push_usize">push_usize</a></li><li><a href="#method.read_fake_borrows">read_fake_borrows</a></li><li><a href="#method.record_operands_moved">record_operands_moved</a></li><li><a href="#method.schedule_drop">schedule_drop</a></li><li><a href="#method.schedule_drop_for_binding">schedule_drop_for_binding</a></li><li><a href="#method.schedule_drop_storage_and_value">schedule_drop_storage_and_value</a></li><li><a href="#method.select_matched_candidates">select_matched_candidates</a></li><li><a href="#method.set_correct_source_scope_for_arg">set_correct_source_scope_for_arg</a></li><li><a href="#method.simplify_candidate">simplify_candidate</a></li><li><a href="#method.simplify_match_pair">simplify_match_pair</a></li><li><a href="#method.sort_candidate">sort_candidate</a></li><li><a href="#method.source_info">source_info</a></li><li><a href="#method.stmt_expr">stmt_expr</a></li><li><a href="#method.storage_live_binding">storage_live_binding</a></li><li><a href="#method.temp">temp</a></li><li><a href="#method.test">test</a></li><li><a href="#method.test_candidates">test_candidates</a></li><li><a href="#method.test_candidates_with_or">test_candidates_with_or</a></li><li><a href="#method.test_or_pattern">test_or_pattern</a></li><li><a href="#method.then_else_break">then_else_break</a></li><li><a href="#method.update_source_scope_for_safety_mode">update_source_scope_for_safety_mode</a></li><li><a href="#method.values_not_contained_in_range">values_not_contained_in_range</a></li><li><a href="#method.var_local_id">var_local_id</a></li><li><a href="#method.visit_primary_bindings">visit_primary_bindings</a></li><li><a href="#method.zero_literal">zero_literal</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul><li><a href="#impl-RefUnwindSafe-for-Builder%3C%27a%2C%20%27tcx%3E">!RefUnwindSafe</a></li><li><a href="#impl-Send-for-Builder%3C%27a%2C%20%27tcx%3E">!Send</a></li><li><a href="#impl-Sync-for-Builder%3C%27a%2C%20%27tcx%3E">!Sync</a></li><li><a href="#impl-Unpin-for-Builder%3C%27a%2C%20%27tcx%3E">Unpin</a></li><li><a href="#impl-UnwindSafe-for-Builder%3C%27a%2C%20%27tcx%3E">!UnwindSafe</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#blanket-implementations">Blanket Implementations</a></h3><ul><li><a href="#impl-Any-for-Builder%3C%27a%2C%20%27tcx%3E">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-Builder%3C%27a%2C%20%27tcx%3E">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-Builder%3C%27a%2C%20%27tcx%3E">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-Captures%3C%27a%3E-for-Builder%3C%27a%2C%20%27tcx%3E">Captures&lt;&#39;a&gt;</a></li><li><a href="#impl-From%3CT%3E-for-Builder%3C%27a%2C%20%27tcx%3E">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-Builder%3C%27a%2C%20%27tcx%3E">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-Builder%3C%27a%2C%20%27tcx%3E">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-Builder%3C%27a%2C%20%27tcx%3E">TryInto&lt;U&gt;</a></li></ul></div></section><h2 class="location"><a href="index.html">In rustc_mir_build::build</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../rustc_mir_build/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Struct <a href="../index.html">rustc_mir_build</a>::<wbr><a href="index.html">build</a>::<wbr><a class="struct" href="#">Builder</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/rustc_mir_build/build/mod.rs.html#158-216">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust struct"><code>struct Builder&lt;'a, 'tcx&gt; {<details class="rustdoc-toggle type-contents-toggle"><summary class="hideme"><span>Show 26 fields</span></summary>
    tcx: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/struct.TyCtxt.html" title="struct rustc_middle::ty::context::TyCtxt">TyCtxt</a>&lt;'tcx&gt;,
    infcx: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_infer/infer/struct.InferCtxt.html" title="struct rustc_infer::infer::InferCtxt">InferCtxt</a>&lt;'a, 'tcx&gt;,
    typeck_results: &amp;'tcx <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/struct.TypeckResults.html" title="struct rustc_middle::ty::context::TypeckResults">TypeckResults</a>&lt;'tcx&gt;,
    region_scope_tree: &amp;'tcx <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.ScopeTree.html" title="struct rustc_middle::middle::region::ScopeTree">ScopeTree</a>,
    param_env: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.ParamEnv.html" title="struct rustc_middle::ty::ParamEnv">ParamEnv</a>&lt;'tcx&gt;,
    thir: &amp;'a <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Thir.html" title="struct rustc_middle::thir::Thir">Thir</a>&lt;'tcx&gt;,
    cfg: <a class="struct" href="struct.CFG.html" title="struct rustc_mir_build::build::CFG">CFG</a>&lt;'tcx&gt;,
    def_id: <a class="struct" href="../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>,
    hir_id: <a class="struct" href="../../rustc_hir/hir_id/struct.HirId.html" title="struct rustc_hir::hir_id::HirId">HirId</a>,
    parent_module: <a class="struct" href="../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>,
    check_overflow: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    fn_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,
    arg_count: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,
    generator_kind: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="../../rustc_hir/hir/enum.GeneratorKind.html" title="enum rustc_hir::hir::GeneratorKind">GeneratorKind</a>&gt;,
    scopes: <a class="struct" href="scope/struct.Scopes.html" title="struct rustc_mir_build::build::scope::Scopes">Scopes</a>&lt;'tcx&gt;,
    block_context: <a class="struct" href="struct.BlockContext.html" title="struct rustc_mir_build::build::BlockContext">BlockContext</a>,
    in_scope_unsafe: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Safety.html" title="enum rustc_middle::mir::Safety">Safety</a>,
    source_scopes: <a class="struct" href="../../rustc_index/vec/struct.IndexVec.html" title="struct rustc_index::vec::IndexVec">IndexVec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceScope.html" title="struct rustc_middle::mir::SourceScope">SourceScope</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceScopeData.html" title="struct rustc_middle::mir::SourceScopeData">SourceScopeData</a>&lt;'tcx&gt;&gt;,
    source_scope: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceScope.html" title="struct rustc_middle::mir::SourceScope">SourceScope</a>,
    guard_context: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.GuardFrame.html" title="struct rustc_mir_build::build::GuardFrame">GuardFrame</a>&gt;,
    var_indices: FxHashMap&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.LocalVarId.html" title="struct rustc_middle::thir::LocalVarId">LocalVarId</a>, <a class="enum" href="enum.LocalsForNode.html" title="enum rustc_mir_build::build::LocalsForNode">LocalsForNode</a>&gt;,
    local_decls: <a class="struct" href="../../rustc_index/vec/struct.IndexVec.html" title="struct rustc_index::vec::IndexVec">IndexVec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.LocalDecl.html" title="struct rustc_middle::mir::LocalDecl">LocalDecl</a>&lt;'tcx&gt;&gt;,
    canonical_user_type_annotations: <a class="type" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/type.CanonicalUserTypeAnnotations.html" title="type rustc_middle::ty::context::CanonicalUserTypeAnnotations">CanonicalUserTypeAnnotations</a>&lt;'tcx&gt;,
    upvars: <a class="struct" href="../../rustc_data_structures/sorted_map/index_map/struct.SortedIndexMultiMap.html" title="struct rustc_data_structures::sorted_map::index_map::SortedIndexMultiMap">SortedIndexMultiMap</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="struct" href="../../rustc_hir/hir_id/struct.HirId.html" title="struct rustc_hir::hir_id::HirId">HirId</a>, <a class="struct" href="struct.Capture.html" title="struct rustc_mir_build::build::Capture">Capture</a>&lt;'tcx&gt;&gt;,
    unit_temp: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;,
    var_debug_info: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.VarDebugInfo.html" title="struct rustc_middle::mir::VarDebugInfo">VarDebugInfo</a>&lt;'tcx&gt;&gt;,
</details>}</code></pre></div><h2 id="fields" class="fields small-section-header">Fields<a href="#fields" class="anchor"></a></h2><span id="structfield.tcx" class="structfield small-section-header"><a href="#structfield.tcx" class="anchor field"></a><code>tcx: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/struct.TyCtxt.html" title="struct rustc_middle::ty::context::TyCtxt">TyCtxt</a>&lt;'tcx&gt;</code></span><span id="structfield.infcx" class="structfield small-section-header"><a href="#structfield.infcx" class="anchor field"></a><code>infcx: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_infer/infer/struct.InferCtxt.html" title="struct rustc_infer::infer::InferCtxt">InferCtxt</a>&lt;'a, 'tcx&gt;</code></span><span id="structfield.typeck_results" class="structfield small-section-header"><a href="#structfield.typeck_results" class="anchor field"></a><code>typeck_results: &amp;'tcx <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/struct.TypeckResults.html" title="struct rustc_middle::ty::context::TypeckResults">TypeckResults</a>&lt;'tcx&gt;</code></span><span id="structfield.region_scope_tree" class="structfield small-section-header"><a href="#structfield.region_scope_tree" class="anchor field"></a><code>region_scope_tree: &amp;'tcx <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.ScopeTree.html" title="struct rustc_middle::middle::region::ScopeTree">ScopeTree</a></code></span><span id="structfield.param_env" class="structfield small-section-header"><a href="#structfield.param_env" class="anchor field"></a><code>param_env: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.ParamEnv.html" title="struct rustc_middle::ty::ParamEnv">ParamEnv</a>&lt;'tcx&gt;</code></span><span id="structfield.thir" class="structfield small-section-header"><a href="#structfield.thir" class="anchor field"></a><code>thir: &amp;'a <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Thir.html" title="struct rustc_middle::thir::Thir">Thir</a>&lt;'tcx&gt;</code></span><span id="structfield.cfg" class="structfield small-section-header"><a href="#structfield.cfg" class="anchor field"></a><code>cfg: <a class="struct" href="struct.CFG.html" title="struct rustc_mir_build::build::CFG">CFG</a>&lt;'tcx&gt;</code></span><span id="structfield.def_id" class="structfield small-section-header"><a href="#structfield.def_id" class="anchor field"></a><code>def_id: <a class="struct" href="../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a></code></span><span id="structfield.hir_id" class="structfield small-section-header"><a href="#structfield.hir_id" class="anchor field"></a><code>hir_id: <a class="struct" href="../../rustc_hir/hir_id/struct.HirId.html" title="struct rustc_hir::hir_id::HirId">HirId</a></code></span><span id="structfield.parent_module" class="structfield small-section-header"><a href="#structfield.parent_module" class="anchor field"></a><code>parent_module: <a class="struct" href="../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a></code></span><span id="structfield.check_overflow" class="structfield small-section-header"><a href="#structfield.check_overflow" class="anchor field"></a><code>check_overflow: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></span><span id="structfield.fn_span" class="structfield small-section-header"><a href="#structfield.fn_span" class="anchor field"></a><code>fn_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a></code></span><span id="structfield.arg_count" class="structfield small-section-header"><a href="#structfield.arg_count" class="anchor field"></a><code>arg_count: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></code></span><span id="structfield.generator_kind" class="structfield small-section-header"><a href="#structfield.generator_kind" class="anchor field"></a><code>generator_kind: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="../../rustc_hir/hir/enum.GeneratorKind.html" title="enum rustc_hir::hir::GeneratorKind">GeneratorKind</a>&gt;</code></span><span id="structfield.scopes" class="structfield small-section-header"><a href="#structfield.scopes" class="anchor field"></a><code>scopes: <a class="struct" href="scope/struct.Scopes.html" title="struct rustc_mir_build::build::scope::Scopes">Scopes</a>&lt;'tcx&gt;</code></span><div class="docblock"><p>The current set of scopes, updated as we traverse;
see the <code>scope</code> module for more details.</p>
</div><span id="structfield.block_context" class="structfield small-section-header"><a href="#structfield.block_context" class="anchor field"></a><code>block_context: <a class="struct" href="struct.BlockContext.html" title="struct rustc_mir_build::build::BlockContext">BlockContext</a></code></span><div class="docblock"><p>The block-context: each time we build the code within an thir::Block,
we push a frame here tracking whether we are building a statement or
if we are pushing the tail expression of the block. This is used to
embed information in generated temps about whether they were created
for a block tail expression or not.</p>
<p>It would be great if we could fold this into <code>self.scopes</code>
somehow, but right now I think that is very tightly tied to
the code generation in ways that we cannot (or should not)
start just throwing new entries onto that vector in order to
distinguish the context of EXPR1 from the context of EXPR2 in
<code>{ STMTS; EXPR1 } + EXPR2</code>.</p>
</div><span id="structfield.in_scope_unsafe" class="structfield small-section-header"><a href="#structfield.in_scope_unsafe" class="anchor field"></a><code>in_scope_unsafe: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Safety.html" title="enum rustc_middle::mir::Safety">Safety</a></code></span><div class="docblock"><p>The current unsafe block in scope</p>
</div><span id="structfield.source_scopes" class="structfield small-section-header"><a href="#structfield.source_scopes" class="anchor field"></a><code>source_scopes: <a class="struct" href="../../rustc_index/vec/struct.IndexVec.html" title="struct rustc_index::vec::IndexVec">IndexVec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceScope.html" title="struct rustc_middle::mir::SourceScope">SourceScope</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceScopeData.html" title="struct rustc_middle::mir::SourceScopeData">SourceScopeData</a>&lt;'tcx&gt;&gt;</code></span><div class="docblock"><p>The vector of all scopes that we have created thus far;
we track this for debuginfo later.</p>
</div><span id="structfield.source_scope" class="structfield small-section-header"><a href="#structfield.source_scope" class="anchor field"></a><code>source_scope: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceScope.html" title="struct rustc_middle::mir::SourceScope">SourceScope</a></code></span><span id="structfield.guard_context" class="structfield small-section-header"><a href="#structfield.guard_context" class="anchor field"></a><code>guard_context: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.GuardFrame.html" title="struct rustc_mir_build::build::GuardFrame">GuardFrame</a>&gt;</code></span><div class="docblock"><p>The guard-context: each time we build the guard expression for
a match arm, we push onto this stack, and then pop when we
finish building it.</p>
</div><span id="structfield.var_indices" class="structfield small-section-header"><a href="#structfield.var_indices" class="anchor field"></a><code>var_indices: FxHashMap&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.LocalVarId.html" title="struct rustc_middle::thir::LocalVarId">LocalVarId</a>, <a class="enum" href="enum.LocalsForNode.html" title="enum rustc_mir_build::build::LocalsForNode">LocalsForNode</a>&gt;</code></span><div class="docblock"><p>Maps <code>HirId</code>s of variable bindings to the <code>Local</code>s created for them.
(A match binding can have two locals; the 2nd is for the arm’s guard.)</p>
</div><span id="structfield.local_decls" class="structfield small-section-header"><a href="#structfield.local_decls" class="anchor field"></a><code>local_decls: <a class="struct" href="../../rustc_index/vec/struct.IndexVec.html" title="struct rustc_index::vec::IndexVec">IndexVec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.LocalDecl.html" title="struct rustc_middle::mir::LocalDecl">LocalDecl</a>&lt;'tcx&gt;&gt;</code></span><span id="structfield.canonical_user_type_annotations" class="structfield small-section-header"><a href="#structfield.canonical_user_type_annotations" class="anchor field"></a><code>canonical_user_type_annotations: <a class="type" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/type.CanonicalUserTypeAnnotations.html" title="type rustc_middle::ty::context::CanonicalUserTypeAnnotations">CanonicalUserTypeAnnotations</a>&lt;'tcx&gt;</code></span><span id="structfield.upvars" class="structfield small-section-header"><a href="#structfield.upvars" class="anchor field"></a><code>upvars: <a class="struct" href="../../rustc_data_structures/sorted_map/index_map/struct.SortedIndexMultiMap.html" title="struct rustc_data_structures::sorted_map::index_map::SortedIndexMultiMap">SortedIndexMultiMap</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="struct" href="../../rustc_hir/hir_id/struct.HirId.html" title="struct rustc_hir::hir_id::HirId">HirId</a>, <a class="struct" href="struct.Capture.html" title="struct rustc_mir_build::build::Capture">Capture</a>&lt;'tcx&gt;&gt;</code></span><span id="structfield.unit_temp" class="structfield small-section-header"><a href="#structfield.unit_temp" class="anchor field"></a><code>unit_temp: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;</code></span><span id="structfield.var_debug_info" class="structfield small-section-header"><a href="#structfield.var_debug_info" class="anchor field"></a><code>var_debug_info: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.VarDebugInfo.html" title="struct rustc_middle::mir::VarDebugInfo">VarDebugInfo</a>&lt;'tcx&gt;&gt;</code></span><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><div id="implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/block.rs.html#9-401">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><section id="method.ast_block" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/block.rs.html#10-54">source</a><h4 class="code-header">pub(crate) fn <a href="#method.ast_block" class="fnname">ast_block</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;destination: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;ast_block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.BlockId.html" title="struct rustc_middle::thir::BlockId">BlockId</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section><section id="method.ast_block_stmts" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/block.rs.html#56-385">source</a><h4 class="code-header">fn <a href="#method.ast_block_stmts" class="fnname">ast_block_stmts</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;destination: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;stmts: &amp;[<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.StmtId.html" title="struct rustc_middle::thir::StmtId">StmtId</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;safety_mode: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/enum.BlockSafety.html" title="enum rustc_middle::thir::BlockSafety">BlockSafety</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;region_scope: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.update_source_scope_for_safety_mode" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/block.rs.html#388-400">source</a><h4 class="code-header">fn <a href="#method.update_source_scope_for_safety_mode" class="fnname">update_source_scope_for_safety_mode</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;safety_mode: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/enum.BlockSafety.html" title="enum rustc_middle::thir::BlockSafety">BlockSafety</a><br>)</h4></section></summary><div class="docblock"><p>If we are entering an unsafe block, create a new source scope</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-1" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_constant.rs.html#13-96">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-1" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.as_constant" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_constant.rs.html#16-95">source</a><h4 class="code-header">pub(crate) fn <a href="#method.as_constant" class="fnname">as_constant</a>(&amp;mut self, expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Constant.html" title="struct rustc_middle::mir::Constant">Constant</a>&lt;'tcx&gt;</h4></section></summary><div class="docblock"><p>Compile <code>expr</code>, yielding a compile-time constant. Assumes that
<code>expr</code> is a valid compile-time constant!</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-2" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_operand.rs.html#9-184">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-2" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.as_local_operand" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_operand.rs.html#17-24">source</a><h4 class="code-header">pub(crate) fn <a href="#method.as_local_operand" class="fnname">as_local_operand</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>Returns an operand suitable for use until the end of the current
scope expression.</p>
<p>The operand returned from this function will <em>not be valid</em>
after the current enclosing <code>ExprKind::Scope</code> has ended, so
please do <em>not</em> return it from functions to avoid bad
miscompiles.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.as_local_call_operand" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_operand.rs.html#76-83">source</a><h4 class="code-header">pub(crate) fn <a href="#method.as_local_call_operand" class="fnname">as_local_call_operand</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>Returns an operand suitable for use until the end of the current scope expression and
suitable also to be passed as function arguments.</p>
<p>The operand returned from this function will <em>not be valid</em> after an ExprKind::Scope is
passed, so please do <em>not</em> return it from functions to avoid bad miscompiles.  Returns an
operand suitable for use as a call argument. This is almost always equivalent to
<code>as_operand</code>, except for the particular case of passing values of (potentially) unsized
types “by value” (see details below).</p>
<p>The operand returned from this function will <em>not be valid</em>
after the current enclosing <code>ExprKind::Scope</code> has ended, so
please do <em>not</em> return it from functions to avoid bad
miscompiles.</p>
<h5 id="parameters-of-unsized-types"><a href="#parameters-of-unsized-types">Parameters of unsized types</a></h5>
<p>We tweak the handling of parameters of unsized type slightly to avoid the need to create a
local variable of unsized type. For example, consider this program:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#![feature(unsized_locals, unsized_fn_params)]
</span><span class="kw">fn </span>foo(p: <span class="kw">dyn </span>Debug) { <span class="macro">dbg!</span>(p); }

<span class="kw">fn </span>bar(box_p: Box&lt;<span class="kw">dyn </span>Debug&gt;) { foo(<span class="kw-2">*</span>box_p); }</code></pre></div>
<p>Ordinarily, for sized types, we would compile the call <code>foo(*p)</code> like so:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code><span class="kw">let </span>tmp0 = <span class="kw-2">*</span>box_p; <span class="comment">// tmp0 would be the operand returned by this function call
</span>foo(tmp0)</code></pre></div>
<p>But because the parameter to <code>foo</code> is of the unsized type <code>dyn Debug</code>, and because it is
being moved the deref of a box, we compile it slightly differently. The temporary <code>tmp0</code>
that we create <em>stores the entire box</em>, and the parameter to the call itself will be
<code>*tmp0</code>:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code><span class="kw">let </span>tmp0 = box_p; call foo(<span class="kw-2">*</span>tmp0)</code></pre></div>
<p>This way, the temporary <code>tmp0</code> that we create has type <code>Box&lt;dyn Debug&gt;</code>, which is sized.
The value passed to the call (<code>*tmp0</code>) still has the <code>dyn Debug</code> type – but the way that
calls are compiled means that this parameter will be passed “by reference”, meaning that we
will actually provide a pointer to the interior of the box, and not move the <code>dyn Debug</code>
value to the stack.</p>
<p>See #68034 for more details.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.as_operand" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_operand.rs.html#99">source</a><h4 class="code-header">pub(crate) fn <a href="#method.as_operand" class="fnname">as_operand</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;scope: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;local_info: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.LocalInfo.html" title="enum rustc_middle::mir::LocalInfo">LocalInfo</a>&lt;'tcx&gt;&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;needs_temporary: <a class="enum" href="enum.NeedsTemporary.html" title="enum rustc_mir_build::build::NeedsTemporary">NeedsTemporary</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>Compile <code>expr</code> into a value that can be used as an operand.
If <code>expr</code> is a place like <code>x</code>, this will introduce a
temporary <code>tmp = x</code>, so that we capture the value of <code>x</code> at
this time.</p>
<p>If we end up needing to create a temporary, then we will use
<code>local_info</code> as its <code>LocalInfo</code>, unless <code>as_temporary</code>
has already assigned it a non-<code>None</code> <code>LocalInfo</code>.
Normally, you should use <code>None</code> for <code>local_info</code></p>
<p>The operand is known to be live until the end of <code>scope</code>.</p>
<p>Like <code>as_local_call_operand</code>, except that the argument will
not be valid once <code>scope</code> ends.</p>
</div></details><section id="method.as_call_operand" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_operand.rs.html#135-183">source</a><h4 class="code-header">pub(crate) fn <a href="#method.as_call_operand" class="fnname">as_call_operand</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;scope: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;&gt;</h4></section></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-3" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_place.rs.html#337-746">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-3" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.as_place" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_place.rs.html#350-357">source</a><h4 class="code-header">pub(crate) fn <a href="#method.as_place" class="fnname">as_place</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>Compile <code>expr</code>, yielding a place that we can move from etc.</p>
<p>WARNING: Any user code might:</p>
<ul>
<li>Invalidate any slice bounds checks performed.</li>
<li>Change the address that this <code>Place</code> refers to.</li>
<li>Modify the memory that this place refers to.</li>
<li>Invalidate the memory that this place refers to, this will be caught
by borrow checking.</li>
</ul>
<p>Extra care is needed if any user code is allowed to run between calling
this method and using it, as is the case for <code>match</code> and index
expressions.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.as_place_builder" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_place.rs.html#361-367">source</a><h4 class="code-header">pub(crate) fn <a href="#method.as_place_builder" class="fnname">as_place_builder</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>This is used when constructing a compound <code>Place</code>, so that we can avoid creating
intermediate <code>Place</code> values until we know the full set of projections.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.as_read_only_place" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_place.rs.html#374-381">source</a><h4 class="code-header">pub(crate) fn <a href="#method.as_read_only_place" class="fnname">as_read_only_place</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>Compile <code>expr</code>, yielding a place that we can move from etc.
Mutability note: The caller of this method promises only to read from the resulting
place. The place itself may or may not be mutable:</p>
<ul>
<li>If this expr is a place expr like a.b, then we will return that place.</li>
<li>Otherwise, a temporary is created: in that event, it will be an immutable temporary.</li>
</ul>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.as_read_only_place_builder" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_place.rs.html#389-395">source</a><h4 class="code-header">fn <a href="#method.as_read_only_place_builder" class="fnname">as_read_only_place_builder</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>This is used when constructing a compound <code>Place</code>, so that we can avoid creating
intermediate <code>Place</code> values until we know the full set of projections.
Mutability note: The caller of this method promises only to read from the resulting
place. The place itself may or may not be mutable:</p>
<ul>
<li>If this expr is a place expr like a.b, then we will return that place.</li>
<li>Otherwise, a temporary is created: in that event, it will be an immutable temporary.</li>
</ul>
</div></details><section id="method.expr_as_place" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_place.rs.html#397-563">source</a><h4 class="code-header">fn <a href="#method.expr_as_place" class="fnname">expr_as_place</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;mutability: <a class="enum" href="../../rustc_ast/ast/enum.Mutability.html" title="enum rustc_ast::ast::Mutability">Mutability</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrow_temps: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>&gt;&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;&gt;</h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.lower_captured_upvar" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_place.rs.html#568-575">source</a><h4 class="code-header">fn <a href="#method.lower_captured_upvar" class="fnname">lower_captured_upvar</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;closure_def_id: <a class="struct" href="../../rustc_span/def_id/struct.LocalDefId.html" title="struct rustc_span::def_id::LocalDefId">LocalDefId</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;var_hir_id: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.LocalVarId.html" title="struct rustc_middle::thir::LocalVarId">LocalVarId</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>Lower a captured upvar. Note we might not know the actual capture index,
so we create a place starting from <code>PlaceBase::Upvar</code>, which will be resolved
once all projections that allow us to identify a capture have been applied.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.lower_index_expression" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_place.rs.html#585-624">source</a><h4 class="code-header">fn <a href="#method.lower_index_expression" class="fnname">lower_index_expression</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;base: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;index: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;mutability: <a class="enum" href="../../rustc_ast/ast/enum.Mutability.html" title="enum rustc_ast::ast::Mutability">Mutability</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrow_temps: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;temp_lifetime: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>Lower an index expression</p>
<p>This has two complications;</p>
<ul>
<li>We need to do a bounds check.</li>
<li>We need to ensure that the bounds check can’t be invalidated using an
expression like <code>x[1][{x = y; 2}]</code>. We use fake borrows here to ensure
that this is the case.</li>
</ul>
</div></details><section id="method.bounds_check" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_place.rs.html#626-660">source</a><h4 class="code-header">fn <a href="#method.bounds_check" class="fnname">bounds_check</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;slice: <a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;index: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a><br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a></h4></section><section id="method.add_fake_borrows_of_base" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_place.rs.html#662-731">source</a><h4 class="code-header">fn <a href="#method.add_fake_borrows_of_base" class="fnname">add_fake_borrows_of_base</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;base_place: &amp;<a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrow_temps: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a><br>)</h4></section><section id="method.read_fake_borrows" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_place.rs.html#733-745">source</a><h4 class="code-header">fn <a href="#method.read_fake_borrows" class="fnname">read_fake_borrows</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;bb: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrow_temps: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a><br>)</h4></section></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-4" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_rvalue.rs.html#19-701">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-4" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.as_local_rvalue" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_rvalue.rs.html#26-33">source</a><h4 class="code-header">pub(crate) fn <a href="#method.as_local_rvalue" class="fnname">as_local_rvalue</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Rvalue.html" title="enum rustc_middle::mir::syntax::Rvalue">Rvalue</a>&lt;'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>Returns an rvalue suitable for use until the end of the current
scope expression.</p>
<p>The operand returned from this function will <em>not be valid</em> after
an ExprKind::Scope is passed, so please do <em>not</em> return it from
functions to avoid bad miscompiles.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.as_rvalue" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_rvalue.rs.html#36-468">source</a><h4 class="code-header">pub(crate) fn <a href="#method.as_rvalue" class="fnname">as_rvalue</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;scope: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Rvalue.html" title="enum rustc_middle::mir::syntax::Rvalue">Rvalue</a>&lt;'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>Compile <code>expr</code>, yielding an rvalue.</p>
</div></details><section id="method.build_binary_op" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_rvalue.rs.html#470-567">source</a><h4 class="code-header">pub(crate) fn <a href="#method.build_binary_op" class="fnname">build_binary_op</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;op: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.BinOp.html" title="enum rustc_middle::mir::syntax::BinOp">BinOp</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;ty: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;lhs: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;rhs: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Rvalue.html" title="enum rustc_middle::mir::syntax::Rvalue">Rvalue</a>&lt;'tcx&gt;&gt;</h4></section><section id="method.build_zero_repeat" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_rvalue.rs.html#569-598">source</a><h4 class="code-header">fn <a href="#method.build_zero_repeat" class="fnname">build_zero_repeat</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;value: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.ExprId.html" title="struct rustc_middle::thir::ExprId">ExprId</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;scope: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;outer_source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Rvalue.html" title="enum rustc_middle::mir::syntax::Rvalue">Rvalue</a>&lt;'tcx&gt;&gt;</h4></section><section id="method.limit_capture_mutability" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_rvalue.rs.html#600-680">source</a><h4 class="code-header">fn <a href="#method.limit_capture_mutability" class="fnname">limit_capture_mutability</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;upvar_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;upvar_ty: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;temp_lifetime: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;arg: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;&gt;</h4></section><section id="method.neg_1_literal" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_rvalue.rs.html#683-689">source</a><h4 class="code-header">fn <a href="#method.neg_1_literal" class="fnname">neg_1_literal</a>(&amp;mut self, span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>, ty: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;</h4></section><section id="method.minval_literal" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_rvalue.rs.html#692-700">source</a><h4 class="code-header">fn <a href="#method.minval_literal" class="fnname">minval_literal</a>(&amp;mut self, span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>, ty: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;</h4></section></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-5" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_temp.rs.html#10-120">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-5" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.as_temp" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_temp.rs.html#13-24">source</a><h4 class="code-header">pub(crate) fn <a href="#method.as_temp" class="fnname">as_temp</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;temp_lifetime: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;mutability: <a class="enum" href="../../rustc_ast/ast/enum.Mutability.html" title="enum rustc_ast::ast::Mutability">Mutability</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>&gt;</h4></section></summary><div class="docblock"><p>Compile <code>expr</code> into a fresh temporary. This is used when building
up rvalues so as to freeze the value that will be consumed.</p>
</div></details><section id="method.as_temp_inner" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/as_temp.rs.html#26-119">source</a><h4 class="code-header">fn <a href="#method.as_temp_inner" class="fnname">as_temp_inner</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;temp_lifetime: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;mutability: <a class="enum" href="../../rustc_ast/ast/enum.Mutability.html" title="enum rustc_ast::ast::Mutability">Mutability</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>&gt;</h4></section></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-6" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/into.rs.html#15-602">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-6" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.expr_into_dest" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/into.rs.html#18-593">source</a><h4 class="code-header">pub(crate) fn <a href="#method.expr_into_dest" class="fnname">expr_into_dest</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;destination: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Compile <code>expr</code>, storing the result into <code>destination</code>, which
is assumed to be uninitialized.</p>
</div></details><section id="method.is_let" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/into.rs.html#595-601">source</a><h4 class="code-header">fn <a href="#method.is_let" class="fnname">is_let</a>(&amp;self, expr: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.ExprId.html" title="struct rustc_middle::thir::ExprId">ExprId</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-7" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/stmt.rs.html#7-157">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-7" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.stmt_expr" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/expr/stmt.rs.html#13-156">source</a><h4 class="code-header">pub(crate) fn <a href="#method.stmt_expr" class="fnname">stmt_expr</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;statement_scope: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Builds a block of MIR statements to evaluate the THIR <code>expr</code>.
If the original expression was an AST statement,
(e.g., <code>some().code(&amp;here());</code>) then <code>opt_stmt_span</code> is the
span of that statement (including its semicolon, if any).
The scope is used if a statement temporary must be dropped.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-8" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/simplify.rs.html#26-318">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-8" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.simplify_candidate" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/simplify.rs.html#40-121">source</a><h4 class="code-header">pub(super) fn <a href="#method.simplify_candidate" class="fnname">simplify_candidate</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: &amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;<br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Simplify a candidate so that all match pairs require a test.</p>
<p>This method will also split a candidate, in which the only
match-pair is an or-pattern, into multiple candidates.
This is so that</p>
<p>match x {
0 | 1 =&gt; { … },
2 | 3 =&gt; { … },
}</p>
<p>only generates a single switch. If this happens this method returns
<code>true</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create_or_subcandidates" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/simplify.rs.html#126-139">source</a><h4 class="code-header">fn <a href="#method.create_or_subcandidates" class="fnname">create_or_subcandidates</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: &amp;<a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;place: <a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;pats: &amp;'pat [<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;&gt;]<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>Given <code>candidate</code> that has a single or-pattern for its match-pairs,
creates a fresh candidate for each of its input subpatterns passed via
<code>pats</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.simplify_match_pair" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/simplify.rs.html#146-317">source</a><h4 class="code-header">fn <a href="#method.simplify_match_pair" class="fnname">simplify_match_pair</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;match_pair: <a class="struct" href="matches/struct.MatchPair.html" title="struct rustc_mir_build::build::matches::MatchPair">MatchPair</a>&lt;'pat, 'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: &amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="struct" href="matches/struct.MatchPair.html" title="struct rustc_mir_build::build::matches::MatchPair">MatchPair</a>&lt;'pat, 'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>Tries to simplify <code>match_pair</code>, returning <code>Ok(())</code> if
successful. If successful, new match pairs and bindings will
have been pushed into the candidate. If no simplification is
possible, <code>Err</code> is returned and no changes are made to
candidate.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-9" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#27-784">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-9" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.test" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#31-82">source</a><h4 class="code-header">pub(super) fn <a href="#method.test" class="fnname">test</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;match_pair: &amp;<a class="struct" href="matches/struct.MatchPair.html" title="struct rustc_mir_build::build::matches::MatchPair">MatchPair</a>&lt;'pat, 'tcx&gt;<br>) -&gt; <a class="struct" href="matches/struct.Test.html" title="struct rustc_mir_build::build::matches::Test">Test</a>&lt;'tcx&gt;</h4></section></summary><div class="docblock"><p>Identifies what test is needed to decide if <code>match_pair</code> is applicable.</p>
<p>It is a bug to call this with a not-fully-simplified pattern.</p>
</div></details><section id="method.add_cases_to_switch" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#84-121">source</a><h4 class="code-header">pub(super) fn <a href="#method.add_cases_to_switch" class="fnname">add_cases_to_switch</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;test_place: &amp;<a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: &amp;<a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;switch_ty: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;options: &amp;mut <a class="type" href="../../rustc_data_structures/fx/type.FxIndexMap.html" title="type rustc_data_structures::fx::FxIndexMap">FxIndexMap</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.ConstantKind.html" title="enum rustc_middle::mir::ConstantKind">ConstantKind</a>&lt;'tcx&gt;, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u128.html">u128</a>&gt;<br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section><section id="method.add_variants_to_switch" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#123-145">source</a><h4 class="code-header">pub(super) fn <a href="#method.add_variants_to_switch" class="fnname">add_variants_to_switch</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;test_place: &amp;<a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: &amp;<a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;variants: &amp;mut <a class="struct" href="../../rustc_index/bit_set/struct.BitSet.html" title="struct rustc_index::bit_set::BitSet">BitSet</a>&lt;<a class="struct" href="../../rustc_target/abi/struct.VariantIdx.html" title="struct rustc_target::abi::VariantIdx">VariantIdx</a>&gt;<br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section><section id="method.perform_test" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#147-329">source</a><h4 class="code-header">pub(super) fn <a href="#method.perform_test" class="fnname">perform_test</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;match_start_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;place_builder: <a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;test: &amp;<a class="struct" href="matches/struct.Test.html" title="struct rustc_mir_build::build::matches::Test">Test</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;make_target_blocks: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>Self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;<br>)</h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.compare" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#332-359">source</a><h4 class="code-header">fn <a href="#method.compare" class="fnname">compare</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;success_block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;fail_block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;op: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.BinOp.html" title="enum rustc_middle::mir::syntax::BinOp">BinOp</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;left: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;right: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;<br>)</h4></section></summary><div class="docblock"><p>Compare using the provided built-in comparison operator</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.non_scalar_compare" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#362-463">source</a><h4 class="code-header">fn <a href="#method.non_scalar_compare" class="fnname">non_scalar_compare</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;make_target_blocks: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>Self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;value: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.ConstantKind.html" title="enum rustc_middle::mir::ConstantKind">ConstantKind</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;place: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;ty: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;<br>)</h4></section></summary><div class="docblock"><p>Compare two <code>&amp;T</code> values using <code>&lt;T as std::compare::PartialEq&gt;::eq</code></p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.sort_candidate" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#492-695">source</a><h4 class="code-header">pub(super) fn <a href="#method.sort_candidate" class="fnname">sort_candidate</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;test_place: &amp;<a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;test: &amp;<a class="struct" href="matches/struct.Test.html" title="struct rustc_mir_build::build::matches::Test">Test</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: &amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;</h4></section></summary><div class="docblock"><p>Given that we are performing <code>test</code> against <code>test_place</code>, this job
sorts out what the status of <code>candidate</code> will be after the test. See
<code>test_candidates</code> for the usage of this function. The returned index is
the index that this candidate should be placed in the
<code>target_candidates</code> vec. The candidate may be modified to update its
<code>match_pairs</code>.</p>
<p>So, for example, if this candidate is <code>x @ Some(P0)</code> and the <code>Test</code> is
a variant test, then we would modify the candidate to be <code>(x as Option).0 @ P0</code> and return the index corresponding to the variant
<code>Some</code>.</p>
<p>However, in some cases, the test may just not be relevant to candidate.
For example, suppose we are testing whether <code>foo.x == 22</code>, but in one
match arm we have <code>Foo { x: _, ... }</code>… in that case, the test for
what value <code>x</code> has has no particular relevance to this candidate. In
such cases, this function just returns None without doing anything.
This is used by the overall <code>match_candidates</code> algorithm to structure
the match as a whole. See <code>match_candidates</code> for more details.</p>
<p>FIXME(#29623). In some cases, we have some tricky choices to make.  for
example, if we are testing that <code>x == 22</code>, but the candidate is <code>x @ 13..55</code>, what should we do? In the event that the test is true, we know
that the candidate applies, but in the event of false, we don’t know
that it <em>doesn’t</em> apply. For now, we return false, indicate that the
test does not apply to this candidate, but it might be we can get
tighter match code if we do something a bit different.</p>
</div></details><section id="method.candidate_without_match_pair" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#697-703">source</a><h4 class="code-header">fn <a href="#method.candidate_without_match_pair" class="fnname">candidate_without_match_pair</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;match_pair_index: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: &amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'_, 'tcx&gt;<br>)</h4></section><section id="method.candidate_after_slice_test" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#705-721">source</a><h4 class="code-header">fn <a href="#method.candidate_after_slice_test" class="fnname">candidate_after_slice_test</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;match_pair_index: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: &amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;prefix: &amp;'pat [<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;&gt;],<br>&nbsp;&nbsp;&nbsp;&nbsp;opt_slice: &amp;'pat <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;suffix: &amp;'pat [<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;&gt;]<br>)</h4></section><section id="method.candidate_after_variant_switch" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#723-747">source</a><h4 class="code-header">fn <a href="#method.candidate_after_variant_switch" class="fnname">candidate_after_variant_switch</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;match_pair_index: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;adt_def: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/adt/struct.AdtDef.html" title="struct rustc_middle::ty::adt::AdtDef">AdtDef</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;variant_index: <a class="struct" href="../../rustc_target/abi/struct.VariantIdx.html" title="struct rustc_target::abi::VariantIdx">VariantIdx</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;subpatterns: &amp;'pat [<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.FieldPat.html" title="struct rustc_middle::thir::FieldPat">FieldPat</a>&lt;'tcx&gt;],<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: &amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;<br>)</h4></section><section id="method.error_simplifyable" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#749-751">source</a><h4 class="code-header">fn <a href="#method.error_simplifyable" class="fnname">error_simplifyable</a>&lt;'pat&gt;(&amp;mut self, match_pair: &amp;<a class="struct" href="matches/struct.MatchPair.html" title="struct rustc_mir_build::build::matches::MatchPair">MatchPair</a>&lt;'pat, 'tcx&gt;) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.never.html">!</a></h4></section><section id="method.const_range_contains" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#753-769">source</a><h4 class="code-header">fn <a href="#method.const_range_contains" class="fnname">const_range_contains</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;range: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.PatRange.html" title="struct rustc_middle::thir::PatRange">PatRange</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;value: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.ConstantKind.html" title="enum rustc_middle::mir::ConstantKind">ConstantKind</a>&lt;'tcx&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>&gt;</h4></section><section id="method.values_not_contained_in_range" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/test.rs.html#771-783">source</a><h4 class="code-header">fn <a href="#method.values_not_contained_in_range" class="fnname">values_not_contained_in_range</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;range: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.PatRange.html" title="struct rustc_middle::thir::PatRange">PatRange</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;options: &amp;<a class="type" href="../../rustc_data_structures/fx/type.FxIndexMap.html" title="type rustc_data_structures::fx::FxIndexMap">FxIndexMap</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.ConstantKind.html" title="enum rustc_middle::mir::ConstantKind">ConstantKind</a>&lt;'tcx&gt;, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u128.html">u128</a>&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>&gt;</h4></section></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-10" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/util.rs.html#10-96">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-10" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><section id="method.field_match_pairs" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/util.rs.html#11-23">source</a><h4 class="code-header">pub(crate) fn <a href="#method.field_match_pairs" class="fnname">field_match_pairs</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;place: <a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;subpatterns: &amp;'pat [<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.FieldPat.html" title="struct rustc_middle::thir::FieldPat">FieldPat</a>&lt;'tcx&gt;]<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="matches/struct.MatchPair.html" title="struct rustc_mir_build::build::matches::MatchPair">MatchPair</a>&lt;'pat, 'tcx&gt;&gt;</h4></section><section id="method.prefix_slice_suffix" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/util.rs.html#25-73">source</a><h4 class="code-header">pub(crate) fn <a href="#method.prefix_slice_suffix" class="fnname">prefix_slice_suffix</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;match_pairs: &amp;mut <a class="struct" href="https://docs.rs/smallvec/1.8.1/smallvec/struct.SmallVec.html" title="struct smallvec::SmallVec">SmallVec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.array.html">[</a><a class="struct" href="matches/struct.MatchPair.html" title="struct rustc_mir_build::build::matches::MatchPair">MatchPair</a>&lt;'pat, 'tcx&gt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.array.html">; 1]</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;place: &amp;<a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;prefix: &amp;'pat [<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;&gt;],<br>&nbsp;&nbsp;&nbsp;&nbsp;opt_slice: &amp;'pat <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;suffix: &amp;'pat [<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;&gt;]<br>)</h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.false_edges" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/util.rs.html#78-95">source</a><h4 class="code-header">pub(crate) fn <a href="#method.false_edges" class="fnname">false_edges</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;from_block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;real_target: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;imaginary_target: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a><br>)</h4></section></summary><div class="docblock"><p>Creates a false edge to <code>imaginary_target</code> and a real edge to
real_target. If <code>imaginary_target</code> is none, or is the same as the real
target, a Goto is generated instead to simplify the generated MIR.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-11" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#36-834">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-11" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><section id="method.then_else_break" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#37-106">source</a><h4 class="code-header">pub(crate) fn <a href="#method.then_else_break" class="fnname">then_else_break</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;temp_scope_override: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;break_scope: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;variable_source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.match_expr" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#158">source</a><h4 class="code-header">pub(crate) fn <a href="#method.match_expr" class="fnname">match_expr</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;destination: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;arms: &amp;[<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.ArmId.html" title="struct rustc_middle::thir::ArmId">ArmId</a>]<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Generates MIR for a <code>match</code> expression.</p>
<p>The MIR that we generate for a match looks like this.</p>
<div class="example-wrap"><pre class="language-text"><code>[ 0. Pre-match ]
       |
[ 1. Evaluate Scrutinee (expression being matched on) ]
[ (fake read of scrutinee) ]
       |
[ 2. Decision tree -- check discriminants ] &lt;--------+
       |                                             |
       | (once a specific arm is chosen)             |
       |                                             |
[pre_binding_block]                           [otherwise_block]
       |                                             |
[ 3. Create &quot;guard bindings&quot; for arm ]               |
[ (create fake borrows) ]                            |
       |                                             |
[ 4. Execute guard code ]                            |
[ (read fake borrows) ] --(guard is false)-----------+
       |
       | (guard results in true)
       |
[ 5. Create real bindings and execute arm ]
       |
[ Exit match ]</code></pre></div>
<p>All of the different arms have been stacked on top of each other to
simplify the diagram. For an arm with no guard the blocks marked 3 and
4 and the fake borrows are omitted.</p>
<p>We generate MIR in the following steps:</p>
<ol>
<li>Evaluate the scrutinee and add the fake read of it (<a href="struct.Builder.html#method.lower_scrutinee" title="Builder::lower_scrutinee">Builder::lower_scrutinee</a>).</li>
<li>Create the decision tree (<a href="struct.Builder.html#method.lower_match_tree" title="Builder::lower_match_tree">Builder::lower_match_tree</a>).</li>
<li>Determine the fake borrows that are needed from the places that were
matched against and create the required temporaries for them
(<a href="struct.Builder.html#method.calculate_fake_borrows" title="Builder::calculate_fake_borrows">Builder::calculate_fake_borrows</a>).</li>
<li>Create everything else: the guards and the arms (<a href="struct.Builder.html#method.lower_match_arms" title="Builder::lower_match_arms">Builder::lower_match_arms</a>).</li>
</ol>
<h6 id="false-edges"><a href="#false-edges">False edges</a></h6>
<p>We don’t want to have the exact structure of the decision tree be
visible through borrow checking. False edges ensure that the CFG as
seen by borrow checking doesn’t encode this. False edges are added:</p>
<ul>
<li>From each pre-binding block to the next pre-binding block.</li>
<li>From each otherwise block to the next pre-binding block.</li>
</ul>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.lower_scrutinee" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#198-231">source</a><h4 class="code-header">fn <a href="#method.lower_scrutinee" class="fnname">lower_scrutinee</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;&gt;</h4></section></summary><div class="docblock"><p>Evaluate the scrutinee and add the fake read of it.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create_match_candidates" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#234-253">source</a><h4 class="code-header">fn <a href="#method.create_match_candidates" class="fnname">create_match_candidates</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee: <a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;arms: &amp;'pat [<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.ArmId.html" title="struct rustc_middle::thir::ArmId">ArmId</a>]<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(&amp;'pat <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Arm.html" title="struct rustc_middle::thir::Arm">Arm</a>&lt;'tcx&gt;, <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;)&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'a: 'pat,</span></h4></section></summary><div class="docblock"><p>Create the initial <code>Candidate</code>s for a <code>match</code> expression.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.lower_match_tree" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#261-312">source</a><h4 class="code-header">fn <a href="#method.lower_match_tree" class="fnname">lower_match_tree</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;match_start_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;match_has_guard: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidates: &amp;mut [&amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;]<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>)&gt;</h4></section></summary><div class="docblock"><p>Create the decision tree for the match expression, starting from <code>block</code>.</p>
<p>Modifies <code>candidates</code> to store the bindings and type ascriptions for
that candidate.</p>
<p>Returns the places that need fake borrows because we bind or test them.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.lower_match_arms" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#320-401">source</a><h4 class="code-header">fn <a href="#method.lower_match_arms" class="fnname">lower_match_arms</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;destination: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee_place_builder: <a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;arm_candidates: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(&amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Arm.html" title="struct rustc_middle::thir::Arm">Arm</a>&lt;'tcx&gt;, <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'_, 'tcx&gt;)&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;outer_source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrow_temps: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>)&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Lower the bindings, guards and arm bodies of a <code>match</code> expression.</p>
<p>The decision tree should have already been created
(by <a href="struct.Builder.html#method.lower_match_tree" title="Builder::lower_match_tree">Builder::lower_match_tree</a>).</p>
<p><code>outer_source_info</code> is the SourceInfo for the whole match.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.bind_pattern" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#409-486">source</a><h4 class="code-header">fn <a href="#method.bind_pattern" class="fnname">bind_pattern</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;outer_source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'_, 'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;guard: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/enum.Guard.html" title="enum rustc_middle::thir::Guard">Guard</a>&lt;'tcx&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrow_temps: &amp;[(<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>)],<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;arm_span: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;arm_scope: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;match_scope: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a></h4></section></summary><div class="docblock"><p>Binds the variables and ascribes types for a given <code>match</code> arm or
<code>let</code> binding.</p>
<p>Also check if the guard matches, if it’s provided.
<code>arm_scope</code> should be <code>Some</code> if and only if this is called for a
<code>match</code> arm.</p>
</div></details><section id="method.expr_into_pattern" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#488-574">source</a><h4 class="code-header">pub(super) fn <a href="#method.expr_into_pattern" class="fnname">expr_into_pattern</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;irrefutable_pat: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;initializer: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section><section id="method.place_into_pattern" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#576-646">source</a><h4 class="code-header">pub(crate) fn <a href="#method.place_into_pattern" class="fnname">place_into_pattern</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;irrefutable_pat: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;initializer: <a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;set_match_place: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.declare_bindings" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#652-687">source</a><h4 class="code-header">pub(crate) fn <a href="#method.declare_bindings" class="fnname">declare_bindings</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;visibility_scope: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceScope.html" title="struct rustc_middle::mir::SourceScope">SourceScope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;scope_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;pattern: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;has_guard: <a class="struct" href="matches/struct.ArmHasGuard.html" title="struct rustc_mir_build::build::matches::ArmHasGuard">ArmHasGuard</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;opt_match_place: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;(<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;, <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>)&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceScope.html" title="struct rustc_middle::mir::SourceScope">SourceScope</a>&gt;</h4></section></summary><div class="docblock"><p>Declares the bindings of the given patterns and returns the visibility
scope for the bindings in these patterns, if such a scope had to be
created. NOTE: Declaring the bindings should always be done in their
drop scope.</p>
</div></details><section id="method.storage_live_binding" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#689-706">source</a><h4 class="code-header">pub(crate) fn <a href="#method.storage_live_binding" class="fnname">storage_live_binding</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;var: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.LocalVarId.html" title="struct rustc_middle::thir::LocalVarId">LocalVarId</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;for_guard: <a class="enum" href="enum.ForGuard.html" title="enum rustc_mir_build::build::ForGuard">ForGuard</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;schedule_drop: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a><br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;</h4></section><section id="method.schedule_drop_for_binding" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#708-718">source</a><h4 class="code-header">pub(crate) fn <a href="#method.schedule_drop_for_binding" class="fnname">schedule_drop_for_binding</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;var: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.LocalVarId.html" title="struct rustc_middle::thir::LocalVarId">LocalVarId</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;for_guard: <a class="enum" href="enum.ForGuard.html" title="enum rustc_mir_build::build::ForGuard">ForGuard</a><br>)</h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.visit_primary_bindings" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#723-833">source</a><h4 class="code-header">pub(super) fn <a href="#method.visit_primary_bindings" class="fnname">visit_primary_bindings</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;pattern: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;pattern_user_ty: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.UserTypeProjections.html" title="struct rustc_middle::mir::UserTypeProjections">UserTypeProjections</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;f: &amp;mut impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>Self, <a class="enum" href="../../rustc_ast/ast/enum.Mutability.html" title="enum rustc_ast::ast::Mutability">Mutability</a>, <a class="struct" href="../../rustc_span/symbol/struct.Symbol.html" title="struct rustc_span::symbol::Symbol">Symbol</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/enum.BindingMode.html" title="enum rustc_middle::thir::BindingMode">BindingMode</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.LocalVarId.html" title="struct rustc_middle::thir::LocalVarId">LocalVarId</a>, <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.UserTypeProjections.html" title="struct rustc_middle::mir::UserTypeProjections">UserTypeProjections</a>)<br>)</h4></section></summary><div class="docblock"><p>Visit all of the primary bindings in a patterns, that is, visit the
leftmost occurrence of each variable bound in a pattern. A variable
will occur more than once in an or-pattern.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-12" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#1004-1763">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-12" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.match_candidates" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#1046-1096">source</a><h4 class="code-header">fn <a href="#method.match_candidates" class="fnname">match_candidates</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;start_block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise_block: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidates: &amp;mut [&amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;],<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrows: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../rustc_data_structures/fx/type.FxIndexSet.html" title="type rustc_data_structures::fx::FxIndexSet">FxIndexSet</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;&gt;<br>)</h4></section></summary><div class="docblock"><p>The main match algorithm. It begins with a set of candidates
<code>candidates</code> and has the job of generating code to determine
which of these candidates, if any, is the correct one. The
candidates are sorted such that the first item in the list
has the highest priority. When a candidate is found to match
the value, we will set and generate a branch to the appropriate
pre-binding block.</p>
<p>If we find that <em>NONE</em> of the candidates apply, we branch to the
<code>otherwise_block</code>, setting it to <code>Some</code> if required. In principle, this
means that the input list was not exhaustive, though at present we
sometimes are not smart enough to recognize all exhaustive inputs.</p>
<p>It might be surprising that the input can be non-exhaustive.
Indeed, initially, it is not, because all matches are
exhaustive in Rust. But during processing we sometimes divide
up the list of candidates and recurse with a non-exhaustive
list. This is important to keep the size of the generated code
under control. See <a href="struct.Builder.html#method.test_candidates" title="Builder::test_candidates"><code>Builder::test_candidates</code></a> for more details.</p>
<p>If <code>fake_borrows</code> is <code>Some</code>, then places which need fake borrows
will be added to it.</p>
<p>For an example of a case where we set <code>otherwise_block</code>, even for an
exhaustive match, consider:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">match </span>x {
    (<span class="bool-val">true</span>, <span class="bool-val">true</span>) =&gt; (),
    (<span class="kw">_</span>, <span class="bool-val">false</span>) =&gt; (),
    (<span class="bool-val">false</span>, <span class="bool-val">true</span>) =&gt; (),
}</code></pre></div>
<p>For this match, we check if <code>x.0</code> matches <code>true</code> (for the first
arm). If it doesn’t match, we check <code>x.1</code>. If <code>x.1</code> is <code>true</code> we check
if <code>x.0</code> matches <code>false</code> (for the third arm). In the (impossible at
runtime) case when <code>x.0</code> is now <code>true</code>, we branch to
<code>otherwise_block</code>.</p>
</div></details><section id="method.match_simplified_candidates" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#1098-1153">source</a><h4 class="code-header">fn <a href="#method.match_simplified_candidates" class="fnname">match_simplified_candidates</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;start_block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise_block: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidates: &amp;mut [&amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'_, 'tcx&gt;],<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrows: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../rustc_data_structures/fx/type.FxIndexSet.html" title="type rustc_data_structures::fx::FxIndexSet">FxIndexSet</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;&gt;<br>)</h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.select_matched_candidates" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#1180-1260">source</a><h4 class="code-header">fn <a href="#method.select_matched_candidates" class="fnname">select_matched_candidates</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;matched_candidates: &amp;mut [&amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'_, 'tcx&gt;],<br>&nbsp;&nbsp;&nbsp;&nbsp;start_block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrows: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../rustc_data_structures/fx/type.FxIndexSet.html" title="type rustc_data_structures::fx::FxIndexSet">FxIndexSet</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;</h4></section></summary><div class="docblock"><p>Link up matched candidates.</p>
<p>For example, if we have something like this:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>...
<span class="prelude-val">Some</span>(x) <span class="kw">if </span>cond1 =&gt; ...
<span class="prelude-val">Some</span>(x) =&gt; ...
<span class="prelude-val">Some</span>(x) <span class="kw">if </span>cond2 =&gt; ...
...</code></pre></div>
<p>We generate real edges from:</p>
<ul>
<li><code>start_block</code> to the <a href="matches/struct.Candidate.html#structfield.pre_binding_block">pre-binding block</a> of the first pattern,</li>
<li>the <a href="matches/struct.Candidate.html#structfield.otherwise_block">otherwise block</a> of the first pattern to the second pattern,</li>
<li>the <a href="matches/struct.Candidate.html#structfield.otherwise_block">otherwise block</a> of the third pattern to a block with an
<a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.TerminatorKind.html#variant.Unreachable"><code>Unreachable</code> terminator</a>.</li>
</ul>
<p>In addition, we add fake edges from the otherwise blocks to the
pre-binding block of the next candidate in the original set of
candidates.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.test_candidates_with_or" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#1315-1376">source</a><h4 class="code-header">fn <a href="#method.test_candidates_with_or" class="fnname">test_candidates_with_or</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidates: &amp;mut [&amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'_, 'tcx&gt;],<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise_block: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrows: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../rustc_data_structures/fx/type.FxIndexSet.html" title="type rustc_data_structures::fx::FxIndexSet">FxIndexSet</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;&gt;<br>)</h4></section></summary><div class="docblock"><p>Tests a candidate where there are only or-patterns left to test, or
forwards to <a href="struct.Builder.html#method.test_candidates" title="Builder::test_candidates">Builder::test_candidates</a>.</p>
<p>Given a pattern <code>(P | Q, R | S)</code> we (in principle) generate a CFG like
so:</p>
<div class="example-wrap"><pre class="language-text"><code>[ start ]
     |
[ match P, Q ]
     |
     +----------------------------------------+------------------------------------+
     |                                        |                                    |
     V                                        V                                    V
[ P matches ]                           [ Q matches ]                        [ otherwise ]
     |                                        |                                    |
     V                                        V                                    |
[ match R, S ]                          [ match R, S ]                             |
     |                                        |                                    |
     +--------------+------------+            +--------------+------------+        |
     |              |            |            |              |            |        |
     V              V            V            V              V            V        |
[ R matches ] [ S matches ] [otherwise ] [ R matches ] [ S matches ] [otherwise ]  |
     |              |            |            |              |            |        |
     +--------------+------------|------------+--------------+            |        |
     |                           |                                        |        |
     |                           +----------------------------------------+--------+
     |                           |
     V                           V
[ Success ]                 [ Failure ]</code></pre></div>
<p>In practice there are some complications:</p>
<ul>
<li>If there’s a guard, then the otherwise branch of the first match on
<code>R | S</code> goes to a test for whether <code>Q</code> matches, and the control flow
doesn’t merge into a single success block until after the guard is
tested.</li>
<li>If neither <code>P</code> or <code>Q</code> has any bindings or type ascriptions and there
isn’t a match guard, then we create a smaller CFG like:</li>
</ul>
<div class="example-wrap"><pre class="language-text"><code>    ...
     +---------------+------------+
     |               |            |
[ P matches ] [ Q matches ] [ otherwise ]
     |               |            |
     +---------------+            |
     |                           ...
[ match R, S ]
     |
    ...</code></pre></div></div></details><section id="method.test_or_pattern" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#1378-1408">source</a><h4 class="code-header">fn <a href="#method.test_or_pattern" class="fnname">test_or_pattern</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: &amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;pats: &amp;'pat [<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;&gt;],<br>&nbsp;&nbsp;&nbsp;&nbsp;or_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;place: <a class="struct" href="expr/as_place/struct.PlaceBuilder.html" title="struct rustc_mir_build::build::expr::as_place::PlaceBuilder">PlaceBuilder</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrows: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../rustc_data_structures/fx/type.FxIndexSet.html" title="type rustc_data_structures::fx::FxIndexSet">FxIndexSet</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;&gt;<br>)</h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.merge_trivial_subcandidates" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#1412-1442">source</a><h4 class="code-header">fn <a href="#method.merge_trivial_subcandidates" class="fnname">merge_trivial_subcandidates</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: &amp;mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'_, 'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a><br>)</h4></section></summary><div class="docblock"><p>Try to merge all of the subcandidates of the given candidate into one.
This avoids exponentially large CFGs in cases like <code>(1 | 2, 3 | 4, ...)</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.test_candidates" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#1565-1689">source</a><h4 class="code-header">fn <a href="#method.test_candidates" class="fnname">test_candidates</a>&lt;'pat, 'b, 'c&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidates: &amp;'b mut [&amp;'c mut <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;],<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise_block: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrows: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../rustc_data_structures/fx/type.FxIndexSet.html" title="type rustc_data_structures::fx::FxIndexSet">FxIndexSet</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;&gt;<br>)</h4></section></summary><div class="docblock"><p>This is the most subtle part of the matching algorithm. At
this point, the input candidates have been fully simplified,
and so we know that all remaining match-pairs require some
sort of test. To decide what test to perform, we take the highest
priority candidate (the first one in the list, as of January 2021)
and extract the first match-pair from the list. From this we decide
what kind of test is needed using <a href="struct.Builder.html#method.test" title="Builder::test"><code>Builder::test</code></a>, defined in the
<a href="matches/test/index.html"><code>test</code> module</a>.</p>
<p><em>Note:</em> taking the first match pair is somewhat arbitrary, and
we might do better here by choosing more carefully what to
test.</p>
<p>For example, consider the following possible match-pairs:</p>
<ol>
<li><code>x @ Some(P)</code> – we will do a <a href="matches/enum.TestKind.html#variant.Switch"><code>Switch</code></a> to decide what variant <code>x</code> has</li>
<li><code>x @ 22</code> – we will do a <a href="matches/enum.TestKind.html#variant.SwitchInt"><code>SwitchInt</code></a> to decide what value <code>x</code> has</li>
<li><code>x @ 3..5</code> – we will do a <a href="matches/enum.TestKind.html#variant.Range"><code>Range</code></a> test to decide what range <code>x</code> falls in</li>
<li>etc.</li>
</ol>
<p>Once we know what sort of test we are going to perform, this
test may also help us winnow down our candidates. So we walk over
the candidates (from high to low priority) and check. This
gives us, for each outcome of the test, a transformed list of
candidates. For example, if we are testing <code>x.0</code>’s variant,
and we have a candidate <code>(x.0 @ Some(v), x.1 @ 22)</code>,
then we would have a resulting candidate of <code>((x.0 as Some).0 @ v, x.1 @ 22)</code>.
Note that the first match-pair is now simpler (and, in fact, irrefutable).</p>
<p>But there may also be candidates that the test just doesn’t
apply to. The classical example involves wildcards:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">match </span>(x, y, z) {
    (<span class="bool-val">true </span>, <span class="kw">_    </span>, <span class="bool-val">true </span>) =&gt; <span class="bool-val">true</span>,  <span class="comment">// (0)
    </span>(<span class="kw">_    </span>, <span class="bool-val">true </span>, <span class="kw">_    </span>) =&gt; <span class="bool-val">true</span>,  <span class="comment">// (1)
    </span>(<span class="bool-val">false</span>, <span class="bool-val">false</span>, <span class="kw">_    </span>) =&gt; <span class="bool-val">false</span>, <span class="comment">// (2)
    </span>(<span class="bool-val">true </span>, <span class="kw">_    </span>, <span class="bool-val">false</span>) =&gt; <span class="bool-val">false</span>, <span class="comment">// (3)
</span>}</code></pre></div>
<p>In that case, after we test on <code>x</code>, there are 2 overlapping candidate
sets:</p>
<ul>
<li>If the outcome is that <code>x</code> is true, candidates 0, 1, and 3</li>
<li>If the outcome is that <code>x</code> is false, candidates 1 and 2</li>
</ul>
<p>Here, the traditional “decision tree” method would generate 2
separate code-paths for the 2 separate cases.</p>
<p>In some cases, this duplication can create an exponential amount of
code. This is most easily seen by noticing that this method terminates
with precisely the reachable arms being reachable - but that problem
is trivially NP-complete:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code><span class="kw">match </span>(var0, var1, var2, var3, ...) {
    (<span class="bool-val">true </span>, <span class="kw">_   </span>, <span class="kw">_    </span>, <span class="bool-val">false</span>, <span class="bool-val">true</span>, ...) =&gt; <span class="bool-val">false</span>,
    (<span class="kw">_    </span>, <span class="bool-val">true</span>, <span class="bool-val">true </span>, <span class="bool-val">false</span>, <span class="kw">_   </span>, ...) =&gt; <span class="bool-val">false</span>,
    (<span class="bool-val">false</span>, <span class="kw">_   </span>, <span class="bool-val">false</span>, <span class="bool-val">false</span>, <span class="kw">_   </span>, ...) =&gt; <span class="bool-val">false</span>,
    ...
    <span class="kw">_ </span>=&gt; <span class="bool-val">true
</span>}</code></pre></div>
<p>Here the last arm is reachable only if there is an assignment to
the variables that does not match any of the literals. Therefore,
compilation would take an exponential amount of time in some cases.</p>
<p>That kind of exponential worst-case might not occur in practice, but
our simplistic treatment of constants and guards would make it occur
in very common situations - for example <a href="https://github.com/rust-lang/rust/issues/29740">#29740</a>:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code><span class="kw">match </span>x {
    <span class="string">&quot;foo&quot; </span><span class="kw">if </span>foo_guard =&gt; ...,
    <span class="string">&quot;bar&quot; </span><span class="kw">if </span>bar_guard =&gt; ...,
    <span class="string">&quot;baz&quot; </span><span class="kw">if </span>baz_guard =&gt; ...,
    ...
}</code></pre></div>
<p>Here we first test the match-pair <code>x @ &quot;foo&quot;</code>, which is an <a href="matches/enum.TestKind.html#variant.Eq"><code>Eq</code> test</a>.</p>
<p>It might seem that we would end up with 2 disjoint candidate
sets, consisting of the first candidate or the other two, but our
algorithm doesn’t reason about <code>&quot;foo&quot;</code> being distinct from the other
constants; it considers the latter arms to potentially match after
both outcomes, which obviously leads to an exponential number
of tests.</p>
<p>To avoid these kinds of problems, our algorithm tries to ensure
the amount of generated tests is linear. When we do a k-way test,
we return an additional “unmatched” set alongside the obvious <code>k</code>
sets. When we encounter a candidate that would be present in more
than one of the sets, we put it and all candidates below it into the
“unmatched” set. This ensures these <code>k+1</code> sets are disjoint.</p>
<p>After we perform our test, we branch into the appropriate candidate
set and recurse with <code>match_candidates</code>. These sub-matches are
obviously non-exhaustive - as we discarded our otherwise set - so
we set their continuation to do <code>match_candidates</code> on the
“unmatched” set (which is again non-exhaustive).</p>
<p>If you apply this to the above test, you basically wind up
with an if-else-if chain, testing each candidate in turn,
which is precisely what we want.</p>
<p>In addition to avoiding exponential-time blowups, this algorithm
also has the nice property that each guard and arm is only generated
once.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.calculate_fake_borrows" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#1713-1762">source</a><h4 class="code-header">fn <a href="#method.calculate_fake_borrows" class="fnname">calculate_fake_borrows</a>&lt;'b&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrows: &amp;'b <a class="type" href="../../rustc_data_structures/fx/type.FxIndexSet.html" title="type rustc_data_structures::fx::FxIndexSet">FxIndexSet</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;temp_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a><br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>)&gt;</h4></section></summary><div class="docblock"><p>Determine the fake borrows that are needed from a set of places that
have to be stable across match guards.</p>
<p>Returns a list of places that need a fake borrow and the temporary
that’s used to store the fake borrow.</p>
<p>Match exhaustiveness checking is not able to handle the case where the
place being matched on is mutated in the guards. We add “fake borrows”
to the guards that prevent any mutation of the place being matched.
There are a some subtleties:</p>
<ol>
<li>Borrowing <code>*x</code> doesn’t prevent assigning to <code>x</code>. If <code>x</code> is a shared
reference, the borrow isn’t even tracked. As such we have to add fake
borrows of any prefixes of a place</li>
<li>We don’t want <code>match x { _ =&gt; (), }</code> to conflict with mutable
borrows of <code>x</code>, so we only add fake borrows for places which are
bound or tested by the match.</li>
<li>We don’t want the fake borrows to conflict with <code>ref mut</code> bindings,
so we use a special BorrowKind for them.</li>
<li>The fake borrows may be of places in inactive variants, so it would
be UB to generate code for them. They therefore have to be removed
by a MIR pass run after borrow checking.</li>
</ol>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-13" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#1768-2320">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-13" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><section id="method.lower_let_expr" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#1769-1819">source</a><h4 class="code-header">pub(crate) fn <a href="#method.lower_let_expr" class="fnname">lower_let_expr</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;pat: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;else_target: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_scope: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceScope.html" title="struct rustc_middle::mir::SourceScope">SourceScope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.bind_and_guard_matched_candidate" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#1829-2071">source</a><h4 class="code-header">fn <a href="#method.bind_and_guard_matched_candidate" class="fnname">bind_and_guard_matched_candidate</a>&lt;'pat&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;candidate: <a class="struct" href="matches/struct.Candidate.html" title="struct rustc_mir_build::build::matches::Candidate">Candidate</a>&lt;'pat, 'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;parent_bindings: &amp;[(<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="matches/struct.Binding.html" title="struct rustc_mir_build::build::matches::Binding">Binding</a>&lt;'tcx&gt;&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="matches/struct.Ascription.html" title="struct rustc_mir_build::build::matches::Ascription">Ascription</a>&lt;'tcx&gt;&gt;)],<br>&nbsp;&nbsp;&nbsp;&nbsp;guard: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/enum.Guard.html" title="enum rustc_middle::thir::Guard">Guard</a>&lt;'tcx&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;fake_borrows: &amp;[(<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>)],<br>&nbsp;&nbsp;&nbsp;&nbsp;scrutinee_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;arm_span: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;match_scope: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;schedule_drops: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a><br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a></h4></section></summary><div class="docblock"><p>Initializes each of the bindings from the candidate by
moving/copying/ref’ing the source as appropriate. Tests the guard, if
any, and then branches to the arm. Returns the block for the case where
the guard succeeds.</p>
<p>Note: we do not check earlier that if there is a guard,
there cannot be move bindings. We avoid a use-after-move by only
moving the binding once the guard has evaluated to true (see below).</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.ascribe_types" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#2075-2098">source</a><h4 class="code-header">fn <a href="#method.ascribe_types" class="fnname">ascribe_types</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;ascriptions: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&lt;Item = <a class="struct" href="matches/struct.Ascription.html" title="struct rustc_mir_build::build::matches::Ascription">Ascription</a>&lt;'tcx&gt;&gt;<br>)</h4></section></summary><div class="docblock"><p>Append <code>AscribeUserType</code> statements onto the end of <code>block</code>
for each ascription</p>
</div></details><section id="method.bind_matched_candidate_for_guard" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#2100-2150">source</a><h4 class="code-header">fn <a href="#method.bind_matched_candidate_for_guard" class="fnname">bind_matched_candidate_for_guard</a>&lt;'b&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;schedule_drops: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;bindings: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&lt;Item = &amp;'b <a class="struct" href="matches/struct.Binding.html" title="struct rustc_mir_build::build::matches::Binding">Binding</a>&lt;'tcx&gt;&gt;<br>)<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'tcx: 'b,</span></h4></section><section id="method.bind_matched_candidate_for_arm_body" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#2152-2184">source</a><h4 class="code-header">fn <a href="#method.bind_matched_candidate_for_arm_body" class="fnname">bind_matched_candidate_for_arm_body</a>&lt;'b&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;schedule_drops: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;bindings: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&lt;Item = &amp;'b <a class="struct" href="matches/struct.Binding.html" title="struct rustc_mir_build::build::matches::Binding">Binding</a>&lt;'tcx&gt;&gt;<br>)<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'tcx: 'b,</span></h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.declare_binding" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#2191-2269">source</a><h4 class="code-header">fn <a href="#method.declare_binding" class="fnname">declare_binding</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;visibility_scope: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceScope.html" title="struct rustc_middle::mir::SourceScope">SourceScope</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;mutability: <a class="enum" href="../../rustc_ast/ast/enum.Mutability.html" title="enum rustc_ast::ast::Mutability">Mutability</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;name: <a class="struct" href="../../rustc_span/symbol/struct.Symbol.html" title="struct rustc_span::symbol::Symbol">Symbol</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;mode: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/enum.BindingMode.html" title="enum rustc_middle::thir::BindingMode">BindingMode</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;var_id: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.LocalVarId.html" title="struct rustc_middle::thir::LocalVarId">LocalVarId</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;var_ty: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;user_ty: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.UserTypeProjections.html" title="struct rustc_middle::mir::UserTypeProjections">UserTypeProjections</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;has_guard: <a class="struct" href="matches/struct.ArmHasGuard.html" title="struct rustc_mir_build::build::matches::ArmHasGuard">ArmHasGuard</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;opt_match_place: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;(<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;&gt;, <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>)&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;pat_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a><br>)</h4></section></summary><div class="docblock"><p>Each binding (<code>ref mut var</code>/<code>ref var</code>/<code>mut var</code>/<code>var</code>, where the bound
<code>var</code> has type <code>T</code> in the arm body) in a pattern maps to 2 locals. The
first local is a binding for occurrences of <code>var</code> in the guard, which
will have type <code>&amp;T</code>. The second local is a binding for occurrences of
<code>var</code> in the arm body, which will have type <code>T</code>.</p>
</div></details><section id="method.ast_let_else" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/matches/mod.rs.html#2271-2319">source</a><h4 class="code-header">pub(crate) fn <a href="#method.ast_let_else" class="fnname">ast_let_else</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;init: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;initializer_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;else_block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.BlockId.html" title="struct rustc_middle::thir::BlockId">BlockId</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;let_else_scope: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;pattern: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Pat.html" title="struct rustc_middle::thir::Pat">Pat</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;</h4></section></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-14" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/misc.rs.html#11-75">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-14" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.temp" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/misc.rs.html#17-24">source</a><h4 class="code-header">pub(crate) fn <a href="#method.temp" class="fnname">temp</a>(&amp;mut self, ty: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;, span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;</h4></section></summary><div class="docblock"><p>Adds a new temporary value of type <code>ty</code> storing the result of
evaluating <code>expr</code>.</p>
<p>N.B., <strong>No cleanup is scheduled for this temporary.</strong> You should
call <code>schedule_drop</code> once the temporary is initialized.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.literal_operand" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/misc.rs.html#28-35">source</a><h4 class="code-header">pub(crate) fn <a href="#method.literal_operand" class="fnname">literal_operand</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;literal: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.ConstantKind.html" title="enum rustc_middle::mir::ConstantKind">ConstantKind</a>&lt;'tcx&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;</h4></section></summary><div class="docblock"><p>Convenience function for creating a literal operand, one
without any user type annotation.</p>
</div></details><section id="method.zero_literal" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/misc.rs.html#39-43">source</a><h4 class="code-header">pub(crate) fn <a href="#method.zero_literal" class="fnname">zero_literal</a>(&amp;mut self, span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>, ty: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;</h4></section><section id="method.push_usize" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/misc.rs.html#45-64">source</a><h4 class="code-header">pub(crate) fn <a href="#method.push_usize" class="fnname">push_usize</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;value: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a><br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;</h4></section><section id="method.consume_by_copy_or_move" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/misc.rs.html#66-74">source</a><h4 class="code-header">pub(crate) fn <a href="#method.consume_by_copy_or_move" class="fnname">consume_by_copy_or_move</a>(&amp;self, place: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;</h4></section></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-15" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#443-1138">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-15" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><section id="method.in_breakable_scope" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#448-492">source</a><h4 class="code-header">pub(crate) fn <a href="#method.in_breakable_scope" class="fnname">in_breakable_scope</a>&lt;F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;loop_block: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;break_destination: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;mut <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;&gt;,</span></h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.in_if_then_scope" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#510-531">source</a><h4 class="code-header">pub(crate) fn <a href="#method.in_if_then_scope" class="fnname">in_if_then_scope</a>&lt;F&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;region_scope: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; (<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>)<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;mut <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;,</span></h4></section></summary><div class="docblock"><p>Start an if-then scope which tracks drop for <code>if</code> expressions and <code>if</code>
guards.</p>
<p>For an if-let chain:</p>
<p>if let Some(x) = a &amp;&amp; let Some(y) = b &amp;&amp; let Some(z) = c { … }</p>
<p>There are three possible ways the condition can be false and we may have
to drop <code>x</code>, <code>x</code> and <code>y</code>, or neither depending on which binding fails.
To handle this correctly we use a <code>DropTree</code> in a similar way to a
<code>loop</code> expression and ‘break’ out on all of the ‘else’ paths.</p>
<p>Notes:</p>
<ul>
<li>We don’t need to keep a stack of scopes in the <code>Builder</code> because the
‘else’ paths will only leave the innermost scope.</li>
<li>This is also used for match guards.</li>
</ul>
</div></details><section id="method.in_opt_scope" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#533-552">source</a><h4 class="code-header">pub(crate) fn <a href="#method.in_opt_scope" class="fnname">in_opt_scope</a>&lt;F, R&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;opt_scope: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;(<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a>)&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;R&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;mut <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;R&gt;,</span></h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.in_scope" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#556-594">source</a><h4 class="code-header">pub(crate) fn <a href="#method.in_scope" class="fnname">in_scope</a>&lt;F, R&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;region_scope: (<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a>),<br>&nbsp;&nbsp;&nbsp;&nbsp;lint_level: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/enum.LintLevel.html" title="enum rustc_middle::thir::LintLevel">LintLevel</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;f: F<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;R&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;mut <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;R&gt;,</span></h4></section></summary><div class="docblock"><p>Convenience wrapper that pushes a scope and then executes <code>f</code>
to build its contents, popping the scope afterwards.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.push_scope" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#600-602">source</a><h4 class="code-header">pub(crate) fn <a href="#method.push_scope" class="fnname">push_scope</a>(&amp;mut self, region_scope: (<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a>))</h4></section></summary><div class="docblock"><p>Push a scope onto the stack. You can then build code in this
scope and call <code>pop_scope</code> afterwards. Note that these two
calls must be paired; using <code>in_scope</code> as a convenience
wrapper maybe preferable.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.pop_scope" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#607-619">source</a><h4 class="code-header">pub(crate) fn <a href="#method.pop_scope" class="fnname">pop_scope</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;region_scope: (<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a>),<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Pops a scope, which should have region scope <code>region_scope</code>,
adding any drops onto the end of <code>block</code> that are needed.
This must match 1-to-1 with <code>push_scope</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.break_scope" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#622-699">source</a><h4 class="code-header">pub(crate) fn <a href="#method.break_scope" class="fnname">break_scope</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;value: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;target: <a class="enum" href="scope/enum.BreakableTarget.html" title="enum rustc_mir_build::build::scope::BreakableTarget">BreakableTarget</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a><br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Sets up the drops for breaking from <code>block</code> to <code>target</code>.</p>
</div></details><section id="method.break_for_else" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#701-729">source</a><h4 class="code-header">pub(crate) fn <a href="#method.break_for_else" class="fnname">break_for_else</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;target: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a><br>)</h4></section><section id="method.add_dummy_assignment" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#733-737">source</a><h4 class="code-header">fn <a href="#method.add_dummy_assignment" class="fnname">add_dummy_assignment</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;source_info: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a><br>)</h4></section><section id="method.leave_top_scope" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#739-756">source</a><h4 class="code-header">fn <a href="#method.leave_top_scope" class="fnname">leave_top_scope</a>(&amp;mut self, block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a></h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.new_source_scope" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#759-791">source</a><h4 class="code-header">pub(crate) fn <a href="#method.new_source_scope" class="fnname">new_source_scope</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;lint_level: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/enum.LintLevel.html" title="enum rustc_middle::thir::LintLevel">LintLevel</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;safety: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Safety.html" title="enum rustc_middle::mir::Safety">Safety</a>&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceScope.html" title="struct rustc_middle::mir::SourceScope">SourceScope</a></h4></section></summary><div class="docblock"><p>Creates a new source scope, nested in the current one.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.source_info" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#794-796">source</a><h4 class="code-header">pub(crate) fn <a href="#method.source_info" class="fnname">source_info</a>(&amp;self, span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceInfo.html" title="struct rustc_middle::mir::SourceInfo">SourceInfo</a></h4></section></summary><div class="docblock"><p>Given a span and the current source scope, make a SourceInfo.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.local_scope" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#819-821">source</a><h4 class="code-header">pub(crate) fn <a href="#method.local_scope" class="fnname">local_scope</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a></h4></section></summary><div class="docblock"><p>Returns the scope that we should use as the lifetime of an
operand. Basically, an operand must live until it is consumed.
This is similar to, but not quite the same as, the temporary
scope (which can be larger or smaller).</p>
<p>Consider:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code><span class="kw">let </span>x = foo(bar(X, Y));</code></pre></div>
<p>We wish to pop the storage for X and Y after <code>bar()</code> is
called, not after the whole <code>let</code> is completed.</p>
<p>As another example, if the second argument diverges:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>foo(Box::new(<span class="number">2</span>), <span class="macro">panic!</span>())</code></pre></div>
<p>We would allocate the box but then free it on the unwinding
path; we would also emit a free on the ‘success’ path from
panic, but that will turn out to be removed as dead-code.</p>
</div></details><section id="method.schedule_drop_storage_and_value" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#825-833">source</a><h4 class="code-header">pub(crate) fn <a href="#method.schedule_drop_storage_and_value" class="fnname">schedule_drop_storage_and_value</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;region_scope: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;local: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a><br>)</h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="method.schedule_drop" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#839-934">source</a><h4 class="code-header">pub(crate) fn <a href="#method.schedule_drop" class="fnname">schedule_drop</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;region_scope: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;local: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;drop_kind: <a class="enum" href="scope/enum.DropKind.html" title="enum rustc_mir_build::build::scope::DropKind">DropKind</a><br>)</h4></section></summary><div class="docblock"><p>Indicates that <code>place</code> should be dropped on exit from <code>region_scope</code>.</p>
<p>When called with <code>DropKind::Storage</code>, <code>place</code> shouldn’t be the return
place, or a function parameter.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.record_operands_moved" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#972-993">source</a><h4 class="code-header">pub(crate) fn <a href="#method.record_operands_moved" class="fnname">record_operands_moved</a>(&amp;mut self, operands: &amp;[<a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;])</h4></section></summary><div class="docblock"><p>Indicates that the “local operand” stored in <code>local</code> is
<em>moved</em> at some point during execution (see <code>local_scope</code> for
more information about what a “local operand” is – in short,
it’s an intermediate operand created as part of preparing some
MIR instruction). We use this information to suppress
redundant drops on the non-unwind paths. This results in less
MIR, but also avoids spurious borrow check errors
(c.f. #64391).</p>
<p>Example: when compiling the call to <code>foo</code> here:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>foo(bar(), ...)</code></pre></div>
<p>we would evaluate <code>bar()</code> to an operand <code>_X</code>. We would also
schedule <code>_X</code> to be dropped when the expression scope for
<code>foo(bar())</code> is exited. This is relevant, for example, if the
later arguments should unwind (it would ensure that <code>_X</code> gets
dropped). However, if no unwind occurs, then <code>_X</code> will be
unconditionally consumed by the <code>call</code>:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>bb {
  ...
  _R = CALL(foo, _X, ...)
}</code></pre></div>
<p>However, <code>_X</code> is still registered to be dropped, and so if we
do nothing else, we would generate a <code>DROP(_X)</code> that occurs
after the call. This will later be optimized out by the
drop-elaboration code, but in the meantime it can lead to
spurious borrow-check errors – the problem, ironically, is
not the <code>DROP(_X)</code> itself, but the (spurious) unwind pathways
that it creates. See #64391 for an example.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.diverge_cleanup" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#999-1022">source</a><h4 class="code-header">fn <a href="#method.diverge_cleanup" class="fnname">diverge_cleanup</a>(&amp;mut self) -&gt; <a class="struct" href="scope/struct.DropIdx.html" title="struct rustc_mir_build::build::scope::DropIdx">DropIdx</a></h4></section></summary><div class="docblock"><p>Returns the <a href="scope/struct.DropIdx.html" title="DropIdx">DropIdx</a> for the innermost drop if the function unwound at
this point. The <code>DropIdx</code> will be created if it doesn’t already exist.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.diverge_from" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#1029-1045">source</a><h4 class="code-header">pub(crate) fn <a href="#method.diverge_from" class="fnname">diverge_from</a>(&amp;mut self, start: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>)</h4></section></summary><div class="docblock"><p>Prepares to create a path that performs all required cleanup for a
terminator that can unwind at the given basic block.</p>
<p>This path terminates in Resume. The path isn’t created until after all
of the non-unwind paths in this item have been lowered.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.generator_drop_cleanup" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#1052-1079">source</a><h4 class="code-header">pub(crate) fn <a href="#method.generator_drop_cleanup" class="fnname">generator_drop_cleanup</a>(&amp;mut self, yield_block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>)</h4></section></summary><div class="docblock"><p>Sets up a path that performs all required cleanup for dropping a
generator, starting from the given block that ends in
<a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.TerminatorKind.html#variant.Yield" title="TerminatorKind::Yield">TerminatorKind::Yield</a>.</p>
<p>This path terminates in GeneratorDrop.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.build_drop_and_replace" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#1082-1100">source</a><h4 class="code-header">pub(crate) fn <a href="#method.build_drop_and_replace" class="fnname">build_drop_and_replace</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;place: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;value: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Utility function for <em>non</em>-scope code to build their own drops</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.assert" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#1105-1124">source</a><h4 class="code-header">pub(crate) fn <a href="#method.assert" class="fnname">assert</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;cond: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/enum.Operand.html" title="enum rustc_middle::mir::syntax::Operand">Operand</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;expected: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: <a class="type" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/type.AssertMessage.html" title="type rustc_middle::mir::syntax::AssertMessage">AssertMessage</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a><br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a></h4></section></summary><div class="docblock"><p>Creates an <code>Assert</code> terminator and return the success block.
If the boolean condition operand is not the expected value,
a runtime panic will be caused with the given message.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clear_top_scope" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#1130-1137">source</a><h4 class="code-header">pub(crate) fn <a href="#method.clear_top_scope" class="fnname">clear_top_scope</a>(&amp;mut self, region_scope: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>)</h4></section></summary><div class="docblock"><p>Unschedules any drops in the top scope.</p>
<p>This is only needed for <code>match</code> arm scopes, because they have one
entrance per pattern, but only one exit.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-16" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#1217-1330">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-16" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx: 'a&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.build_exit_tree" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#1222-1263">source</a><h4 class="code-header">fn <a href="#method.build_exit_tree" class="fnname">build_exit_tree</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;drops: <a class="struct" href="scope/struct.DropTree.html" title="struct rustc_mir_build::build::scope::DropTree">DropTree</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;continue_block: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Build a drop tree for a breakable scope.</p>
<p>If <code>continue_block</code> is <code>Some</code>, then the tree is for <code>continue</code> inside a
loop. Otherwise this is for <code>break</code> or <code>return</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.build_drop_trees" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#1266-1277">source</a><h4 class="code-header">pub(crate) fn <a href="#method.build_drop_trees" class="fnname">build_drop_trees</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Build the unwind and generator drop trees.</p>
</div></details><section id="method.build_generator_drop_trees" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#1279-1313">source</a><h4 class="code-header">fn <a href="#method.build_generator_drop_trees" class="fnname">build_generator_drop_trees</a>(&amp;mut self)</h4></section><section id="method.build_unwind_tree" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/scope.rs.html#1315-1329">source</a><h4 class="code-header">fn <a href="#method.build_unwind_tree" class="fnname">build_unwind_tree</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;cfg: &amp;mut <a class="struct" href="struct.CFG.html" title="struct rustc_mir_build::build::CFG">CFG</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;drops: &amp;mut <a class="struct" href="scope/struct.DropTree.html" title="struct rustc_mir_build::build::scope::DropTree">DropTree</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;fn_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;resume_block: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>&gt;<br>)</h4></section></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-17" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/mod.rs.html#227-235">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-17" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><section id="method.is_bound_var_in_guard" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/mod.rs.html#228-230">source</a><h4 class="code-header">fn <a href="#method.is_bound_var_in_guard" class="fnname">is_bound_var_in_guard</a>(&amp;self, id: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.LocalVarId.html" title="struct rustc_middle::thir::LocalVarId">LocalVarId</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section><section id="method.var_local_id" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/mod.rs.html#232-234">source</a><h4 class="code-header">fn <a href="#method.var_local_id" class="fnname">var_local_id</a>(&amp;self, id: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.LocalVarId.html" title="struct rustc_middle::thir::LocalVarId">LocalVarId</a>, for_guard: <a class="enum" href="enum.ForGuard.html" title="enum rustc_mir_build::build::ForGuard">ForGuard</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Local.html" title="struct rustc_middle::mir::Local">Local</a></h4></section></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Builder%3C%27a%2C%20%27tcx%3E-18" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/mod.rs.html#683-969">source</a><a href="#impl-Builder%3C%27a%2C%20%27tcx%3E-18" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></summary><div class="impl-items"><section id="method.new" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/mod.rs.html#684-749">source</a><h4 class="code-header">fn <a href="#method.new" class="fnname">new</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;thir: &amp;'a <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Thir.html" title="struct rustc_middle::thir::Thir">Thir</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;infcx: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_infer/infer/struct.InferCtxt.html" title="struct rustc_infer::infer::InferCtxt">InferCtxt</a>&lt;'a, 'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;def: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.WithOptConstParam.html" title="struct rustc_middle::ty::WithOptConstParam">WithOptConstParam</a>&lt;<a class="struct" href="../../rustc_span/def_id/struct.LocalDefId.html" title="struct rustc_span::def_id::LocalDefId">LocalDefId</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;hir_id: <a class="struct" href="../../rustc_hir/hir_id/struct.HirId.html" title="struct rustc_hir::hir_id::HirId">HirId</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;arg_count: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;safety: <a class="enum" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.Safety.html" title="enum rustc_middle::mir::Safety">Safety</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;return_ty: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;return_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;generator_kind: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="../../rustc_hir/hir/enum.GeneratorKind.html" title="enum rustc_hir::hir::GeneratorKind">GeneratorKind</a>&gt;<br>) -&gt; <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h4></section><section id="method.finish" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/mod.rs.html#751-770">source</a><h4 class="code-header">fn <a href="#method.finish" class="fnname">finish</a>(self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Body.html" title="struct rustc_middle::mir::Body">Body</a>&lt;'tcx&gt;</h4></section><section id="method.args_and_body" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/mod.rs.html#772-933">source</a><h4 class="code-header">fn <a href="#method.args_and_body" class="fnname">args_and_body</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;block: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.BasicBlock.html" title="struct rustc_middle::mir::BasicBlock">BasicBlock</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;fn_def_id: <a class="struct" href="../../rustc_span/def_id/struct.LocalDefId.html" title="struct rustc_span::def_id::LocalDefId">LocalDefId</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;arguments: &amp;<a class="struct" href="../../rustc_index/vec/struct.IndexVec.html" title="struct rustc_index::vec::IndexVec">IndexVec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.ParamId.html" title="struct rustc_middle::thir::ParamId">ParamId</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Param.html" title="struct rustc_middle::thir::Param">Param</a>&lt;'tcx&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;argument_scope: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/middle/region/struct.Scope.html" title="struct rustc_middle::middle::region::Scope">Scope</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;expr: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/thir/struct.Expr.html" title="struct rustc_middle::thir::Expr">Expr</a>&lt;'tcx&gt;<br>) -&gt; <a class="struct" href="struct.BlockAnd.html" title="struct rustc_mir_build::build::BlockAnd">BlockAnd</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section><section id="method.set_correct_source_scope_for_arg" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/mod.rs.html#935-955">source</a><h4 class="code-header">fn <a href="#method.set_correct_source_scope_for_arg" class="fnname">set_correct_source_scope_for_arg</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;arg_hir_id: <a class="struct" href="../../rustc_hir/hir_id/struct.HirId.html" title="struct rustc_hir::hir_id::HirId">HirId</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;original_source_scope: <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.SourceScope.html" title="struct rustc_middle::mir::SourceScope">SourceScope</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;pattern_span: <a class="struct" href="../../rustc_span/span_encoding/struct.Span.html" title="struct rustc_span::span_encoding::Span">Span</a><br>)</h4></section><section id="method.get_unit_temp" class="method has-srclink"><a class="srclink rightside" href="../../src/rustc_mir_build/build/mod.rs.html#957-968">source</a><h4 class="code-header">fn <a href="#method.get_unit_temp" class="fnname">get_unit_temp</a>(&amp;mut self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/syntax/struct.Place.html" title="struct rustc_middle::mir::syntax::Place">Place</a>&lt;'tcx&gt;</h4></section></div></details></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a href="#impl-RefUnwindSafe-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section><section id="impl-Send-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a href="#impl-Send-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section><section id="impl-Sync-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a href="#impl-Sync-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section><section id="impl-Unpin-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a href="#impl-Unpin-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'tcx: 'a,</span></h3></section><section id="impl-UnwindSafe-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a href="#impl-UnwindSafe-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, 'tcx&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.Builder.html" title="struct rustc_mir_build::build::Builder">Builder</a>&lt;'a, 'tcx&gt;</h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Any-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#200">source</a><a href="#impl-Any-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#201">source</a><a href="#method.type_id" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#209">source</a><a href="#impl-Borrow%3CT%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#211">source</a></span><a href="#method.borrow" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>T</h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#218">source</a><a href="#impl-BorrowMut%3CT%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#219">source</a></span><a href="#method.borrow_mut" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>T</h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#559">source</a><a href="#impl-From%3CT%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#562">source</a></span><a href="#method.from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fnname">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#543">source</a><a href="#impl-Into%3CU%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#551">source</a></span><a href="#method.into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into" class="fnname">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#601">source</a><a href="#impl-TryFrom%3CU%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#607">source</a></span><a href="#method.try_from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#586">source</a><a href="#impl-TryInto%3CU%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error-1" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#592">source</a></span><a href="#method.try_into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><section id="impl-Captures%3C%27a%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="impl has-srclink"><a class="srclink rightside" href="../../src/rustc_data_structures/captures.rs.html#8">source</a><a href="#impl-Captures%3C%27a%3E-for-Builder%3C%27a%2C%20%27tcx%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;'a, T&gt; <a class="trait" href="../../rustc_data_structures/captures/trait.Captures.html" title="trait rustc_data_structures::captures::Captures">Captures</a>&lt;'a&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></div><h2 id="layout" class="small-section-header"> Layout<a href="#layout" class="anchor"></a></h2>
<div class="docblock">
<div class="warning"><p><strong>Note:</strong> Most layout information is <strong>completely unstable</strong> and may even differ between compilations. The only exception is types with certain <code>repr(...)</code> attributes. Please see the Rust Reference’s <a href="https://doc.rust-lang.org/reference/type-layout.html">“Type Layout”</a> chapter for details on type layout guarantees.</p></div>
<p><strong>Size:</strong> 1392 bytes</p>
</div>
</section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="rustc_mir_build" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.0-dev" ></div></body></html>