<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Support for serializing the dep-graph and reloading it."><meta name="keywords" content="rust, rustlang, rust-lang, rustc_incremental"><title>rustc_incremental - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="../crates.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../rustc_incremental/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../rustc_incremental/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate rustc_incremental</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 1.65.0-dev</li><li><a id="all-types" href="all.html">All Items</a></li></ul></div><section><div class="block"><ul><li><a href="#modules">Modules</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../rustc_incremental/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">rustc_incremental</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/rustc_incremental/lib.rs.html#1-30">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Support for serializing the dep-graph and reloading it.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="assert_dep_graph/index.html" title="rustc_incremental::assert_dep_graph mod">assert_dep_graph</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">This pass is only used for the UNIT TESTS and DEBUGGING NEEDS
around dependency graph construction. It serves two purposes; it
will dump graphs in graphviz form to disk, and it searches for
<code>#[rustc_if_this_changed]</code> and <code>#[rustc_then_this_would_need]</code>
annotations. These annotations can be used to test whether paths
exist in the graph. These checks run after codegen, so they view the
the final state of the dependency graph. Note that there are
similar assertions found in <code>persist::dirty_clean</code> which check the
<strong>initial</strong> state of the dependency graph, just after it has been
loaded from disk.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="assert_module_sources/index.html" title="rustc_incremental::assert_module_sources mod">assert_module_sources</a></div><div class="item-right docblock-short">This pass is only used for UNIT TESTS related to incremental
compilation. It tests whether a particular <code>.o</code> file will be re-used
from a previous compilation or whether it must be regenerated.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="persist/index.html" title="rustc_incremental::persist mod">persist</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">When in incremental mode, this pass dumps out the dependency graph
into the given directory. At the same time, it also hashes the
various HIR nodes.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="enum" href="enum.LoadResult.html" title="rustc_incremental::LoadResult enum">LoadResult</a></div><div class="item-right docblock-short">Represents the result of an attempt to load incremental compilation data.</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.build_dep_graph.html" title="rustc_incremental::build_dep_graph fn">build_dep_graph</a></div><div class="item-right docblock-short">Builds the dependency graph.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.copy_cgu_workproduct_to_incr_comp_cache_dir.html" title="rustc_incremental::copy_cgu_workproduct_to_incr_comp_cache_dir fn">copy_cgu_workproduct_to_incr_comp_cache_dir</a></div><div class="item-right docblock-short">Copies a CGU work product to the incremental compilation directory, so next compilation can find and reuse it.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.delete_workproduct_files.html" title="rustc_incremental::delete_workproduct_files fn">delete_workproduct_files</a></div><div class="item-right docblock-short">Removes files for a given work product.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.finalize_session_directory.html" title="rustc_incremental::finalize_session_directory fn">finalize_session_directory</a></div><div class="item-right docblock-short">This function finalizes and thus â€˜publishesâ€™ the session directory by
renaming it to <code>s-{timestamp}-{svh}</code> and releasing the file lock.
If there have been compilation errors, however, this function will just
delete the presumably invalid session directory.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.garbage_collect_session_directories.html" title="rustc_incremental::garbage_collect_session_directories fn">garbage_collect_session_directories</a></div><div class="item-right docblock-short">Runs garbage collection for the current session.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.in_incr_comp_dir.html" title="rustc_incremental::in_incr_comp_dir fn">in_incr_comp_dir</a></div><div class="item-right docblock-short">Returns the path for a given filename within the incremental compilation directory,
not necessarily from the current session.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.in_incr_comp_dir_sess.html" title="rustc_incremental::in_incr_comp_dir_sess fn">in_incr_comp_dir_sess</a></div><div class="item-right docblock-short">Returns the path for a given filename within the incremental compilation directory
in the current session.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.load_dep_graph.html" title="rustc_incremental::load_dep_graph fn">load_dep_graph</a></div><div class="item-right docblock-short">Launch a thread and load the dependency graph in the background.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.load_query_result_cache.html" title="rustc_incremental::load_query_result_cache fn">load_query_result_cache</a></div><div class="item-right docblock-short">Attempts to load the query result cache from disk</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.prepare_session_directory.html" title="rustc_incremental::prepare_session_directory fn">prepare_session_directory</a></div><div class="item-right docblock-short">Allocates the private session directory.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.save_dep_graph.html" title="rustc_incremental::save_dep_graph fn">save_dep_graph</a></div><div class="item-right docblock-short">Saves and writes the <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/dep_graph/type.DepGraph.html" title="DepGraph"><code>DepGraph</code></a> to the file system.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.save_work_product_index.html" title="rustc_incremental::save_work_product_index fn">save_work_product_index</a></div><div class="item-right docblock-short">Saves the work product index.</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="type" href="type.DepGraphFuture.html" title="rustc_incremental::DepGraphFuture type">DepGraphFuture</a></div><div class="item-right docblock-short">An asynchronous type for computing the dependency graph.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="rustc_incremental" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0-dev" ></div></body></html>