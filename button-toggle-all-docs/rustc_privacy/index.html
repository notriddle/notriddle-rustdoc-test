<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `rustc_privacy` crate."><meta name="keywords" content="rust, rustlang, rust-lang, rustc_privacy"><title>rustc_privacy - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="../crates.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../rustc_privacy/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../rustc_privacy/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate rustc_privacy</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 1.65.0-dev</li><li><a id="all-types" href="all.html">All Items</a></li></ul></div><section><div class="block"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../rustc_privacy/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">rustc_privacy</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/rustc_privacy/lib.rs.html#1-2147">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="errors/index.html" title="rustc_privacy::errors mod">errors</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.DefIdVisitorSkeleton.html" title="rustc_privacy::DefIdVisitorSkeleton struct">DefIdVisitorSkeleton</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.EmbargoVisitor.html" title="rustc_privacy::EmbargoVisitor struct">EmbargoVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">The embargo visitor, used to determine the exports of the AST.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.FindMin.html" title="rustc_privacy::FindMin struct">FindMin</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Visitor used to determine impl visibility and reachability.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.NamePrivacyVisitor.html" title="rustc_privacy::NamePrivacyVisitor struct">NamePrivacyVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Name privacy visitor, checks privacy and reports violations.
Most of name privacy checks are performed during the main resolution phase,
or later in type checking when field accesses and associated items are resolved.
This pass performs remaining checks for fields in struct expressions and patterns.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.ObsoleteCheckTypeForPrivatenessVisitor.html" title="rustc_privacy::ObsoleteCheckTypeForPrivatenessVisitor struct">ObsoleteCheckTypeForPrivatenessVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.ObsoleteVisiblePrivateTypesVisitor.html" title="rustc_privacy::ObsoleteVisiblePrivateTypesVisitor struct">ObsoleteVisiblePrivateTypesVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Obsolete visitors for checking for private items in public interfaces.
These visitors are supposed to be kept in frozen state and produce an
“old error node set”. For backward compatibility the new visitor reports
warnings instead of hard errors when the erroneous node is not in this old set.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.PrivateItemsInPublicInterfacesChecker.html" title="rustc_privacy::PrivateItemsInPublicInterfacesChecker struct">PrivateItemsInPublicInterfacesChecker</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.ReachEverythingInTheInterfaceVisitor.html" title="rustc_privacy::ReachEverythingInTheInterfaceVisitor struct">ReachEverythingInTheInterfaceVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.SearchInterfaceForPrivateItemsVisitor.html" title="rustc_privacy::SearchInterfaceForPrivateItemsVisitor struct">SearchInterfaceForPrivateItemsVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">SearchInterfaceForPrivateItemsVisitor traverses an item’s interface and
finds any private components in it.
PrivateItemsInPublicInterfacesVisitor ensures there are no private types
and traits in public interfaces.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.TestReachabilityVisitor.html" title="rustc_privacy::TestReachabilityVisitor struct">TestReachabilityVisitor</a></div><div class="item-right docblock-short">Visitor, used for AccessLevels table checking</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.TypePrivacyVisitor.html" title="rustc_privacy::TypePrivacyVisitor struct">TypePrivacyVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Type privacy visitor, checks types for privacy and reports violations.
Both explicitly written types and inferred types of expressions and patterns are checked.
Checks are performed on “semantic” types regardless of names and their hygiene.</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="trait" href="trait.DefIdVisitor.html" title="rustc_privacy::DefIdVisitor trait">DefIdVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Generic infrastructure used to implement specific visitors below.
Implemented to visit all <code>DefId</code>s in a type.
Visiting <code>DefId</code>s is useful because visibilities and reachabilities are attached to them.
The idea is to visit “all components of a type”, as documented in
<a href="https://github.com/rust-lang/rfcs/blob/master/text/2145-type-privacy.md#how-to-determine-visibility-of-a-type">https://github.com/rust-lang/rfcs/blob/master/text/2145-type-privacy.md#how-to-determine-visibility-of-a-type</a>.
The default type visitor (<code>TypeVisitor</code>) does most of the job, but it has some shortcomings.
First, it doesn’t have overridable <code>fn visit_trait_ref</code>, so we have to catch trait <code>DefId</code>s
manually. Second, it doesn’t visit some type components like signatures of fn types, or traits
in <code>impl Trait</code>, see individual comments in <code>DefIdVisitorSkeleton::visit_ty</code>.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="trait" href="trait.VisibilityLike.html" title="rustc_privacy::VisibilityLike trait">VisibilityLike</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.check_mod_privacy.html" title="rustc_privacy::check_mod_privacy fn">check_mod_privacy</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.check_private_in_public.html" title="rustc_privacy::check_private_in_public fn">check_private_in_public</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.local_visibility.html" title="rustc_privacy::local_visibility fn">local_visibility</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.min.html" title="rustc_privacy::min fn">min</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.privacy_access_levels.html" title="rustc_privacy::privacy_access_levels fn">privacy_access_levels</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.provide.html" title="rustc_privacy::provide fn">provide</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.visibility.html" title="rustc_privacy::visibility fn">visibility</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="rustc_privacy" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0-dev" ></div></body></html>