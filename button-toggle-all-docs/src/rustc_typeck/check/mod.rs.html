<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source of the Rust file `compiler/rustc_typeck/src/check/mod.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>mod.rs - source</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../../normalize.css"><link rel="stylesheet" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../../ayu.css" disabled><link rel="stylesheet" href="../../../dark.css" disabled><link rel="stylesheet" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script defer src="../../../source-script.js"></script><script defer src="../../../source-files.js"></script><script defer src="../../../main.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc source"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../rustc_typeck/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../rustc_typeck/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../rustc_typeck/index.html"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="example-wrap"><pre class="line-numbers"><span id="1">1</span>
<span id="2">2</span>
<span id="3">3</span>
<span id="4">4</span>
<span id="5">5</span>
<span id="6">6</span>
<span id="7">7</span>
<span id="8">8</span>
<span id="9">9</span>
<span id="10">10</span>
<span id="11">11</span>
<span id="12">12</span>
<span id="13">13</span>
<span id="14">14</span>
<span id="15">15</span>
<span id="16">16</span>
<span id="17">17</span>
<span id="18">18</span>
<span id="19">19</span>
<span id="20">20</span>
<span id="21">21</span>
<span id="22">22</span>
<span id="23">23</span>
<span id="24">24</span>
<span id="25">25</span>
<span id="26">26</span>
<span id="27">27</span>
<span id="28">28</span>
<span id="29">29</span>
<span id="30">30</span>
<span id="31">31</span>
<span id="32">32</span>
<span id="33">33</span>
<span id="34">34</span>
<span id="35">35</span>
<span id="36">36</span>
<span id="37">37</span>
<span id="38">38</span>
<span id="39">39</span>
<span id="40">40</span>
<span id="41">41</span>
<span id="42">42</span>
<span id="43">43</span>
<span id="44">44</span>
<span id="45">45</span>
<span id="46">46</span>
<span id="47">47</span>
<span id="48">48</span>
<span id="49">49</span>
<span id="50">50</span>
<span id="51">51</span>
<span id="52">52</span>
<span id="53">53</span>
<span id="54">54</span>
<span id="55">55</span>
<span id="56">56</span>
<span id="57">57</span>
<span id="58">58</span>
<span id="59">59</span>
<span id="60">60</span>
<span id="61">61</span>
<span id="62">62</span>
<span id="63">63</span>
<span id="64">64</span>
<span id="65">65</span>
<span id="66">66</span>
<span id="67">67</span>
<span id="68">68</span>
<span id="69">69</span>
<span id="70">70</span>
<span id="71">71</span>
<span id="72">72</span>
<span id="73">73</span>
<span id="74">74</span>
<span id="75">75</span>
<span id="76">76</span>
<span id="77">77</span>
<span id="78">78</span>
<span id="79">79</span>
<span id="80">80</span>
<span id="81">81</span>
<span id="82">82</span>
<span id="83">83</span>
<span id="84">84</span>
<span id="85">85</span>
<span id="86">86</span>
<span id="87">87</span>
<span id="88">88</span>
<span id="89">89</span>
<span id="90">90</span>
<span id="91">91</span>
<span id="92">92</span>
<span id="93">93</span>
<span id="94">94</span>
<span id="95">95</span>
<span id="96">96</span>
<span id="97">97</span>
<span id="98">98</span>
<span id="99">99</span>
<span id="100">100</span>
<span id="101">101</span>
<span id="102">102</span>
<span id="103">103</span>
<span id="104">104</span>
<span id="105">105</span>
<span id="106">106</span>
<span id="107">107</span>
<span id="108">108</span>
<span id="109">109</span>
<span id="110">110</span>
<span id="111">111</span>
<span id="112">112</span>
<span id="113">113</span>
<span id="114">114</span>
<span id="115">115</span>
<span id="116">116</span>
<span id="117">117</span>
<span id="118">118</span>
<span id="119">119</span>
<span id="120">120</span>
<span id="121">121</span>
<span id="122">122</span>
<span id="123">123</span>
<span id="124">124</span>
<span id="125">125</span>
<span id="126">126</span>
<span id="127">127</span>
<span id="128">128</span>
<span id="129">129</span>
<span id="130">130</span>
<span id="131">131</span>
<span id="132">132</span>
<span id="133">133</span>
<span id="134">134</span>
<span id="135">135</span>
<span id="136">136</span>
<span id="137">137</span>
<span id="138">138</span>
<span id="139">139</span>
<span id="140">140</span>
<span id="141">141</span>
<span id="142">142</span>
<span id="143">143</span>
<span id="144">144</span>
<span id="145">145</span>
<span id="146">146</span>
<span id="147">147</span>
<span id="148">148</span>
<span id="149">149</span>
<span id="150">150</span>
<span id="151">151</span>
<span id="152">152</span>
<span id="153">153</span>
<span id="154">154</span>
<span id="155">155</span>
<span id="156">156</span>
<span id="157">157</span>
<span id="158">158</span>
<span id="159">159</span>
<span id="160">160</span>
<span id="161">161</span>
<span id="162">162</span>
<span id="163">163</span>
<span id="164">164</span>
<span id="165">165</span>
<span id="166">166</span>
<span id="167">167</span>
<span id="168">168</span>
<span id="169">169</span>
<span id="170">170</span>
<span id="171">171</span>
<span id="172">172</span>
<span id="173">173</span>
<span id="174">174</span>
<span id="175">175</span>
<span id="176">176</span>
<span id="177">177</span>
<span id="178">178</span>
<span id="179">179</span>
<span id="180">180</span>
<span id="181">181</span>
<span id="182">182</span>
<span id="183">183</span>
<span id="184">184</span>
<span id="185">185</span>
<span id="186">186</span>
<span id="187">187</span>
<span id="188">188</span>
<span id="189">189</span>
<span id="190">190</span>
<span id="191">191</span>
<span id="192">192</span>
<span id="193">193</span>
<span id="194">194</span>
<span id="195">195</span>
<span id="196">196</span>
<span id="197">197</span>
<span id="198">198</span>
<span id="199">199</span>
<span id="200">200</span>
<span id="201">201</span>
<span id="202">202</span>
<span id="203">203</span>
<span id="204">204</span>
<span id="205">205</span>
<span id="206">206</span>
<span id="207">207</span>
<span id="208">208</span>
<span id="209">209</span>
<span id="210">210</span>
<span id="211">211</span>
<span id="212">212</span>
<span id="213">213</span>
<span id="214">214</span>
<span id="215">215</span>
<span id="216">216</span>
<span id="217">217</span>
<span id="218">218</span>
<span id="219">219</span>
<span id="220">220</span>
<span id="221">221</span>
<span id="222">222</span>
<span id="223">223</span>
<span id="224">224</span>
<span id="225">225</span>
<span id="226">226</span>
<span id="227">227</span>
<span id="228">228</span>
<span id="229">229</span>
<span id="230">230</span>
<span id="231">231</span>
<span id="232">232</span>
<span id="233">233</span>
<span id="234">234</span>
<span id="235">235</span>
<span id="236">236</span>
<span id="237">237</span>
<span id="238">238</span>
<span id="239">239</span>
<span id="240">240</span>
<span id="241">241</span>
<span id="242">242</span>
<span id="243">243</span>
<span id="244">244</span>
<span id="245">245</span>
<span id="246">246</span>
<span id="247">247</span>
<span id="248">248</span>
<span id="249">249</span>
<span id="250">250</span>
<span id="251">251</span>
<span id="252">252</span>
<span id="253">253</span>
<span id="254">254</span>
<span id="255">255</span>
<span id="256">256</span>
<span id="257">257</span>
<span id="258">258</span>
<span id="259">259</span>
<span id="260">260</span>
<span id="261">261</span>
<span id="262">262</span>
<span id="263">263</span>
<span id="264">264</span>
<span id="265">265</span>
<span id="266">266</span>
<span id="267">267</span>
<span id="268">268</span>
<span id="269">269</span>
<span id="270">270</span>
<span id="271">271</span>
<span id="272">272</span>
<span id="273">273</span>
<span id="274">274</span>
<span id="275">275</span>
<span id="276">276</span>
<span id="277">277</span>
<span id="278">278</span>
<span id="279">279</span>
<span id="280">280</span>
<span id="281">281</span>
<span id="282">282</span>
<span id="283">283</span>
<span id="284">284</span>
<span id="285">285</span>
<span id="286">286</span>
<span id="287">287</span>
<span id="288">288</span>
<span id="289">289</span>
<span id="290">290</span>
<span id="291">291</span>
<span id="292">292</span>
<span id="293">293</span>
<span id="294">294</span>
<span id="295">295</span>
<span id="296">296</span>
<span id="297">297</span>
<span id="298">298</span>
<span id="299">299</span>
<span id="300">300</span>
<span id="301">301</span>
<span id="302">302</span>
<span id="303">303</span>
<span id="304">304</span>
<span id="305">305</span>
<span id="306">306</span>
<span id="307">307</span>
<span id="308">308</span>
<span id="309">309</span>
<span id="310">310</span>
<span id="311">311</span>
<span id="312">312</span>
<span id="313">313</span>
<span id="314">314</span>
<span id="315">315</span>
<span id="316">316</span>
<span id="317">317</span>
<span id="318">318</span>
<span id="319">319</span>
<span id="320">320</span>
<span id="321">321</span>
<span id="322">322</span>
<span id="323">323</span>
<span id="324">324</span>
<span id="325">325</span>
<span id="326">326</span>
<span id="327">327</span>
<span id="328">328</span>
<span id="329">329</span>
<span id="330">330</span>
<span id="331">331</span>
<span id="332">332</span>
<span id="333">333</span>
<span id="334">334</span>
<span id="335">335</span>
<span id="336">336</span>
<span id="337">337</span>
<span id="338">338</span>
<span id="339">339</span>
<span id="340">340</span>
<span id="341">341</span>
<span id="342">342</span>
<span id="343">343</span>
<span id="344">344</span>
<span id="345">345</span>
<span id="346">346</span>
<span id="347">347</span>
<span id="348">348</span>
<span id="349">349</span>
<span id="350">350</span>
<span id="351">351</span>
<span id="352">352</span>
<span id="353">353</span>
<span id="354">354</span>
<span id="355">355</span>
<span id="356">356</span>
<span id="357">357</span>
<span id="358">358</span>
<span id="359">359</span>
<span id="360">360</span>
<span id="361">361</span>
<span id="362">362</span>
<span id="363">363</span>
<span id="364">364</span>
<span id="365">365</span>
<span id="366">366</span>
<span id="367">367</span>
<span id="368">368</span>
<span id="369">369</span>
<span id="370">370</span>
<span id="371">371</span>
<span id="372">372</span>
<span id="373">373</span>
<span id="374">374</span>
<span id="375">375</span>
<span id="376">376</span>
<span id="377">377</span>
<span id="378">378</span>
<span id="379">379</span>
<span id="380">380</span>
<span id="381">381</span>
<span id="382">382</span>
<span id="383">383</span>
<span id="384">384</span>
<span id="385">385</span>
<span id="386">386</span>
<span id="387">387</span>
<span id="388">388</span>
<span id="389">389</span>
<span id="390">390</span>
<span id="391">391</span>
<span id="392">392</span>
<span id="393">393</span>
<span id="394">394</span>
<span id="395">395</span>
<span id="396">396</span>
<span id="397">397</span>
<span id="398">398</span>
<span id="399">399</span>
<span id="400">400</span>
<span id="401">401</span>
<span id="402">402</span>
<span id="403">403</span>
<span id="404">404</span>
<span id="405">405</span>
<span id="406">406</span>
<span id="407">407</span>
<span id="408">408</span>
<span id="409">409</span>
<span id="410">410</span>
<span id="411">411</span>
<span id="412">412</span>
<span id="413">413</span>
<span id="414">414</span>
<span id="415">415</span>
<span id="416">416</span>
<span id="417">417</span>
<span id="418">418</span>
<span id="419">419</span>
<span id="420">420</span>
<span id="421">421</span>
<span id="422">422</span>
<span id="423">423</span>
<span id="424">424</span>
<span id="425">425</span>
<span id="426">426</span>
<span id="427">427</span>
<span id="428">428</span>
<span id="429">429</span>
<span id="430">430</span>
<span id="431">431</span>
<span id="432">432</span>
<span id="433">433</span>
<span id="434">434</span>
<span id="435">435</span>
<span id="436">436</span>
<span id="437">437</span>
<span id="438">438</span>
<span id="439">439</span>
<span id="440">440</span>
<span id="441">441</span>
<span id="442">442</span>
<span id="443">443</span>
<span id="444">444</span>
<span id="445">445</span>
<span id="446">446</span>
<span id="447">447</span>
<span id="448">448</span>
<span id="449">449</span>
<span id="450">450</span>
<span id="451">451</span>
<span id="452">452</span>
<span id="453">453</span>
<span id="454">454</span>
<span id="455">455</span>
<span id="456">456</span>
<span id="457">457</span>
<span id="458">458</span>
<span id="459">459</span>
<span id="460">460</span>
<span id="461">461</span>
<span id="462">462</span>
<span id="463">463</span>
<span id="464">464</span>
<span id="465">465</span>
<span id="466">466</span>
<span id="467">467</span>
<span id="468">468</span>
<span id="469">469</span>
<span id="470">470</span>
<span id="471">471</span>
<span id="472">472</span>
<span id="473">473</span>
<span id="474">474</span>
<span id="475">475</span>
<span id="476">476</span>
<span id="477">477</span>
<span id="478">478</span>
<span id="479">479</span>
<span id="480">480</span>
<span id="481">481</span>
<span id="482">482</span>
<span id="483">483</span>
<span id="484">484</span>
<span id="485">485</span>
<span id="486">486</span>
<span id="487">487</span>
<span id="488">488</span>
<span id="489">489</span>
<span id="490">490</span>
<span id="491">491</span>
<span id="492">492</span>
<span id="493">493</span>
<span id="494">494</span>
<span id="495">495</span>
<span id="496">496</span>
<span id="497">497</span>
<span id="498">498</span>
<span id="499">499</span>
<span id="500">500</span>
<span id="501">501</span>
<span id="502">502</span>
<span id="503">503</span>
<span id="504">504</span>
<span id="505">505</span>
<span id="506">506</span>
<span id="507">507</span>
<span id="508">508</span>
<span id="509">509</span>
<span id="510">510</span>
<span id="511">511</span>
<span id="512">512</span>
<span id="513">513</span>
<span id="514">514</span>
<span id="515">515</span>
<span id="516">516</span>
<span id="517">517</span>
<span id="518">518</span>
<span id="519">519</span>
<span id="520">520</span>
<span id="521">521</span>
<span id="522">522</span>
<span id="523">523</span>
<span id="524">524</span>
<span id="525">525</span>
<span id="526">526</span>
<span id="527">527</span>
<span id="528">528</span>
<span id="529">529</span>
<span id="530">530</span>
<span id="531">531</span>
<span id="532">532</span>
<span id="533">533</span>
<span id="534">534</span>
<span id="535">535</span>
<span id="536">536</span>
<span id="537">537</span>
<span id="538">538</span>
<span id="539">539</span>
<span id="540">540</span>
<span id="541">541</span>
<span id="542">542</span>
<span id="543">543</span>
<span id="544">544</span>
<span id="545">545</span>
<span id="546">546</span>
<span id="547">547</span>
<span id="548">548</span>
<span id="549">549</span>
<span id="550">550</span>
<span id="551">551</span>
<span id="552">552</span>
<span id="553">553</span>
<span id="554">554</span>
<span id="555">555</span>
<span id="556">556</span>
<span id="557">557</span>
<span id="558">558</span>
<span id="559">559</span>
<span id="560">560</span>
<span id="561">561</span>
<span id="562">562</span>
<span id="563">563</span>
<span id="564">564</span>
<span id="565">565</span>
<span id="566">566</span>
<span id="567">567</span>
<span id="568">568</span>
<span id="569">569</span>
<span id="570">570</span>
<span id="571">571</span>
<span id="572">572</span>
<span id="573">573</span>
<span id="574">574</span>
<span id="575">575</span>
<span id="576">576</span>
<span id="577">577</span>
<span id="578">578</span>
<span id="579">579</span>
<span id="580">580</span>
<span id="581">581</span>
<span id="582">582</span>
<span id="583">583</span>
<span id="584">584</span>
<span id="585">585</span>
<span id="586">586</span>
<span id="587">587</span>
<span id="588">588</span>
<span id="589">589</span>
<span id="590">590</span>
<span id="591">591</span>
<span id="592">592</span>
<span id="593">593</span>
<span id="594">594</span>
<span id="595">595</span>
<span id="596">596</span>
<span id="597">597</span>
<span id="598">598</span>
<span id="599">599</span>
<span id="600">600</span>
<span id="601">601</span>
<span id="602">602</span>
<span id="603">603</span>
<span id="604">604</span>
<span id="605">605</span>
<span id="606">606</span>
<span id="607">607</span>
<span id="608">608</span>
<span id="609">609</span>
<span id="610">610</span>
<span id="611">611</span>
<span id="612">612</span>
<span id="613">613</span>
<span id="614">614</span>
<span id="615">615</span>
<span id="616">616</span>
<span id="617">617</span>
<span id="618">618</span>
<span id="619">619</span>
<span id="620">620</span>
<span id="621">621</span>
<span id="622">622</span>
<span id="623">623</span>
<span id="624">624</span>
<span id="625">625</span>
<span id="626">626</span>
<span id="627">627</span>
<span id="628">628</span>
<span id="629">629</span>
<span id="630">630</span>
<span id="631">631</span>
<span id="632">632</span>
<span id="633">633</span>
<span id="634">634</span>
<span id="635">635</span>
<span id="636">636</span>
<span id="637">637</span>
<span id="638">638</span>
<span id="639">639</span>
<span id="640">640</span>
<span id="641">641</span>
<span id="642">642</span>
<span id="643">643</span>
<span id="644">644</span>
<span id="645">645</span>
<span id="646">646</span>
<span id="647">647</span>
<span id="648">648</span>
<span id="649">649</span>
<span id="650">650</span>
<span id="651">651</span>
<span id="652">652</span>
<span id="653">653</span>
<span id="654">654</span>
<span id="655">655</span>
<span id="656">656</span>
<span id="657">657</span>
<span id="658">658</span>
<span id="659">659</span>
<span id="660">660</span>
<span id="661">661</span>
<span id="662">662</span>
<span id="663">663</span>
<span id="664">664</span>
<span id="665">665</span>
<span id="666">666</span>
<span id="667">667</span>
<span id="668">668</span>
<span id="669">669</span>
<span id="670">670</span>
<span id="671">671</span>
<span id="672">672</span>
<span id="673">673</span>
<span id="674">674</span>
<span id="675">675</span>
<span id="676">676</span>
<span id="677">677</span>
<span id="678">678</span>
<span id="679">679</span>
<span id="680">680</span>
<span id="681">681</span>
<span id="682">682</span>
<span id="683">683</span>
<span id="684">684</span>
<span id="685">685</span>
<span id="686">686</span>
<span id="687">687</span>
<span id="688">688</span>
<span id="689">689</span>
<span id="690">690</span>
<span id="691">691</span>
<span id="692">692</span>
<span id="693">693</span>
<span id="694">694</span>
<span id="695">695</span>
<span id="696">696</span>
<span id="697">697</span>
<span id="698">698</span>
<span id="699">699</span>
<span id="700">700</span>
<span id="701">701</span>
<span id="702">702</span>
<span id="703">703</span>
<span id="704">704</span>
<span id="705">705</span>
<span id="706">706</span>
<span id="707">707</span>
<span id="708">708</span>
<span id="709">709</span>
<span id="710">710</span>
<span id="711">711</span>
<span id="712">712</span>
<span id="713">713</span>
<span id="714">714</span>
<span id="715">715</span>
<span id="716">716</span>
<span id="717">717</span>
<span id="718">718</span>
<span id="719">719</span>
<span id="720">720</span>
<span id="721">721</span>
<span id="722">722</span>
<span id="723">723</span>
<span id="724">724</span>
<span id="725">725</span>
<span id="726">726</span>
<span id="727">727</span>
<span id="728">728</span>
<span id="729">729</span>
<span id="730">730</span>
<span id="731">731</span>
<span id="732">732</span>
<span id="733">733</span>
<span id="734">734</span>
<span id="735">735</span>
<span id="736">736</span>
<span id="737">737</span>
<span id="738">738</span>
<span id="739">739</span>
<span id="740">740</span>
<span id="741">741</span>
<span id="742">742</span>
<span id="743">743</span>
<span id="744">744</span>
<span id="745">745</span>
<span id="746">746</span>
<span id="747">747</span>
<span id="748">748</span>
<span id="749">749</span>
<span id="750">750</span>
<span id="751">751</span>
<span id="752">752</span>
<span id="753">753</span>
<span id="754">754</span>
<span id="755">755</span>
<span id="756">756</span>
<span id="757">757</span>
<span id="758">758</span>
<span id="759">759</span>
<span id="760">760</span>
<span id="761">761</span>
<span id="762">762</span>
<span id="763">763</span>
<span id="764">764</span>
<span id="765">765</span>
<span id="766">766</span>
<span id="767">767</span>
<span id="768">768</span>
<span id="769">769</span>
<span id="770">770</span>
<span id="771">771</span>
<span id="772">772</span>
<span id="773">773</span>
<span id="774">774</span>
<span id="775">775</span>
<span id="776">776</span>
<span id="777">777</span>
<span id="778">778</span>
<span id="779">779</span>
<span id="780">780</span>
<span id="781">781</span>
<span id="782">782</span>
<span id="783">783</span>
<span id="784">784</span>
<span id="785">785</span>
<span id="786">786</span>
<span id="787">787</span>
<span id="788">788</span>
<span id="789">789</span>
<span id="790">790</span>
<span id="791">791</span>
<span id="792">792</span>
<span id="793">793</span>
<span id="794">794</span>
<span id="795">795</span>
<span id="796">796</span>
<span id="797">797</span>
<span id="798">798</span>
<span id="799">799</span>
<span id="800">800</span>
<span id="801">801</span>
<span id="802">802</span>
<span id="803">803</span>
<span id="804">804</span>
<span id="805">805</span>
<span id="806">806</span>
<span id="807">807</span>
<span id="808">808</span>
<span id="809">809</span>
<span id="810">810</span>
<span id="811">811</span>
<span id="812">812</span>
<span id="813">813</span>
<span id="814">814</span>
<span id="815">815</span>
<span id="816">816</span>
<span id="817">817</span>
<span id="818">818</span>
<span id="819">819</span>
<span id="820">820</span>
<span id="821">821</span>
<span id="822">822</span>
<span id="823">823</span>
<span id="824">824</span>
<span id="825">825</span>
<span id="826">826</span>
<span id="827">827</span>
<span id="828">828</span>
<span id="829">829</span>
<span id="830">830</span>
<span id="831">831</span>
<span id="832">832</span>
<span id="833">833</span>
<span id="834">834</span>
<span id="835">835</span>
<span id="836">836</span>
<span id="837">837</span>
<span id="838">838</span>
<span id="839">839</span>
<span id="840">840</span>
<span id="841">841</span>
<span id="842">842</span>
<span id="843">843</span>
<span id="844">844</span>
<span id="845">845</span>
<span id="846">846</span>
<span id="847">847</span>
<span id="848">848</span>
<span id="849">849</span>
<span id="850">850</span>
<span id="851">851</span>
<span id="852">852</span>
<span id="853">853</span>
<span id="854">854</span>
<span id="855">855</span>
<span id="856">856</span>
<span id="857">857</span>
<span id="858">858</span>
<span id="859">859</span>
<span id="860">860</span>
<span id="861">861</span>
<span id="862">862</span>
<span id="863">863</span>
<span id="864">864</span>
<span id="865">865</span>
<span id="866">866</span>
<span id="867">867</span>
<span id="868">868</span>
<span id="869">869</span>
<span id="870">870</span>
<span id="871">871</span>
<span id="872">872</span>
<span id="873">873</span>
<span id="874">874</span>
<span id="875">875</span>
<span id="876">876</span>
<span id="877">877</span>
<span id="878">878</span>
<span id="879">879</span>
<span id="880">880</span>
<span id="881">881</span>
<span id="882">882</span>
<span id="883">883</span>
<span id="884">884</span>
<span id="885">885</span>
<span id="886">886</span>
<span id="887">887</span>
<span id="888">888</span>
<span id="889">889</span>
<span id="890">890</span>
<span id="891">891</span>
<span id="892">892</span>
<span id="893">893</span>
<span id="894">894</span>
<span id="895">895</span>
<span id="896">896</span>
<span id="897">897</span>
<span id="898">898</span>
<span id="899">899</span>
<span id="900">900</span>
<span id="901">901</span>
<span id="902">902</span>
<span id="903">903</span>
<span id="904">904</span>
<span id="905">905</span>
<span id="906">906</span>
<span id="907">907</span>
<span id="908">908</span>
<span id="909">909</span>
<span id="910">910</span>
<span id="911">911</span>
<span id="912">912</span>
<span id="913">913</span>
<span id="914">914</span>
<span id="915">915</span>
<span id="916">916</span>
<span id="917">917</span>
<span id="918">918</span>
<span id="919">919</span>
<span id="920">920</span>
<span id="921">921</span>
<span id="922">922</span>
<span id="923">923</span>
<span id="924">924</span>
<span id="925">925</span>
<span id="926">926</span>
<span id="927">927</span>
<span id="928">928</span>
<span id="929">929</span>
<span id="930">930</span>
<span id="931">931</span>
<span id="932">932</span>
<span id="933">933</span>
<span id="934">934</span>
<span id="935">935</span>
<span id="936">936</span>
<span id="937">937</span>
<span id="938">938</span>
<span id="939">939</span>
<span id="940">940</span>
<span id="941">941</span>
<span id="942">942</span>
<span id="943">943</span>
<span id="944">944</span>
<span id="945">945</span>
<span id="946">946</span>
<span id="947">947</span>
<span id="948">948</span>
<span id="949">949</span>
<span id="950">950</span>
<span id="951">951</span>
<span id="952">952</span>
<span id="953">953</span>
<span id="954">954</span>
<span id="955">955</span>
<span id="956">956</span>
<span id="957">957</span>
<span id="958">958</span>
<span id="959">959</span>
<span id="960">960</span>
<span id="961">961</span>
<span id="962">962</span>
<span id="963">963</span>
<span id="964">964</span>
<span id="965">965</span>
<span id="966">966</span>
<span id="967">967</span>
</pre><pre class="rust"><code><span class="doccomment">/*!

# typeck: check phase

Within the check phase of type check, we check each item one at a time
(bodies of function expressions are checked as part of the containing
function). Inference is used to supply types wherever they are unknown.

By far the most complex case is checking the body of a function. This
can be broken down into several distinct phases:

- gather: creates type variables to represent the type of each local
  variable and pattern binding.

- main: the main pass does the lion&#39;s share of the work: it
  determines the types of all expressions, resolves
  methods, checks for most invalid conditions, and so forth.  In
  some cases, where a type is unknown, it may create a type or region
  variable and use that as the type of an expression.

  In the process of checking, various constraints will be placed on
  these type variables through the subtyping relationships requested
  through the `demand` module.  The `infer` module is in charge
  of resolving those constraints.

- regionck: after main is complete, the regionck pass goes over all
  types looking for regions and making sure that they did not escape
  into places where they are not in scope.  This may also influence the
  final assignments of the various region variables if there is some
  flexibility.

- writeback: writes the final types within a function body, replacing
  type variables with their final inferred types.  These final types
  are written into the `tcx.node_types` table, which should *never* contain
  any reference to a type variable.

## Intermediate types

While type checking a function, the intermediate types for the
expressions, blocks, and so forth contained within the function are
stored in `fcx.node_types` and `fcx.node_substs`.  These types
may contain unresolved type variables.  After type checking is
complete, the functions in the writeback module are used to take the
types from this table, resolve them, and then write them into their
permanent home in the type context `tcx`.

This means that during inferencing you should use `fcx.write_ty()`
and `fcx.expr_ty()` / `fcx.node_ty()` to write/obtain the types of
nodes within the function.

The types of top-level items, which never contain unbound type
variables, are stored directly into the `tcx` typeck_results.

N.B., a type variable is not the same thing as a type parameter.  A
type variable is an instance of a type parameter. That is,
given a generic function `fn foo&lt;T&gt;(t: T)`, while checking the
function `foo`, the type `ty_param(0)` refers to the type `T`, which
is treated in abstract. However, when `foo()` is called, `T` will be
substituted for a fresh type variable `N`.  This variable will
eventually be resolved to some concrete type (which might itself be
a type parameter).

*/

</span><span class="kw">pub mod </span><a href="_match.rs.html#1-557">_match</a>;
<span class="kw">mod </span><a href="autoderef.rs.html#1-78">autoderef</a>;
<span class="kw">mod </span><a href="callee.rs.html#1-694">callee</a>;
<span class="kw">pub mod </span><a href="cast.rs.html#1-1163">cast</a>;
<span class="kw">mod </span><a href="check.rs.html#1-1753">check</a>;
<span class="kw">mod </span><a href="closure.rs.html#1-825">closure</a>;
<span class="kw">pub mod </span><a href="coercion.rs.html#1-1885">coercion</a>;
<span class="kw">mod </span><a href="compare_method.rs.html#1-1791">compare_method</a>;
<span class="kw">pub mod </span><a href="demand.rs.html#1-1415">demand</a>;
<span class="kw">mod </span><a href="diverges.rs.html#1-78">diverges</a>;
<span class="kw">pub mod </span><a href="dropck.rs.html#4-329">dropck</a>;
<span class="kw">mod </span><a href="expectation.rs.html#1-122">expectation</a>;
<span class="kw">mod </span><a href="expr.rs.html#1-2876">expr</a>;
<span class="kw">mod </span><a href="fallback.rs.html#1-398">fallback</a>;
<span class="kw">mod </span><a href="fn_ctxt/mod.rs.html#1-304">fn_ctxt</a>;
<span class="kw">mod </span><a href="gather_locals.rs.html#1-160">gather_locals</a>;
<span class="kw">mod </span><a href="generator_interior.rs.html#1-646">generator_interior</a>;
<span class="kw">mod </span><a href="inherited.rs.html#1-209">inherited</a>;
<span class="kw">pub mod </span><a href="intrinsic.rs.html#1-533">intrinsic</a>;
<span class="kw">mod </span><a href="intrinsicck.rs.html#1-531">intrinsicck</a>;
<span class="kw">pub mod </span><a href="method/mod.rs.html#1-626">method</a>;
<span class="kw">mod </span><a href="op.rs.html#1-993">op</a>;
<span class="kw">mod </span><a href="pat.rs.html#1-2187">pat</a>;
<span class="kw">mod </span><a href="place_op.rs.html#1-451">place_op</a>;
<span class="kw">mod </span><a href="region.rs.html#1-852">region</a>;
<span class="kw">pub mod </span><a href="rvalue_scopes.rs.html#1-83">rvalue_scopes</a>;
<span class="kw">mod </span><a href="upvar.rs.html#1-2276">upvar</a>;
<span class="kw">pub mod </span><a href="wfcheck.rs.html#1-1983">wfcheck</a>;
<span class="kw">pub mod </span><a href="writeback.rs.html#5-808">writeback</a>;

<span class="kw">use </span>check::{<a href="check.rs.html#38">check_abi</a>, <a href="check.rs.html#76-85">check_fn</a>, <a href="check.rs.html#1659">check_mod_item_types</a>};
<span class="kw">pub use </span><a href="diverges.rs.html#11">diverges::Diverges</a>;
<span class="kw">pub use </span><a href="expectation.rs.html#11">expectation::Expectation</a>;
<span class="kw">pub use </span><a href="#79">fn_ctxt</a>::<span class="kw-2">*</span>;
<span class="kw">pub use </span>inherited::{<a href="inherited.rs.html#32">Inherited</a>, <a href="inherited.rs.html#83">InheritedBuilder</a>};

<span class="kw">use </span><a href="../astconv/mod.rs.html#55"><span class="kw">crate</span>::astconv::AstConv</a>;
<span class="kw">use </span><a href="gather_locals.rs.html#36"><span class="kw">crate</span>::check::gather_locals::GatherLocalsVisitor</a>;
<span class="kw">use </span>rustc_data_structures::fx::{FxHashMap, FxHashSet};
<span class="kw">use </span>rustc_errors::{
    <a href="../../../rustc_lint_defs/macro.pluralize.html">pluralize</a>, <a href="../../../rustc_errors/macro.struct_span_err.html">struct_span_err</a>, <a href="../../../rustc_lint_defs/enum.Applicability.html">Applicability</a>, <a href="../../../rustc_errors/diagnostic/struct.Diagnostic.html">Diagnostic</a>, <a href="../../../rustc_errors/diagnostic_builder/struct.DiagnosticBuilder.html">DiagnosticBuilder</a>, <a href="../../../rustc_error_messages/struct.MultiSpan.html">MultiSpan</a>,
};
<span class="kw">use </span><a href="../../../rustc_hir/index.html">rustc_hir</a> <span class="kw">as </span>hir;
<span class="kw">use </span><a href="../../../rustc_hir/def/enum.Res.html">rustc_hir::def::Res</a>;
<span class="kw">use </span>rustc_hir::def_id::{<a href="../../../rustc_span/def_id/struct.DefId.html">DefId</a>, <a href="../../../rustc_span/def_id/struct.LocalDefId.html">LocalDefId</a>};
<span class="kw">use </span><a href="../../../rustc_hir/intravisit/trait.Visitor.html">rustc_hir::intravisit::Visitor</a>;
<span class="kw">use </span>rustc_hir::{<a href="../../../rustc_hir/hir_id/type.HirIdMap.html">HirIdMap</a>, <a href="../../../rustc_hir/hir/enum.ImplicitSelfKind.html">ImplicitSelfKind</a>, <a href="../../../rustc_hir/hir/enum.Node.html">Node</a>};
<span class="kw">use </span><a href="../../../rustc_index/bit_set/struct.BitSet.html">rustc_index::bit_set::BitSet</a>;
<span class="kw">use </span>rustc_infer::infer::type_variable::{<a href="../../../rustc_infer/infer/type_variable/struct.TypeVariableOrigin.html">TypeVariableOrigin</a>, <a href="../../../rustc_infer/infer/type_variable/enum.TypeVariableOriginKind.html">TypeVariableOriginKind</a>};
<span class="kw">use </span><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/query/struct.Providers.html">rustc_middle::ty::query::Providers</a>;
<span class="kw">use </span>rustc_middle::ty::subst::{<a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/subst/type.InternalSubsts.html">InternalSubsts</a>, <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/subst/trait.Subst.html">Subst</a>, <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/subst/type.SubstsRef.html">SubstsRef</a>};
<span class="kw">use </span>rustc_middle::ty::{<a class="self" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/index.html">self</a>, <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Ty.html">Ty</a>, <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/struct.TyCtxt.html">TyCtxt</a>, <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/enum.UserType.html">UserType</a>};
<span class="kw">use </span><a href="../../../rustc_session/config/index.html">rustc_session::config</a>;
<span class="kw">use </span><a href="../../../rustc_session/parse/fn.feature_err.html">rustc_session::parse::feature_err</a>;
<span class="kw">use </span><a href="../../../rustc_session/session/struct.Session.html">rustc_session::Session</a>;
<span class="kw">use </span><a href="../../../rustc_span/span_encoding/constant.DUMMY_SP.html">rustc_span::source_map::DUMMY_SP</a>;
<span class="kw">use </span>rustc_span::symbol::{<a href="../../../rustc_span/symbol/kw/index.html">kw</a>, <a href="../../../rustc_span/symbol/struct.Ident.html">Ident</a>};
<span class="kw">use </span>rustc_span::{<a class="self" href="../../../rustc_span/index.html">self</a>, BytePos, <a href="../../../rustc_span/span_encoding/struct.Span.html">Span</a>, <a href="../../../rustc_span/symbol/struct.Symbol.html">Symbol</a>};
<span class="kw">use </span><a href="../../../rustc_target/abi/struct.VariantIdx.html">rustc_target::abi::VariantIdx</a>;
<span class="kw">use </span><a href="../../../rustc_target/spec/abi/enum.Abi.html">rustc_target::spec::abi::Abi</a>;
<span class="kw">use </span><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_trait_selection/traits/index.html">rustc_trait_selection::traits</a>;
<span class="kw">use </span><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_trait_selection/traits/error_reporting/fn.recursive_type_with_infinite_size_error.html">rustc_trait_selection::traits::error_reporting::recursive_type_with_infinite_size_error</a>;
<span class="kw">use </span><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_trait_selection/traits/error_reporting/suggestions/struct.ReturnsVisitor.html">rustc_trait_selection::traits::error_reporting::suggestions::ReturnsVisitor</a>;
<span class="kw">use </span><a href="https://doc.rust-lang.org/nightly/core/cell/struct.RefCell.html">std::cell::RefCell</a>;
<span class="kw">use </span><a href="https://doc.rust-lang.org/nightly/core/num/nonzero/struct.NonZeroU32.html">std::num::NonZeroU32</a>;

<span class="kw">use </span><a href="../lib.rs.html#123"><span class="kw">crate</span>::require_c_abi_if_c_variadic</a>;
<span class="kw">use </span><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/util/common/fn.indenter.html"><span class="kw">crate</span>::util::common::indenter</a>;

<span class="kw">use </span><a href="coercion.rs.html#1287"><span class="self">self</span>::coercion::DynamicCoerceMany</a>;
<span class="kw">use </span><a href="compare_method.rs.html#437-440"><span class="self">self</span>::compare_method::collect_trait_impl_trait_tys</a>;
<span class="kw">use </span><a href="region.rs.html#826"><span class="self">self</span>::region::region_scope_tree</a>;
<span class="kw">pub use </span><a href="expectation.rs.html#11"><span class="self">self</span>::Expectation</a>::<span class="kw-2">*</span>;

<span class="attribute">#[macro_export]
</span><span class="macro">macro_rules! </span>type_error_struct {
    (<span class="macro-nonterminal">$session</span>:expr, <span class="macro-nonterminal">$span</span>:expr, <span class="macro-nonterminal">$typ</span>:expr, <span class="macro-nonterminal">$code</span>:ident, $(<span class="macro-nonterminal">$message</span>:tt)<span class="kw-2">*</span>) =&gt; ({
        <span class="kw">let </span><span class="kw-2">mut </span>err = <span class="macro">rustc_errors::struct_span_err!</span>(<span class="macro-nonterminal">$session</span>, <span class="macro-nonterminal">$span</span>, <span class="macro-nonterminal">$code</span>, $(<span class="macro-nonterminal">$message</span>)<span class="kw-2">*</span>);

        <span class="kw">if </span><span class="macro-nonterminal">$typ</span>.references_error() {
            err.downgrade_to_delayed_bug();
        }

        err
    })
}

<span class="doccomment">/// The type of a local binding, including the revealed type for anon types.
</span><span class="attribute">#[derive(Copy, Clone, Debug)]
</span><span class="kw">pub struct </span>LocalTy&lt;<span class="lifetime">&#39;tcx</span>&gt; {
    decl_ty: Ty&lt;<span class="lifetime">&#39;tcx</span>&gt;,
    revealed_ty: Ty&lt;<span class="lifetime">&#39;tcx</span>&gt;,
}

<span class="attribute">#[derive(Copy, Clone, Debug, PartialEq, Eq)]
</span><span class="kw">pub enum </span>Needs {
    MutPlace,
    <span class="prelude-val">None</span>,
}

<span class="kw">impl </span><a href="#160">Needs</a> {
    <span class="kw">fn </span>maybe_mut_place(m: <a href="../../../rustc_ast/ast/enum.Mutability.html">hir::Mutability</a>) -&gt; <span class="self">Self </span>{
        <span class="kw">match </span><a href="#166">m</a> {
            hir::Mutability::Mut =&gt; <a href="#161">Needs::MutPlace</a>,
            hir::Mutability::Not =&gt; <a href="#162">Needs::None</a>,
        }
    }
}

<span class="attribute">#[derive(Copy, Clone)]
</span><span class="kw">pub struct </span>UnsafetyState {
    <span class="kw">pub </span>def: <a href="../../../rustc_hir/hir_id/struct.HirId.html">hir::HirId</a>,
    <span class="kw">pub </span>unsafety: <a href="../../../rustc_hir/hir/enum.Unsafety.html">hir::Unsafety</a>,
    from_fn: <a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
}

<span class="kw">impl </span><a href="#175">UnsafetyState</a> {
    <span class="kw">pub fn </span>function(unsafety: <a href="../../../rustc_hir/hir/enum.Unsafety.html">hir::Unsafety</a>, def: <a href="../../../rustc_hir/hir_id/struct.HirId.html">hir::HirId</a>) -&gt; <a href="#175">UnsafetyState</a> {
        <a href="#175">UnsafetyState</a> { <a href="#182">def</a>, <a href="#182">unsafety</a>, from_fn: <span class="bool-val">true </span>}
    }

    <span class="kw">pub fn </span>recurse(<span class="self">self</span>, blk: <span class="kw-2">&amp;</span>hir::Block&lt;<span class="lifetime">&#39;_</span>&gt;) -&gt; <a href="#175">UnsafetyState</a> {
        <span class="kw">use </span><a href="../../../rustc_hir/hir/enum.BlockCheckMode.html">hir::BlockCheckMode</a>;
        <span class="kw">match </span><a class="self" href="#186">self</a>.unsafety {
            <span class="comment">// If this unsafe, then if the outer function was already marked as
            // unsafe we shouldn&#39;t attribute the unsafe&#39;ness to the block. This
            // way the block can be warned about instead of ignoring this
            // extraneous block (functions are never warned about).
            </span>hir::Unsafety::Unsafe <span class="kw">if </span><a class="self" href="#186">self</a>.from_fn =&gt; <a class="self" href="#186">self</a>,

            unsafety =&gt; {
                <span class="kw">let </span>(unsafety, def) = <span class="kw">match </span><a href="#186">blk</a>.rules {
                    BlockCheckMode::UnsafeBlock(..) =&gt; (hir::Unsafety::Unsafe, <a href="#186">blk</a>.hir_id),
                    BlockCheckMode::DefaultBlock =&gt; (<a href="#195">unsafety</a>, <a class="self" href="#186">self</a>.def),
                };
                <a href="#175">UnsafetyState</a> { <a href="#196">def</a>, <a href="#196">unsafety</a>, from_fn: <span class="bool-val">false </span>}
            }
        }
    }
}

<span class="attribute">#[derive(Debug, Copy, Clone)]
</span><span class="kw">pub enum </span>PlaceOp {
    Deref,
    Index,
}

<span class="kw">pub struct </span>BreakableCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt; {
    may_break: <a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,

    <span class="comment">// this is `null` for loops where break with a value is illegal,
    // such as `while`, `for`, and `while let`
    </span>coerce: <span class="prelude-ty">Option</span>&lt;DynamicCoerceMany&lt;<span class="lifetime">&#39;tcx</span>&gt;&gt;,
}

<span class="kw">pub struct </span>EnclosingBreakables&lt;<span class="lifetime">&#39;tcx</span>&gt; {
    stack: Vec&lt;BreakableCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt;&gt;,
    by_id: HirIdMap&lt;<a href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;,
}

<span class="kw">impl</span>&lt;<span class="lifetime">&#39;tcx</span>&gt; EnclosingBreakables&lt;<span class="lifetime">&#39;tcx</span>&gt; {
    <span class="kw">fn </span>find_breakable(<span class="kw-2">&amp;mut </span><span class="self">self</span>, target_id: <a href="../../../rustc_hir/hir_id/struct.HirId.html">hir::HirId</a>) -&gt; <span class="kw-2">&amp;mut </span>BreakableCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt; {
        <a class="self" href="#226">self</a>.<a href="#232">opt_find_breakable</a>(<a href="#226">target_id</a>).unwrap_or_else(|| {
            <a class="macro" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/macro.bug.html">bug!</a>(<span class="string">&quot;could not find enclosing breakable with id {}&quot;</span>, target_id);
        })
    }

    <span class="kw">fn </span>opt_find_breakable(<span class="kw-2">&amp;mut </span><span class="self">self</span>, target_id: <a href="../../../rustc_hir/hir_id/struct.HirId.html">hir::HirId</a>) -&gt; <span class="prelude-ty">Option</span>&lt;<span class="kw-2">&amp;mut </span>BreakableCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt;&gt; {
        <span class="kw">match </span><a class="self" href="#232">self</a>.by_id.get(<span class="kw-2">&amp;</span><a href="#232">target_id</a>) {
            <span class="prelude-val">Some</span>(ix) =&gt; <span class="prelude-val">Some</span>(<span class="kw-2">&amp;mut </span><a class="self" href="#232">self</a>.stack[<span class="kw-2">*</span><a href="#234">ix</a>]),
            <span class="prelude-val">None </span>=&gt; <span class="prelude-val">None</span>,
        }
    }
}

<span class="kw">pub fn </span>provide(providers: <span class="kw-2">&amp;mut </span><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/query/struct.Providers.html">Providers</a>) {
    <a href="method/mod.rs.html#31">method::provide</a>(<a href="#240">providers</a>);
    <a href="wfcheck.rs.html#1981">wfcheck::provide</a>(<a href="#240">providers</a>);
    <span class="kw-2">*</span><a href="#240">providers</a> = <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/query/struct.Providers.html">Providers</a> {
        <a href="#932">typeck_item_bodies</a>,
        <a href="#319-322">typeck_const_arg</a>,
        <a href="#327">typeck</a>,
        <a href="#338">diagnostic_only_typeck</a>,
        <a href="#299">has_typeck_results</a>,
        <a href="#258">adt_destructor</a>,
        <a href="#315">used_trait_imports</a>,
        <a href="check.rs.html#1659">check_mod_item_types</a>,
        <a href="region.rs.html#826">region_scope_tree</a>,
        <a href="compare_method.rs.html#437-440">collect_trait_impl_trait_tys</a>,
        ..<span class="kw-2">*</span><a href="#240">providers</a>
    };
}

<span class="kw">fn </span>adt_destructor(tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;, def_id: <a href="../../../rustc_span/def_id/struct.DefId.html">DefId</a>) -&gt; <span class="prelude-ty">Option</span>&lt;<a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/struct.Destructor.html">ty::Destructor</a>&gt; {
    <a href="#258">tcx</a>.calculate_dtor(<a href="#258">def_id</a>, <a href="dropck.rs.html#29">dropck::check_drop_impl</a>)
}

<span class="doccomment">/// If this `DefId` is a &quot;primary tables entry&quot;, returns
/// `Some((body_id, body_ty, fn_sig))`. Otherwise, returns `None`.
///
/// If this function returns `Some`, then `typeck_results(def_id)` will
/// succeed; if it returns `None`, then `typeck_results(def_id)` may or
/// may not succeed. In some cases where this function returns `None`
/// (notably closures), `typeck_results(def_id)` would wind up
/// redirecting to the owning function.
</span><span class="kw">fn </span>primary_body_of(
    tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;,
    id: <a href="../../../rustc_hir/hir_id/struct.HirId.html">hir::HirId</a>,
) -&gt; <span class="prelude-ty">Option</span>&lt;(<a href="../../../rustc_hir/hir/struct.BodyId.html">hir::BodyId</a>, <span class="prelude-ty">Option</span>&lt;<span class="kw-2">&amp;</span>hir::Ty&lt;<span class="lifetime">&#39;_</span>&gt;&gt;, <span class="prelude-ty">Option</span>&lt;<span class="kw-2">&amp;</span>hir::FnSig&lt;<span class="lifetime">&#39;_</span>&gt;&gt;)&gt; {
    <span class="kw">match </span><a href="#271">tcx</a>.hir().get(<a href="#272">id</a>) {
        Node::Item(item) =&gt; <span class="kw">match </span><a href="#275">item</a>.kind {
            hir::ItemKind::Const(ty, body) | hir::ItemKind::Static(ty, <span class="kw">_</span>, body) =&gt; {
                <span class="prelude-val">Some</span>((<a href="#276">body</a>, <span class="prelude-val">Some</span>(<a href="#276">ty</a>), <span class="prelude-val">None</span>))
            }
            hir::ItemKind::Fn(<span class="kw-2">ref </span>sig, .., body) =&gt; <span class="prelude-val">Some</span>((<a href="#279">body</a>, <span class="prelude-val">None</span>, <span class="prelude-val">Some</span>(<a href="#279">sig</a>))),
            <span class="kw">_ </span>=&gt; <span class="prelude-val">None</span>,
        },
        Node::TraitItem(item) =&gt; <span class="kw">match </span><a href="#282">item</a>.kind {
            hir::TraitItemKind::Const(ty, <span class="prelude-val">Some</span>(body)) =&gt; <span class="prelude-val">Some</span>((<a href="#283">body</a>, <span class="prelude-val">Some</span>(<a href="#283">ty</a>), <span class="prelude-val">None</span>)),
            hir::TraitItemKind::Fn(<span class="kw-2">ref </span>sig, hir::TraitFn::Provided(body)) =&gt; {
                <span class="prelude-val">Some</span>((<a href="#284">body</a>, <span class="prelude-val">None</span>, <span class="prelude-val">Some</span>(<a href="#284">sig</a>)))
            }
            <span class="kw">_ </span>=&gt; <span class="prelude-val">None</span>,
        },
        Node::ImplItem(item) =&gt; <span class="kw">match </span><a href="#289">item</a>.kind {
            hir::ImplItemKind::Const(ty, body) =&gt; <span class="prelude-val">Some</span>((<a href="#290">body</a>, <span class="prelude-val">Some</span>(<a href="#290">ty</a>), <span class="prelude-val">None</span>)),
            hir::ImplItemKind::Fn(<span class="kw-2">ref </span>sig, body) =&gt; <span class="prelude-val">Some</span>((<a href="#291">body</a>, <span class="prelude-val">None</span>, <span class="prelude-val">Some</span>(<a href="#291">sig</a>))),
            <span class="kw">_ </span>=&gt; <span class="prelude-val">None</span>,
        },
        Node::AnonConst(constant) =&gt; <span class="prelude-val">Some</span>((<a href="#294">constant</a>.body, <span class="prelude-val">None</span>, <span class="prelude-val">None</span>)),
        <span class="kw">_ </span>=&gt; <span class="prelude-val">None</span>,
    }
}

<span class="kw">fn </span>has_typeck_results(tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;, def_id: <a href="../../../rustc_span/def_id/struct.DefId.html">DefId</a>) -&gt; <a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> {
    <span class="comment">// Closures&#39; typeck results come from their outermost function,
    // as they are part of the same &quot;inference environment&quot;.
    </span><span class="kw">let </span>typeck_root_def_id = <a href="#299">tcx</a>.typeck_root_def_id(<a href="#299">def_id</a>);
    <span class="kw">if </span>typeck_root_def_id != def_id {
        <span class="kw">return </span><a href="#299">tcx</a>.has_typeck_results(<a href="#302">typeck_root_def_id</a>);
    }

    <span class="kw">if let </span><span class="prelude-val">Some</span>(def_id) = <a href="#299">def_id</a>.as_local() {
        <span class="kw">let </span>id = <a href="#299">tcx</a>.hir().local_def_id_to_hir_id(<a href="#307">def_id</a>);
        <a href="#270-273">primary_body_of</a>(<a href="#299">tcx</a>, <a href="#308">id</a>).is_some()
    } <span class="kw">else </span>{
        <span class="bool-val">false
    </span>}
}

<span class="kw">fn </span>used_trait_imports(tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;, def_id: <a href="../../../rustc_span/def_id/struct.LocalDefId.html">LocalDefId</a>) -&gt; <span class="kw-2">&amp;</span>FxHashSet&lt;<a href="../../../rustc_span/def_id/struct.LocalDefId.html">LocalDefId</a>&gt; {
    <span class="kw-2">&amp;*</span><a href="#315">tcx</a>.typeck(<a href="#315">def_id</a>).used_trait_imports
}

<span class="kw">fn </span>typeck_const_arg&lt;<span class="lifetime">&#39;tcx</span>&gt;(
    tcx: TyCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt;,
    (did, param_did): (<a href="../../../rustc_span/def_id/struct.LocalDefId.html">LocalDefId</a>, <a href="../../../rustc_span/def_id/struct.DefId.html">DefId</a>),
) -&gt; <span class="kw-2">&amp;</span>ty::TypeckResults&lt;<span class="lifetime">&#39;tcx</span>&gt; {
    <span class="kw">let </span>fallback = <span class="kw">move </span>|| <a href="#320">tcx</a>.type_of(<a href="#321">param_did</a>);
    <a href="#346-350">typeck_with_fallback</a>(<a href="#320">tcx</a>, <a href="#321">did</a>, <a href="#323">fallback</a>)
}

<span class="kw">fn </span>typeck&lt;<span class="lifetime">&#39;tcx</span>&gt;(tcx: TyCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt;, def_id: <a href="../../../rustc_span/def_id/struct.LocalDefId.html">LocalDefId</a>) -&gt; <span class="kw-2">&amp;</span>ty::TypeckResults&lt;<span class="lifetime">&#39;tcx</span>&gt; {
    <span class="kw">if let </span><span class="prelude-val">Some</span>(param_did) = <a href="#327">tcx</a>.opt_const_param_of(<a href="#327">def_id</a>) {
        <a href="#327">tcx</a>.typeck_const_arg((<a href="#327">def_id</a>, <a href="#328">param_did</a>))
    } <span class="kw">else </span>{
        <span class="kw">let </span>fallback = <span class="kw">move </span>|| <a href="#327">tcx</a>.type_of(<a href="#327">def_id</a>.to_def_id());
        <a href="#346-350">typeck_with_fallback</a>(<a href="#327">tcx</a>, <a href="#327">def_id</a>, <a href="#331">fallback</a>)
    }
}

<span class="doccomment">/// Used only to get `TypeckResults` for type inference during error recovery.
/// Currently only used for type inference of `static`s and `const`s to avoid type cycle errors.
</span><span class="kw">fn </span>diagnostic_only_typeck&lt;<span class="lifetime">&#39;tcx</span>&gt;(tcx: TyCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt;, def_id: <a href="../../../rustc_span/def_id/struct.LocalDefId.html">LocalDefId</a>) -&gt; <span class="kw-2">&amp;</span>ty::TypeckResults&lt;<span class="lifetime">&#39;tcx</span>&gt; {
    <span class="kw">let </span>fallback = <span class="kw">move </span>|| {
        <span class="kw">let </span>span = <a href="#338">tcx</a>.hir().span(<a href="#338">tcx</a>.hir().local_def_id_to_hir_id(<a href="#338">def_id</a>));
        <a href="#338">tcx</a>.ty_error_with_message(<a href="#340">span</a>, <span class="string">&quot;diagnostic only typeck table used&quot;</span>)
    };
    <a href="#346-350">typeck_with_fallback</a>(<a href="#338">tcx</a>, <a href="#338">def_id</a>, <a href="#339">fallback</a>)
}

<span class="kw">fn </span>typeck_with_fallback&lt;<span class="lifetime">&#39;tcx</span>&gt;(
    tcx: TyCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt;,
    def_id: <a href="../../../rustc_span/def_id/struct.LocalDefId.html">LocalDefId</a>,
    fallback: <span class="kw">impl </span>Fn() -&gt; Ty&lt;<span class="lifetime">&#39;tcx</span>&gt; + <span class="lifetime">&#39;tcx</span>,
) -&gt; <span class="kw-2">&amp;</span><span class="lifetime">&#39;tcx </span>ty::TypeckResults&lt;<span class="lifetime">&#39;tcx</span>&gt; {
    <span class="comment">// Closures&#39; typeck results come from their outermost function,
    // as they are part of the same &quot;inference environment&quot;.
    </span><span class="kw">let </span>typeck_root_def_id = <a href="#347">tcx</a>.typeck_root_def_id(<a href="#348">def_id</a>.to_def_id()).expect_local();
    <span class="kw">if </span>typeck_root_def_id != def_id {
        <span class="kw">return </span><a href="#347">tcx</a>.typeck(<a href="#353">typeck_root_def_id</a>);
    }

    <span class="kw">let </span>id = <a href="#347">tcx</a>.hir().local_def_id_to_hir_id(<a href="#348">def_id</a>);
    <span class="kw">let </span>span = <a href="#347">tcx</a>.hir().span(<a href="#358">id</a>);

    <span class="comment">// Figure out what primary body this item has.
    </span><span class="kw">let </span>(body_id, body_ty, fn_sig) = <a href="#270-273">primary_body_of</a>(<a href="#347">tcx</a>, <a href="#358">id</a>).unwrap_or_else(|| {
        <a class="macro" href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/macro.span_bug.html">span_bug!</a>(span, <span class="string">&quot;can&#39;t type-check body of {:?}&quot;</span>, def_id);
    });
    <span class="kw">let </span>body = <a href="#347">tcx</a>.hir().body(<a href="#362">body_id</a>);

    <span class="kw">let </span>typeck_results = Inherited::build(<a href="#347">tcx</a>, <a href="#348">def_id</a>).<a href="inherited.rs.html#125-127">enter</a>(|inh| {
        <span class="kw">let </span>param_env = <a href="#347">tcx</a>.param_env(<a href="#348">def_id</a>);
        <span class="kw">let </span>fcx = <span class="kw">if let </span><span class="prelude-val">Some</span>(<a href="../../../rustc_hir/hir/struct.FnSig.html">hir::FnSig</a> { header, decl, .. }) = <a href="#362">fn_sig</a> {
            <span class="kw">let </span>fn_sig = <span class="kw">if </span><span class="kw">crate</span>::collect::get_infer_ret_ty(<span class="kw-2">&amp;</span>decl.output).is_some() {
                <span class="kw">let </span>fcx = FnCtxt::new(<span class="kw-2">&amp;</span><a href="#367">inh</a>, <a href="#368">param_env</a>, <a href="#365">body</a>.value.hir_id);
                &lt;<span class="kw">dyn </span>AstConv&lt;<span class="lifetime">&#39;_</span>&gt;&gt;::ty_of_fn(<span class="kw-2">&amp;</span><a href="#371">fcx</a>, <a href="#358">id</a>, <a href="#369">header</a>.unsafety, <a href="#369">header</a>.abi, <a href="#369">decl</a>, <span class="prelude-val">None</span>, <span class="prelude-val">None</span>)
            } <span class="kw">else </span>{
                <a href="#347">tcx</a>.fn_sig(<a href="#348">def_id</a>)
            };

            <a href="check.rs.html#38">check_abi</a>(<a href="#347">tcx</a>, <a href="#358">id</a>, <a href="#359">span</a>, <a href="#370">fn_sig</a>.abi());

            <span class="comment">// Compute the function signature from point of view of inside the fn.
            </span><span class="kw">let </span>fn_sig = <a href="#347">tcx</a>.liberate_late_bound_regions(<a href="#348">def_id</a>.to_def_id(), <a href="#370">fn_sig</a>);
            <span class="kw">let </span>fn_sig = <a href="#367">inh</a>.<a href="inherited.rs.html#179-187">normalize_associated_types_in</a>(
                <a href="#365">body</a>.value.span,
                <a href="#362">body_id</a>.hir_id,
                <a href="#368">param_env</a>,
                <a href="#380">fn_sig</a>,
            );
            <a href="check.rs.html#76-85">check_fn</a>(<span class="kw-2">&amp;</span><a href="#367">inh</a>, <a href="#368">param_env</a>, <a href="#381">fn_sig</a>, <a href="#369">decl</a>, <a href="#358">id</a>, <a href="#365">body</a>, <span class="prelude-val">None</span>, <span class="bool-val">true</span>).<span class="number">0
        </span>} <span class="kw">else </span>{
            <span class="kw">let </span>fcx = FnCtxt::new(<span class="kw-2">&amp;</span><a href="#367">inh</a>, <a href="#368">param_env</a>, <a href="#365">body</a>.value.hir_id);
            <span class="kw">let </span>expected_type = <a href="#362">body_ty</a>
                .and_then(|ty| <span class="kw">match </span><a href="#391">ty</a>.kind {
                    hir::TyKind::Infer =&gt; <span class="prelude-val">Some</span>(&lt;<span class="kw">dyn </span>AstConv&lt;<span class="lifetime">&#39;_</span>&gt;&gt;::ast_ty_to_ty(<span class="kw-2">&amp;</span><a href="#389">fcx</a>, <a href="#391">ty</a>)),
                    <span class="kw">_ </span>=&gt; <span class="prelude-val">None</span>,
                })
                .unwrap_or_else(|| <span class="kw">match </span><a href="#347">tcx</a>.hir().get(<a href="#358">id</a>) {
                    Node::AnonConst(<span class="kw">_</span>) =&gt; <span class="kw">match </span><a href="#347">tcx</a>.hir().get(<a href="#347">tcx</a>.hir().get_parent_node(<a href="#358">id</a>)) {
                        Node::Expr(<span class="kw-2">&amp;</span><a href="../../../rustc_hir/hir/struct.Expr.html">hir::Expr</a> {
                            kind: hir::ExprKind::ConstBlock(<span class="kw-2">ref </span>anon_const),
                            ..
                        }) <span class="kw">if </span><a href="#398">anon_const</a>.hir_id == <a href="#358">id</a> =&gt; <a href="#389">fcx</a>.next_ty_var(<a href="../../../rustc_infer/infer/type_variable/struct.TypeVariableOrigin.html">TypeVariableOrigin</a> {
                            kind: TypeVariableOriginKind::TypeInference,
                            <a href="#359">span</a>,
                        }),
                        Node::Ty(<span class="kw-2">&amp;</span><a href="../../../rustc_hir/hir/struct.Ty.html">hir::Ty</a> {
                            kind: hir::TyKind::Typeof(<span class="kw-2">ref </span>anon_const), ..
                        }) <span class="kw">if </span><a href="#405">anon_const</a>.hir_id == <a href="#358">id</a> =&gt; <a href="#389">fcx</a>.next_ty_var(<a href="../../../rustc_infer/infer/type_variable/struct.TypeVariableOrigin.html">TypeVariableOrigin</a> {
                            kind: TypeVariableOriginKind::TypeInference,
                            <a href="#359">span</a>,
                        }),
                        Node::Expr(<span class="kw-2">&amp;</span><a href="../../../rustc_hir/hir/struct.Expr.html">hir::Expr</a> { kind: hir::ExprKind::InlineAsm(asm), .. })
                        | Node::Item(<span class="kw-2">&amp;</span><a href="../../../rustc_hir/hir/struct.Item.html">hir::Item</a> { kind: hir::ItemKind::GlobalAsm(asm), .. }) =&gt; {
                            <span class="kw">let </span>operand_ty = <a href="#410">asm</a>
                                .operands
                                .iter()
                                .<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">filter_map</a>(|(op, _op_sp)| <span class="kw">match </span><a href="#415">op</a> {
                                    <a href="../../../rustc_hir/hir/enum.InlineAsmOperand.html">hir::InlineAsmOperand::Const</a> { anon_const }
                                        <span class="kw">if </span><a href="#416">anon_const</a>.hir_id == <a href="#358">id</a> =&gt;
                                    {
                                        <span class="comment">// Inline assembly constants must be integers.
                                        </span><span class="prelude-val">Some</span>(<a href="#389">fcx</a>.next_int_var())
                                    }
                                    <a href="../../../rustc_hir/hir/enum.InlineAsmOperand.html">hir::InlineAsmOperand::SymFn</a> { anon_const }
                                        <span class="kw">if </span><a href="#422">anon_const</a>.hir_id == <a href="#358">id</a> =&gt;
                                    {
                                        <span class="prelude-val">Some</span>(<a href="#389">fcx</a>.next_ty_var(<a href="../../../rustc_infer/infer/type_variable/struct.TypeVariableOrigin.html">TypeVariableOrigin</a> {
                                            kind: TypeVariableOriginKind::MiscVariable,
                                            <a href="#359">span</a>,
                                        }))
                                    }
                                    <span class="kw">_ </span>=&gt; <span class="prelude-val">None</span>,
                                })
                                .<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">next</a>();
                            <a href="#412">operand_ty</a>.unwrap_or_else(<a href="#349">fallback</a>)
                        }
                        <span class="kw">_ </span>=&gt; <a href="#349">fallback</a>(),
                    },
                    <span class="kw">_ </span>=&gt; <a href="#349">fallback</a>(),
                });

            <span class="kw">let </span>expected_type = <a href="#389">fcx</a>.<a href="fn_ctxt/_impl.rs.html#373-375">normalize_associated_types_in</a>(<a href="#365">body</a>.value.span, <a href="#390">expected_type</a>);
            <a href="#389">fcx</a>.<a href="fn_ctxt/_impl.rs.html#430-435">require_type_is_sized</a>(<a href="#440">expected_type</a>, <a href="#365">body</a>.value.span, traits::ConstSized);

            <span class="comment">// Gather locals in statics (because of block expressions).
            </span>GatherLocalsVisitor::new(<span class="kw-2">&amp;</span><a href="#389">fcx</a>).<a href="../../../rustc_hir/intravisit/trait.Visitor.html">visit_body</a>(<a href="#365">body</a>);

            <a href="#389">fcx</a>.<a href="expr.rs.html#112-117">check_expr_coercable_to_type</a>(<span class="kw-2">&amp;</span><a href="#365">body</a>.value, <a href="#440">expected_type</a>, <span class="prelude-val">None</span>);

            <a href="#389">fcx</a>.<a href="fn_ctxt/_impl.rs.html#141">write_ty</a>(<a href="#358">id</a>, <a href="#440">expected_type</a>);

            <a href="#389">fcx</a>
        };

        <span class="kw">let </span>fallback_has_occurred = <a href="#369">fcx</a>.<a href="fallback.rs.html#12">type_inference_fallback</a>();

        <span class="comment">// Even though coercion casts provide type hints, we check casts after fallback for
        // backwards compatibility. This makes fallback a stronger type hint than a cast coercion.
        </span><a href="#369">fcx</a>.<a href="fn_ctxt/checks.rs.html#42">check_casts</a>();
        <a href="#369">fcx</a>.<a href="fn_ctxt/_impl.rs.html#624-628">select_obligations_where_possible</a>(<a href="#453">fallback_has_occurred</a>, |<span class="kw">_</span>| {});

        <span class="comment">// Closure and generator analysis may run after fallback
        // because they don&#39;t constrain other type variables.
        </span><a href="#369">fcx</a>.<a href="upvar.rs.html#75">closure_analyze</a>(<a href="#365">body</a>);
        <a class="macro" href="https://doc.rust-lang.org/nightly/core/macro.assert.html">assert!</a>(fcx.deferred_call_resolutions.borrow().is_empty());
        <span class="comment">// Before the generator analysis, temporary scopes shall be marked to provide more
        // precise information on types to be captured.
        </span><a href="#369">fcx</a>.<a href="fn_ctxt/_impl.rs.html#596">resolve_rvalue_scopes</a>(<a href="#348">def_id</a>.to_def_id());
        <a href="#369">fcx</a>.<a href="fn_ctxt/_impl.rs.html#603">resolve_generator_interiors</a>(<a href="#348">def_id</a>.to_def_id());

        <span class="kw">for </span>(ty, span, code) <span class="kw">in </span>fcx.deferred_sized_obligations.borrow_mut().drain(..) {
            <span class="kw">let </span>ty = fcx.normalize_ty(span, ty);
            fcx.require_type_is_sized(ty, span, code);
        }

        <a href="#369">fcx</a>.<a href="fn_ctxt/_impl.rs.html#613">select_all_obligations_or_error</a>();

        <span class="kw">if </span>!fcx.infcx.is_tainted_by_errors() {
            <a href="#369">fcx</a>.<a href="fn_ctxt/checks.rs.html#50">check_transmutes</a>();
        }

        <a href="#369">fcx</a>.<a href="fn_ctxt/checks.rs.html#58">check_asms</a>();

        <a href="#369">fcx</a>.infcx.skip_region_resolution();

        <a href="#369">fcx</a>.<a href="writeback.rs.html#39-42">resolve_type_vars_in_body</a>(<a href="#365">body</a>)
    });

    <span class="comment">// Consistency check our TypeckResults instance can hold all ItemLocalIds
    // it will need to hold.
    </span><a class="macro" href="https://doc.rust-lang.org/nightly/core/macro.assert_eq.html">assert_eq!</a>(typeck_results.hir_owner, id.owner);

    <a href="#367">typeck_results</a>
}

<span class="doccomment">/// When `check_fn` is invoked on a generator (i.e., a body that
/// includes yield), it returns back some information about the yield
/// points.
</span><span class="kw">struct </span>GeneratorTypes&lt;<span class="lifetime">&#39;tcx</span>&gt; {
    <span class="doccomment">/// Type of generator argument / values returned by `yield`.
    </span>resume_ty: Ty&lt;<span class="lifetime">&#39;tcx</span>&gt;,

    <span class="doccomment">/// Type of value that is yielded.
    </span>yield_ty: Ty&lt;<span class="lifetime">&#39;tcx</span>&gt;,

    <span class="doccomment">/// Types that are captured (see `GeneratorInterior` for more).
    </span>interior: Ty&lt;<span class="lifetime">&#39;tcx</span>&gt;,

    <span class="doccomment">/// Indicates if the generator is movable or static (immovable).
    </span>movability: <a href="../../../rustc_ast/ast/enum.Movability.html">hir::Movability</a>,
}

<span class="doccomment">/// Given a `DefId` for an opaque type in return position, find its parent item&#39;s return
/// expressions.
</span><span class="kw">fn </span>get_owner_return_paths&lt;<span class="lifetime">&#39;tcx</span>&gt;(
    tcx: TyCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt;,
    def_id: <a href="../../../rustc_span/def_id/struct.LocalDefId.html">LocalDefId</a>,
) -&gt; <span class="prelude-ty">Option</span>&lt;(<a href="../../../rustc_span/def_id/struct.LocalDefId.html">LocalDefId</a>, ReturnsVisitor&lt;<span class="lifetime">&#39;tcx</span>&gt;)&gt; {
    <span class="kw">let </span>hir_id = <a href="#514">tcx</a>.hir().local_def_id_to_hir_id(<a href="#515">def_id</a>);
    <span class="kw">let </span>parent_id = <a href="#514">tcx</a>.hir().get_parent_item(<a href="#517">hir_id</a>);
    <a href="#514">tcx</a>.hir().find_by_def_id(<a href="#518">parent_id</a>).and_then(|node| <a href="#519">node</a>.body_id()).map(|body_id| {
        <span class="kw">let </span>body = <a href="#514">tcx</a>.hir().body(<a href="#519">body_id</a>);
        <span class="kw">let </span><span class="kw-2">mut </span>visitor = ReturnsVisitor::default();
        <a href="#521">visitor</a>.<a href="../../../rustc_hir/intravisit/trait.Visitor.html">visit_body</a>(<a href="#520">body</a>);
        (<a href="#518">parent_id</a>, <a href="#521">visitor</a>)
    })
}

<span class="comment">// Forbid defining intrinsics in Rust code,
// as they must always be defined by the compiler.
</span><span class="kw">fn </span>fn_maybe_err(tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;, sp: <a href="../../../rustc_span/span_encoding/struct.Span.html">Span</a>, abi: <a href="../../../rustc_target/spec/abi/enum.Abi.html">Abi</a>) {
    <span class="kw">if let </span>Abi::RustIntrinsic | Abi::PlatformIntrinsic = <a href="#529">abi</a> {
        <a href="#529">tcx</a>.sess.span_err(<a href="#529">sp</a>, <span class="string">&quot;intrinsic must be in `extern \&quot;rust-intrinsic\&quot; { ... }` block&quot;</span>);
    }
}

<span class="kw">fn </span>maybe_check_static_with_link_section(tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;, id: <a href="../../../rustc_span/def_id/struct.LocalDefId.html">LocalDefId</a>) {
    <span class="comment">// Only restricted on wasm target for now
    </span><span class="kw">if </span>!tcx.sess.target.is_like_wasm {
        <span class="kw">return</span>;
    }

    <span class="comment">// If `#[link_section]` is missing, then nothing to verify
    </span><span class="kw">let </span>attrs = <a href="#535">tcx</a>.codegen_fn_attrs(<a href="#535">id</a>);
    <span class="kw">if </span>attrs.link_section.is_none() {
        <span class="kw">return</span>;
    }

    <span class="comment">// For the wasm32 target statics with `#[link_section]` are placed into custom
    // sections of the final output file, but this isn&#39;t link custom sections of
    // other executable formats. Namely we can only embed a list of bytes,
    // nothing with provenance (pointers to anything else). If any provenance
    // show up, reject it here.
    // `#[link_section]` may contain arbitrary, or even undefined bytes, but it is
    // the consumer&#39;s responsibility to ensure all bytes that have been read
    // have defined values.
    </span><span class="kw">if let </span><span class="prelude-val">Ok</span>(alloc) = <a href="#535">tcx</a>.eval_static_initializer(<a href="#535">id</a>.to_def_id())
        &amp;&amp; <a href="#555">alloc</a>.inner().provenance().len() != <span class="number">0
    </span>{
        <span class="kw">let </span>msg = <span class="string">&quot;statics with a custom `#[link_section]` must be a \
                        simple list of bytes on the wasm target with no \
                        extra levels of indirection such as references&quot;</span>;
        <a href="#535">tcx</a>.sess.span_err(<a href="#535">tcx</a>.def_span(<a href="#535">id</a>), <a href="#558">msg</a>);
    }
}

<span class="kw">fn </span>report_forbidden_specialization(
    tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;,
    impl_item: <span class="kw-2">&amp;</span><a href="../../../rustc_hir/hir/struct.ImplItemRef.html">hir::ImplItemRef</a>,
    parent_impl: <a href="../../../rustc_span/def_id/struct.DefId.html">DefId</a>,
) {
    <span class="kw">let </span><span class="kw-2">mut </span>err = <a class="macro" href="../../../rustc_errors/macro.struct_span_err.html">struct_span_err!</a>(
        tcx.sess,
        impl_item.span,
        E0520,
        <span class="string">&quot;`{}` specializes an item from a parent `impl`, but \
         that item is not marked `default`&quot;</span>,
        impl_item.ident
    );
    <a href="#570">err</a>.span_label(<a href="#567">impl_item</a>.span, <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;cannot specialize default item `{}`&quot;</span>, impl_item.ident));

    <span class="kw">match </span><a href="#566">tcx</a>.span_of_impl(<a href="#568">parent_impl</a>) {
        <span class="prelude-val">Ok</span>(span) =&gt; {
            <a href="#570">err</a>.span_label(<a href="#581">span</a>, <span class="string">&quot;parent `impl` is here&quot;</span>);
            <a href="#570">err</a>.note(<span class="kw-2">&amp;</span><a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(
                <span class="string">&quot;to specialize, `{}` in the parent `impl` must be marked `default`&quot;</span>,
                impl_item.ident
            ));
        }
        <span class="prelude-val">Err</span>(cname) =&gt; {
            <a href="#570">err</a>.note(<span class="kw-2">&amp;</span><a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;parent implementation is in crate `{cname}`&quot;</span>));
        }
    }

    <a href="#570">err</a>.emit();
}

<span class="kw">fn </span>missing_items_err(
    tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;,
    impl_span: <a href="../../../rustc_span/span_encoding/struct.Span.html">Span</a>,
    missing_items: <span class="kw-2">&amp;</span>[<span class="kw-2">&amp;</span><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/assoc/struct.AssocItem.html">ty::AssocItem</a>],
    full_impl_span: <a href="../../../rustc_span/span_encoding/struct.Span.html">Span</a>,
) {
    <span class="kw">let </span>missing_items_msg = <a href="#599">missing_items</a>
        .iter()
        .<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">map</a>(|trait_item| <a href="#604">trait_item</a>.name.<a href="https://doc.rust-lang.org/nightly/alloc/string/trait.ToString.html">to_string</a>())
        .<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">collect</a>::&lt;Vec&lt;<span class="kw">_</span>&gt;&gt;()
        .join(<span class="string">&quot;`, `&quot;</span>);

    <span class="kw">let </span><span class="kw-2">mut </span>err = <a class="macro" href="../../../rustc_errors/macro.struct_span_err.html">struct_span_err!</a>(
        tcx.sess,
        impl_span,
        E0046,
        <span class="string">&quot;not all trait items implemented, missing: `{missing_items_msg}`&quot;</span>,
    );
    <a href="#608">err</a>.span_label(<a href="#598">impl_span</a>, <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;missing `{missing_items_msg}` in implementation&quot;</span>));

    <span class="comment">// `Span` before impl block closing brace.
    </span><span class="kw">let </span>hi = <a href="#600">full_impl_span</a>.hi() - BytePos(<span class="number">1</span>);
    <span class="comment">// Point at the place right before the closing brace of the relevant `impl` to suggest
    // adding the associated item at the end of its body.
    </span><span class="kw">let </span>sugg_sp = <a href="#600">full_impl_span</a>.with_lo(<a href="#617">hi</a>).with_hi(<a href="#617">hi</a>);
    <span class="comment">// Obtain the level of indentation ending in `sugg_sp`.
    </span><span class="kw">let </span>padding =
        <a href="#597">tcx</a>.sess.source_map().indentation_before(<a href="#620">sugg_sp</a>).unwrap_or_else(|| String::new());

    <span class="kw">for </span>trait_item <span class="kw">in </span>missing_items {
        <span class="kw">let </span>snippet = suggestion_signature(trait_item, tcx);
        <span class="kw">let </span>code = <span class="macro">format!</span>(<span class="string">&quot;{}{}\n{}&quot;</span>, padding, snippet, padding);
        <span class="kw">let </span>msg = <span class="macro">format!</span>(<span class="string">&quot;implement the missing item: `{snippet}`&quot;</span>);
        <span class="kw">let </span>appl = Applicability::HasPlaceholders;
        <span class="kw">if let </span><span class="prelude-val">Some</span>(span) = tcx.hir().span_if_local(trait_item.def_id) {
            err.span_label(span, <span class="macro">format!</span>(<span class="string">&quot;`{}` from trait&quot;</span>, trait_item.name));
            err.tool_only_span_suggestion(sugg_sp, <span class="kw-2">&amp;</span>msg, code, appl);
        } <span class="kw">else </span>{
            err.span_suggestion_hidden(sugg_sp, <span class="kw-2">&amp;</span>msg, code, appl);
        }
    }
    <a href="#608">err</a>.emit();
}

<span class="kw">fn </span>missing_items_must_implement_one_of_err(
    tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;,
    impl_span: <a href="../../../rustc_span/span_encoding/struct.Span.html">Span</a>,
    missing_items: <span class="kw-2">&amp;</span>[<a href="../../../rustc_span/symbol/struct.Ident.html">Ident</a>],
    annotation_span: <span class="prelude-ty">Option</span>&lt;<a href="../../../rustc_span/span_encoding/struct.Span.html">Span</a>&gt;,
) {
    <span class="kw">let </span>missing_items_msg =
        <a href="#643">missing_items</a>.iter().<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">map</a>(Ident::to_string).<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">collect</a>::&lt;Vec&lt;<span class="kw">_</span>&gt;&gt;().join(<span class="string">&quot;`, `&quot;</span>);

    <span class="kw">let </span><span class="kw-2">mut </span>err = <a class="macro" href="../../../rustc_errors/macro.struct_span_err.html">struct_span_err!</a>(
        tcx.sess,
        impl_span,
        E0046,
        <span class="string">&quot;not all trait items implemented, missing one of: `{missing_items_msg}`&quot;</span>,
    );
    <a href="#649">err</a>.span_label(<a href="#642">impl_span</a>, <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;missing one of `{missing_items_msg}` in implementation&quot;</span>));

    <span class="kw">if let </span><span class="prelude-val">Some</span>(annotation_span) = <a href="#644">annotation_span</a> {
        <a href="#649">err</a>.span_note(<a href="#657">annotation_span</a>, <span class="string">&quot;required because of this annotation&quot;</span>);
    }

    <a href="#649">err</a>.emit();
}

<span class="kw">fn </span>default_body_is_unstable(
    tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;,
    impl_span: <a href="../../../rustc_span/span_encoding/struct.Span.html">Span</a>,
    item_did: <a href="../../../rustc_span/def_id/struct.DefId.html">DefId</a>,
    feature: <a href="../../../rustc_span/symbol/struct.Symbol.html">Symbol</a>,
    reason: <span class="prelude-ty">Option</span>&lt;<a href="../../../rustc_span/symbol/struct.Symbol.html">Symbol</a>&gt;,
    issue: <span class="prelude-ty">Option</span>&lt;<a href="https://doc.rust-lang.org/nightly/core/num/nonzero/struct.NonZeroU32.html">NonZeroU32</a>&gt;,
) {
    <span class="kw">let </span>missing_item_name = <span class="kw-2">&amp;</span><a href="#665">tcx</a>.associated_item(<a href="#667">item_did</a>).name;
    <span class="kw">let </span>use_of_unstable_library_feature_note = <span class="kw">match </span><a href="#669">reason</a> {
        <span class="prelude-val">Some</span>(r) =&gt; <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;use of unstable library feature &#39;{feature}&#39;: {r}&quot;</span>),
        <span class="prelude-val">None </span>=&gt; <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;use of unstable library feature &#39;{feature}&#39;&quot;</span>),
    };

    <span class="kw">let </span><span class="kw-2">mut </span>err = <a class="macro" href="../../../rustc_errors/macro.struct_span_err.html">struct_span_err!</a>(
        tcx.sess,
        impl_span,
        E0046,
        <span class="string">&quot;not all trait items implemented, missing: `{missing_item_name}`&quot;</span>,
    );
    <a href="#678">err</a>.note(<a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;default implementation of `{missing_item_name}` is unstable&quot;</span>));
    <a href="#678">err</a>.note(<a href="#673">use_of_unstable_library_feature_note</a>);
    rustc_session::parse::add_feature_diagnostics_for_issue(
        <span class="kw-2">&amp;mut </span><a href="#678">err</a>,
        <span class="kw-2">&amp;</span><a href="#665">tcx</a>.sess.parse_sess,
        <a href="#668">feature</a>,
        rustc_feature::GateIssue::Library(<a href="#670">issue</a>),
    );
    <a href="#678">err</a>.emit();
}

<span class="doccomment">/// Re-sugar `ty::GenericPredicates` in a way suitable to be used in structured suggestions.
</span><span class="kw">fn </span>bounds_from_generic_predicates&lt;<span class="lifetime">&#39;tcx</span>&gt;(
    tcx: TyCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt;,
    predicates: ty::GenericPredicates&lt;<span class="lifetime">&#39;tcx</span>&gt;,
) -&gt; (<a href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html">String</a>, <a href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html">String</a>) {
    <span class="kw">let </span><span class="kw-2">mut </span>types: FxHashMap&lt;Ty&lt;<span class="lifetime">&#39;tcx</span>&gt;, Vec&lt;<a href="../../../rustc_span/def_id/struct.DefId.html">DefId</a>&gt;&gt; = FxHashMap::default();
    <span class="kw">let </span><span class="kw-2">mut </span>projections = <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.vec.html">vec!</a>[];
    <span class="kw">for </span>(predicate, <span class="kw">_</span>) <span class="kw">in </span>predicates.predicates {
        <span class="macro">debug!</span>(<span class="string">&quot;predicate {:?}&quot;</span>, predicate);
        <span class="kw">let </span>bound_predicate = predicate.kind();
        <span class="kw">match </span>bound_predicate.skip_binder() {
            ty::PredicateKind::Trait(trait_predicate) =&gt; {
                <span class="kw">let </span>entry = types.entry(trait_predicate.self_ty()).or_default();
                <span class="kw">let </span>def_id = trait_predicate.def_id();
                <span class="kw">if </span><span class="prelude-val">Some</span>(def_id) != tcx.lang_items().sized_trait() {
                    <span class="comment">// Type params are `Sized` by default, do not add that restriction to the list
                    // if it is a positive requirement.
                    </span>entry.push(trait_predicate.def_id());
                }
            }
            ty::PredicateKind::Projection(projection_pred) =&gt; {
                projections.push(bound_predicate.rebind(projection_pred));
            }
            <span class="kw">_ </span>=&gt; {}
        }
    }
    <span class="kw">let </span>generics = <span class="kw">if </span>types.is_empty() {
        <span class="string">&quot;&quot;</span>.<a href="https://doc.rust-lang.org/nightly/alloc/string/trait.ToString.html">to_string</a>()
    } <span class="kw">else </span>{
        <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(
            <span class="string">&quot;&lt;{}&gt;&quot;</span>,
            types
                .keys()
                .filter_map(|t| <span class="kw">match </span>t.kind() {
                    ty::Param(<span class="kw">_</span>) =&gt; <span class="prelude-val">Some</span>(t.to_string()),
                    <span class="comment">// Avoid suggesting the following:
                    // fn foo&lt;T, &lt;T as Trait&gt;::Bar&gt;(_: T) where T: Trait, &lt;T as Trait&gt;::Bar: Other {}
                    </span><span class="kw">_ </span>=&gt; <span class="prelude-val">None</span>,
                })
                .collect::&lt;Vec&lt;<span class="kw">_</span>&gt;&gt;()
                .join(<span class="string">&quot;, &quot;</span>)
        )
    };
    <span class="kw">let </span><span class="kw-2">mut </span>where_clauses = <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.vec.html">vec!</a>[];
    <span class="kw">for </span>(ty, bounds) <span class="kw">in </span>types {
        where_clauses
            .extend(bounds.into_iter().map(|bound| <span class="macro">format!</span>(<span class="string">&quot;{}: {}&quot;</span>, ty, tcx.def_path_str(bound))));
    }
    <span class="kw">for </span>projection <span class="kw">in </span><span class="kw-2">&amp;</span>projections {
        <span class="kw">let </span>p = projection.skip_binder();
        <span class="comment">// FIXME: this is not currently supported syntax, we should be looking at the `types` and
        // insert the associated types where they correspond, but for now let&#39;s be &quot;lazy&quot; and
        // propose this instead of the following valid resugaring:
        // `T: Trait, Trait::Assoc = K` → `T: Trait&lt;Assoc = K&gt;`
        </span>where_clauses.push(<span class="macro">format!</span>(
            <span class="string">&quot;{} = {}&quot;</span>,
            tcx.def_path_str(p.projection_ty.item_def_id),
            p.term,
        ));
    }
    <span class="kw">let </span>where_clauses = <span class="kw">if </span>where_clauses.is_empty() {
        String::new()
    } <span class="kw">else </span>{
        <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot; where {}&quot;</span>, where_clauses.join(<span class="string">&quot;, &quot;</span>))
    };
    (<a href="#721">generics</a>, <a href="#755">where_clauses</a>)
}

<span class="doccomment">/// Return placeholder code for the given function.
</span><span class="kw">fn </span>fn_sig_suggestion&lt;<span class="lifetime">&#39;tcx</span>&gt;(
    tcx: TyCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt;,
    sig: ty::FnSig&lt;<span class="lifetime">&#39;tcx</span>&gt;,
    ident: <a href="../../../rustc_span/symbol/struct.Ident.html">Ident</a>,
    predicates: ty::GenericPredicates&lt;<span class="lifetime">&#39;tcx</span>&gt;,
    assoc: <span class="kw-2">&amp;</span><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/assoc/struct.AssocItem.html">ty::AssocItem</a>,
) -&gt; <a href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html">String</a> {
    <span class="kw">let </span>args = <a href="#766">sig</a>
        .inputs()
        .iter()
        .<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">enumerate</a>()
        .<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">map</a>(|(i, ty)| {
            <span class="prelude-val">Some</span>(<span class="kw">match </span><a href="#775">ty</a>.kind() {
                ty::Param(<span class="kw">_</span>) <span class="kw">if </span><a href="#769">assoc</a>.fn_has_self_parameter &amp;&amp; <a href="#775">i</a> == <span class="number">0 </span>=&gt; <span class="string">&quot;self&quot;</span>.<a href="https://doc.rust-lang.org/nightly/alloc/string/trait.ToString.html">to_string</a>(),
                ty::Ref(reg, ref_ty, mutability) <span class="kw">if </span><a href="#775">i</a> == <span class="number">0 </span>=&gt; {
                    <span class="kw">let </span>reg = <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;{reg} &quot;</span>);
                    <span class="kw">let </span>reg = <span class="kw">match </span><span class="kw-2">&amp;</span><a href="#779">reg</a>[..] {
                        <span class="string">&quot;&#39;_ &quot; </span>| <span class="string">&quot; &quot; </span>=&gt; <span class="string">&quot;&quot;</span>,
                        reg =&gt; <a href="#782">reg</a>,
                    };
                    <span class="kw">if </span>assoc.fn_has_self_parameter {
                        <span class="kw">match </span><a href="#778">ref_ty</a>.kind() {
                            ty::Param(param) <span class="kw">if </span><a href="#786">param</a>.name == kw::SelfUpper =&gt; {
                                <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;&amp;{}{}self&quot;</span>, reg, mutability.prefix_str())
                            }

                            <span class="kw">_ </span>=&gt; <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;self: {ty}&quot;</span>),
                        }
                    } <span class="kw">else </span>{
                        <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;_: {ty}&quot;</span>)
                    }
                }
                <span class="kw">_ </span>=&gt; {
                    <span class="kw">if </span>assoc.fn_has_self_parameter &amp;&amp; i == <span class="number">0 </span>{
                        <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;self: {ty}&quot;</span>)
                    } <span class="kw">else </span>{
                        <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;_: {ty}&quot;</span>)
                    }
                }
            })
        })
        .<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">chain</a>(<a href="https://doc.rust-lang.org/nightly/core/iter/sources/once/fn.once.html">std::iter::once</a>(<span class="kw">if </span>sig.c_variadic { <span class="prelude-val">Some</span>(<span class="string">&quot;...&quot;</span>.<a href="https://doc.rust-lang.org/nightly/alloc/string/trait.ToString.html">to_string</a>()) } <span class="kw">else </span>{ <span class="prelude-val">None </span>}))
        .<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">flatten</a>()
        .<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">collect</a>::&lt;Vec&lt;<a href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html">String</a>&gt;&gt;()
        .join(<span class="string">&quot;, &quot;</span>);
    <span class="kw">let </span>output = <a href="#766">sig</a>.output();
    <span class="kw">let </span>output = <span class="kw">if </span>!output.is_unit() { <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot; -&gt; {output}&quot;</span>) } <span class="kw">else </span>{ String::new() };

    <span class="kw">let </span>unsafety = <a href="#766">sig</a>.unsafety.prefix_str();
    <span class="kw">let </span>(generics, where_clauses) = <a href="#696-699">bounds_from_generic_predicates</a>(<a href="#765">tcx</a>, <a href="#768">predicates</a>);

    <span class="comment">// FIXME: this is not entirely correct, as the lifetimes from borrowed params will
    // not be present in the `fn` definition, not will we account for renamed
    // lifetimes between the `impl` and the `trait`, but this should be good enough to
    // fill in a significant portion of the missing code, and other subsequent
    // suggestions can help the user fix the code.
    </span><a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;{unsafety}fn {ident}{generics}({args}){output}{where_clauses} {{ todo!() }}&quot;</span>)
}

<span class="doccomment">/// Return placeholder code for the given associated item.
/// Similar to `ty::AssocItem::suggestion`, but appropriate for use as the code snippet of a
/// structured suggestion.
</span><span class="kw">fn </span>suggestion_signature(assoc: <span class="kw-2">&amp;</span><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/assoc/struct.AssocItem.html">ty::AssocItem</a>, tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;) -&gt; <a href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html">String</a> {
    <span class="kw">match </span><a href="#826">assoc</a>.kind {
        ty::AssocKind::Fn =&gt; {
            <span class="comment">// We skip the binder here because the binder would deanonymize all
            // late-bound regions, and we don&#39;t want method signatures to show up
            // `as for&lt;&#39;r&gt; fn(&amp;&#39;r MyType)`.  Pretty-printing handles late-bound
            // regions just fine, showing `fn(&amp;MyType)`.
            </span><a href="#764-770">fn_sig_suggestion</a>(
                <a href="#826">tcx</a>,
                <a href="#826">tcx</a>.fn_sig(<a href="#826">assoc</a>.def_id).skip_binder(),
                <a href="#826">assoc</a>.ident(<a href="#826">tcx</a>),
                <a href="#826">tcx</a>.predicates_of(<a href="#826">assoc</a>.def_id),
                <a href="#826">assoc</a>,
            )
        }
        ty::AssocKind::Type =&gt; <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;type {} = Type;&quot;</span>, assoc.name),
        ty::AssocKind::Const =&gt; {
            <span class="kw">let </span>ty = <a href="#826">tcx</a>.type_of(<a href="#826">assoc</a>.def_id);
            <span class="kw">let </span>val = <a href="expr.rs.html#2867">expr::ty_kind_suggestion</a>(<a href="#843">ty</a>).unwrap_or(<span class="string">&quot;value&quot;</span>);
            <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;const {}: {} = {};&quot;</span>, assoc.name, ty, val)
        }
    }
}

<span class="doccomment">/// Emit an error when encountering two or more variants in a transparent enum.
</span><span class="kw">fn </span>bad_variant_count&lt;<span class="lifetime">&#39;tcx</span>&gt;(tcx: TyCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt;, adt: ty::AdtDef&lt;<span class="lifetime">&#39;tcx</span>&gt;, sp: <a href="../../../rustc_span/span_encoding/struct.Span.html">Span</a>, did: <a href="../../../rustc_span/def_id/struct.DefId.html">DefId</a>) {
    <span class="kw">let </span>variant_spans: Vec&lt;<span class="kw">_</span>&gt; = <a href="#851">adt</a>
        .variants()
        .iter()
        .<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">map</a>(|variant| <a href="#851">tcx</a>.hir().span_if_local(<a href="#855">variant</a>.def_id).unwrap())
        .<a href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html">collect</a>();
    <span class="kw">let </span>msg = <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;needs exactly one variant, but has {}&quot;</span>, adt.variants().len(),);
    <span class="kw">let </span><span class="kw-2">mut </span>err = <a class="macro" href="../../../rustc_errors/macro.struct_span_err.html">struct_span_err!</a>(tcx.sess, sp, E0731, <span class="string">&quot;transparent enum {msg}&quot;</span>);
    <a href="#858">err</a>.span_label(<a href="#851">sp</a>, <span class="kw-2">&amp;</span><a href="#857">msg</a>);
    <span class="kw">if let </span>[start @ .., end] = <span class="kw-2">&amp;*</span><a href="#852">variant_spans</a> {
        <span class="kw">for </span>variant_span <span class="kw">in </span>start {
            err.span_label(<span class="kw-2">*</span>variant_span, <span class="string">&quot;&quot;</span>);
        }
        <a href="#858">err</a>.span_label(<span class="kw-2">*</span><a href="#860">end</a>, <span class="kw-2">&amp;</span><a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;too many variants in `{}`&quot;</span>, tcx.def_path_str(did)));
    }
    <a href="#858">err</a>.emit();
}

<span class="doccomment">/// Emit an error when encountering two or more non-zero-sized fields in a transparent
/// enum.
</span><span class="kw">fn </span>bad_non_zero_sized_fields&lt;<span class="lifetime">&#39;tcx</span>&gt;(
    tcx: TyCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt;,
    adt: ty::AdtDef&lt;<span class="lifetime">&#39;tcx</span>&gt;,
    field_count: <a href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,
    field_spans: <span class="kw">impl </span>Iterator&lt;Item = <a href="../../../rustc_span/span_encoding/struct.Span.html">Span</a>&gt;,
    sp: <a href="../../../rustc_span/span_encoding/struct.Span.html">Span</a>,
) {
    <span class="kw">let </span>msg = <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;needs at most one non-zero-sized field, but has {field_count}&quot;</span>);
    <span class="kw">let </span><span class="kw-2">mut </span>err = <a class="macro" href="../../../rustc_errors/macro.struct_span_err.html">struct_span_err!</a>(
        tcx.sess,
        sp,
        E0690,
        <span class="string">&quot;{}transparent {} {}&quot;</span>,
        <span class="kw">if </span>adt.is_enum() { <span class="string">&quot;the variant of a &quot; </span>} <span class="kw">else </span>{ <span class="string">&quot;&quot; </span>},
        adt.descr(),
        msg,
    );
    <a href="#879">err</a>.span_label(<a href="#876">sp</a>, <span class="kw-2">&amp;</span><a href="#878">msg</a>);
    <span class="kw">for </span>sp <span class="kw">in </span>field_spans {
        err.span_label(sp, <span class="string">&quot;this field is non-zero-sized&quot;</span>);
    }
    <a href="#879">err</a>.emit();
}

<span class="kw">fn </span>report_unexpected_variant_res(tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;, res: <a href="../../../rustc_hir/def/enum.Res.html">Res</a>, qpath: <span class="kw-2">&amp;</span>hir::QPath&lt;<span class="lifetime">&#39;_</span>&gt;, span: <a href="../../../rustc_span/span_encoding/struct.Span.html">Span</a>) {
    <a class="macro" href="../../../rustc_errors/macro.struct_span_err.html">struct_span_err!</a>(
        tcx.sess,
        span,
        E0533,
        <span class="string">&quot;expected unit struct, unit variant or constant, found {} `{}`&quot;</span>,
        res.descr(),
        rustc_hir_pretty::qpath_to_string(qpath),
    )
    .emit();
}

<span class="doccomment">/// Controls whether the arguments are tupled. This is used for the call
/// operator.
///
/// Tupling means that all call-side arguments are packed into a tuple and
/// passed as a single parameter. For example, if tupling is enabled, this
/// function:
/// ```
/// fn f(x: (isize, isize)) {}
/// ```
/// Can be called as:
/// ```ignore UNSOLVED (can this be done in user code?)
/// # fn f(x: (isize, isize)) {}
/// f(1, 2);
/// ```
/// Instead of:
/// ```
/// # fn f(x: (isize, isize)) {}
/// f((1, 2));
/// ```
</span><span class="attribute">#[derive(Clone, Eq, PartialEq)]
</span><span class="kw">enum </span>TupleArgumentsFlag {
    DontTupleArguments,
    TupleArguments,
}

<span class="kw">fn </span>typeck_item_bodies(tcx: TyCtxt&lt;<span class="lifetime">&#39;_</span>&gt;, (): ()) {
    <a href="#932">tcx</a>.hir().par_body_owners(|body_owner_def_id| <a href="#932">tcx</a>.ensure().typeck(<a href="#933">body_owner_def_id</a>));
}

<span class="kw">fn </span>fatally_break_rust(sess: <span class="kw-2">&amp;</span><a href="../../../rustc_session/session/struct.Session.html">Session</a>) {
    <span class="kw">let </span>handler = <a href="#936">sess</a>.diagnostic();
    <a href="#937">handler</a>.span_bug_no_panic(
        MultiSpan::new(),
        <span class="string">&quot;It looks like you&#39;re trying to break rust; would you like some ICE?&quot;</span>,
    );
    <a href="#937">handler</a>.note_without_error(<span class="string">&quot;the compiler expectedly panicked. this is a feature.&quot;</span>);
    <a href="#937">handler</a>.note_without_error(
        <span class="string">&quot;we would appreciate a joke overview: \
         https://github.com/rust-lang/rust/issues/43162#issuecomment-320764675&quot;</span>,
    );
    <a href="#937">handler</a>.note_without_error(<span class="kw-2">&amp;</span><a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(
        <span class="string">&quot;rustc {} running on {}&quot;</span>,
        <span class="macro">option_env!</span>(<span class="string">&quot;CFG_VERSION&quot;</span>).unwrap_or(<span class="string">&quot;unknown_version&quot;</span>),
        config::host_triple(),
    ));
}

<span class="kw">fn </span>potentially_plural_count(count: <a href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, word: <span class="kw-2">&amp;</span><a href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html">String</a> {
    <a class="macro" href="https://doc.rust-lang.org/nightly/alloc/macro.format.html">format!</a>(<span class="string">&quot;{} {}{}&quot;</span>, count, word, <span class="macro">pluralize!</span>(count))
}

<span class="kw">fn </span>has_expected_num_generic_args&lt;<span class="lifetime">&#39;tcx</span>&gt;(
    tcx: TyCtxt&lt;<span class="lifetime">&#39;tcx</span>&gt;,
    trait_did: <span class="prelude-ty">Option</span>&lt;<a href="../../../rustc_span/def_id/struct.DefId.html">DefId</a>&gt;,
    expected: <a href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,
) -&gt; <a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a> {
    <a href="#960">trait_did</a>.map_or(<span class="bool-val">true</span>, |trait_did| {
        <span class="kw">let </span>generics = <a href="#959">tcx</a>.generics_of(<a href="#963">trait_did</a>);
        <a href="#964">generics</a>.count() == <a href="#961">expected</a> + <span class="kw">if </span>generics.has_self { <span class="number">1 </span>} <span class="kw">else </span>{ <span class="number">0 </span>}
    })
}
</code></pre></div>
</section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="rustc_typeck" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0-dev" ></div></body></html>