<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The data that we will serialize and deserialize."><meta name="keywords" content="rust, rustlang, rust-lang, serialized"><title>rustc_query_system::dep_graph::serialized - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../../normalize.css"><link rel="stylesheet" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../../ayu.css" disabled><link rel="stylesheet" href="../../../dark.css" disabled><link rel="stylesheet" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script defer src="../../../main.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../rustc_query_system/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../rustc_query_system/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module serialized</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#structs">Structs</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../rustc_query_system/index.html"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Module <a href="../../index.html">rustc_query_system</a>::<wbr><a href="../index.html">dep_graph</a>::<wbr><a class="mod" href="#">serialized</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../../src/rustc_query_system/dep_graph/serialized.rs.html#1-330">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The data that we will serialize and deserialize.</p>
<p>The dep-graph is serialized as a sequence of NodeInfo, with the dependencies
specified inline.  The total number of nodes and edges are stored as the last
16 bytes of the file, so we can find them easily at decoding time.</p>
<p>The serialisation is performed on-demand when each node is emitted. Using this
scheme, we do not need to keep the current graph in memory.</p>
<p>The deserialization is performed manually, in order to convert from the stored
sequence of NodeInfos to the different arrays in SerializedDepGraph.  Since the
node and edge count are stored at the end of the file, all the arrays can be
pre-allocated with the right length.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.EncoderState.html" title="rustc_query_system::dep_graph::serialized::EncoderState struct">EncoderState</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.GraphEncoder.html" title="rustc_query_system::dep_graph::serialized::GraphEncoder struct">GraphEncoder</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.NodeInfo.html" title="rustc_query_system::dep_graph::serialized::NodeInfo struct">NodeInfo</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.SerializedDepGraph.html" title="rustc_query_system::dep_graph::serialized::SerializedDepGraph struct">SerializedDepGraph</a></div><div class="item-right docblock-short">Data for use when recompiling the <strong>current crate</strong>.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.SerializedDepNodeIndex.html" title="rustc_query_system::dep_graph::serialized::SerializedDepNodeIndex struct">SerializedDepNodeIndex</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.Stat.html" title="rustc_query_system::dep_graph::serialized::Stat struct">Stat</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="rustc_query_system" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0-dev" ></div></body></html>