<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="“Collection” is the process of determining the type and other external details of each item in Rust. Collection is specifically concerned with inter-procedural things – for example, for a function definition, collection will figure out the type and signature of the function, but it will not visit the body of the function in any way, nor examine type annotations on local variables (that’s the job of type checking)."><meta name="keywords" content="rust, rustlang, rust-lang, collect"><title>rustc_typeck::collect - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../normalize.css"><link rel="stylesheet" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../ayu.css" disabled><link rel="stylesheet" href="../../dark.css" disabled><link rel="stylesheet" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../rustc_typeck/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../rustc_typeck/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module collect</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#functions">Functions</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../rustc_typeck/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">rustc_typeck</a>::<wbr><a class="mod" href="#">collect</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/rustc_typeck/collect.rs.html#1-3401">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>“Collection” is the process of determining the type and other external
details of each item in Rust. Collection is specifically concerned
with <em>inter-procedural</em> things – for example, for a function
definition, collection will figure out the type and signature of the
function, but it will not visit the <em>body</em> of the function in any way,
nor examine type annotations on local variables (that’s the job of
type <em>checking</em>).</p>
<p>Collecting is ultimately defined by a bundle of queries that
inquire after various facts about the items in the crate (e.g.,
<code>type_of</code>, <code>generics_of</code>, <code>predicates_of</code>, etc). See the <code>provide</code> function
for the full set.</p>
<p>At present, however, we do run collection across all items in the
crate as a kind of pass. This should eventually be factored away.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="item_bounds/index.html" title="rustc_typeck::collect::item_bounds mod">item_bounds</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="type_of/index.html" title="rustc_typeck::collect::type_of mod">type_of</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.AnonConstInParamTyDetector.html" title="rustc_typeck::collect::AnonConstInParamTyDetector struct">AnonConstInParamTyDetector</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.CollectItemTypesVisitor.html" title="rustc_typeck::collect::CollectItemTypesVisitor struct">CollectItemTypesVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.HirPlaceholderCollector.html" title="rustc_typeck::collect::HirPlaceholderCollector struct">HirPlaceholderCollector</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.ItemCtxt.html" title="rustc_typeck::collect::ItemCtxt struct">ItemCtxt</a></div><div class="item-right docblock-short">Context specific to some particular item. This is what implements
<a href="../astconv/trait.AstConv.html" title="AstConv"><code>AstConv</code></a>.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.OnlySelfBounds.html" title="rustc_typeck::collect::OnlySelfBounds struct">OnlySelfBounds</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.adt_def.html" title="rustc_typeck::collect::adt_def fn">adt_def</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.are_suggestable_generic_args.html" title="rustc_typeck::collect::are_suggestable_generic_args fn">are_suggestable_generic_args</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.asm_target_features.html" title="rustc_typeck::collect::asm_target_features fn">asm_target_features</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Computes the set of target features used in a function for the purposes of
inline assembly.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.bad_placeholder.html" title="rustc_typeck::collect::bad_placeholder fn">bad_placeholder</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.check_link_name_xor_ordinal.html" title="rustc_typeck::collect::check_link_name_xor_ordinal fn">check_link_name_xor_ordinal</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.check_link_ordinal.html" title="rustc_typeck::collect::check_link_ordinal fn">check_link_ordinal</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.check_target_feature_trait_unsafe.html" title="rustc_typeck::collect::check_target_feature_trait_unsafe fn">check_target_feature_trait_unsafe</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Checks the function annotated with <code>#[target_feature]</code> is not a safe
trait method implementation, reporting an error if it is.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.codegen_fn_attrs.html" title="rustc_typeck::collect::codegen_fn_attrs fn">codegen_fn_attrs</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.collect_mod_item_types.html" title="rustc_typeck::collect::collect_mod_item_types fn">collect_mod_item_types</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.compute_sig_of_foreign_fn_decl.html" title="rustc_typeck::collect::compute_sig_of_foreign_fn_decl fn">compute_sig_of_foreign_fn_decl</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.const_evaluatable_predicates_of.html" title="rustc_typeck::collect::const_evaluatable_predicates_of fn">const_evaluatable_predicates_of</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.convert_enum_variant_types.html" title="rustc_typeck::collect::convert_enum_variant_types fn">convert_enum_variant_types</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.convert_impl_item.html" title="rustc_typeck::collect::convert_impl_item fn">convert_impl_item</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.convert_item.html" title="rustc_typeck::collect::convert_item fn">convert_item</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.convert_trait_item.html" title="rustc_typeck::collect::convert_trait_item fn">convert_trait_item</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.convert_variant.html" title="rustc_typeck::collect::convert_variant fn">convert_variant</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.convert_variant_ctor.html" title="rustc_typeck::collect::convert_variant_ctor fn">convert_variant_ctor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.early_bound_lifetimes_from_generics.html" title="rustc_typeck::collect::early_bound_lifetimes_from_generics fn">early_bound_lifetimes_from_generics</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Returns the early-bound lifetimes declared in this generics
listing. For anything other than fns/methods, this is just all
the lifetimes that are declared. For fns or methods, we have to
screen out those that do not appear in any where-clauses etc using
<code>resolve_lifetime::early_bound_lifetimes</code>.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.explicit_predicates_of.html" title="rustc_typeck::collect::explicit_predicates_of fn">explicit_predicates_of</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.fn_sig.html" title="rustc_typeck::collect::fn_sig fn">fn_sig</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.from_target_feature.html" title="rustc_typeck::collect::from_target_feature fn">from_target_feature</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.gather_explicit_predicates_of.html" title="rustc_typeck::collect::gather_explicit_predicates_of fn">gather_explicit_predicates_of</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Returns a list of user-specified type predicates for the definition with ID <code>def_id</code>.
N.B., this does not include any implied/inferred constraints.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.generator_kind.html" title="rustc_typeck::collect::generator_kind fn">generator_kind</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.generics_of.html" title="rustc_typeck::collect::generics_of fn">generics_of</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.get_infer_ret_ty.html" title="rustc_typeck::collect::get_infer_ret_ty fn">get_infer_ret_ty</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.get_new_lifetime_name.html" title="rustc_typeck::collect::get_new_lifetime_name fn">get_new_lifetime_name</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Synthesize a new lifetime name that doesn’t clash with any of the lifetimes already present.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.has_late_bound_regions.html" title="rustc_typeck::collect::has_late_bound_regions fn">has_late_bound_regions</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.impl_polarity.html" title="rustc_typeck::collect::impl_polarity fn">impl_polarity</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.impl_trait_ref.html" title="rustc_typeck::collect::impl_trait_ref fn">impl_trait_ref</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.infer_return_ty_for_fn_sig.html" title="rustc_typeck::collect::infer_return_ty_for_fn_sig fn">infer_return_ty_for_fn_sig</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.is_foreign_item.html" title="rustc_typeck::collect::is_foreign_item fn">is_foreign_item</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.is_suggestable_infer_ty.html" title="rustc_typeck::collect::is_suggestable_infer_ty fn">is_suggestable_infer_ty</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Whether <code>ty</code> is a type with <code>_</code> placeholders that can be inferred. Used in diagnostics only to
use inference to provide suggestions for the appropriate type if possible.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.linkage_by_name.html" title="rustc_typeck::collect::linkage_by_name fn">linkage_by_name</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.placeholder_type_error.html" title="rustc_typeck::collect::placeholder_type_error fn">placeholder_type_error</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">If there are any placeholder types (<code>_</code>), emit an error explaining that this is not allowed
and suggest adding type parameters in the appropriate place, taking into consideration any and
all already existing generic type parameters to avoid suggesting a name that is already in use.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.placeholder_type_error_diag.html" title="rustc_typeck::collect::placeholder_type_error_diag fn">placeholder_type_error_diag</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.predicates_defined_on.html" title="rustc_typeck::collect::predicates_defined_on fn">predicates_defined_on</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Returns a list of type predicates for the definition with ID <code>def_id</code>, including inferred
lifetime constraints. This includes all predicates returned by <code>explicit_predicates_of</code>, plus
inferred constraints concerning which regions outlive other regions.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.predicates_from_bound.html" title="rustc_typeck::collect::predicates_from_bound fn">predicates_from_bound</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Converts a specific <code>GenericBound</code> from the AST into a set of
predicates that apply to the self type. A vector is returned
because this can be anywhere from zero predicates (<code>T: ?Sized</code> adds no
predicates) to one (<code>T: Foo</code>) to many (<code>T: Bar&lt;X = i32&gt;</code> adds <code>T: Bar</code>
and <code>&lt;T as Bar&gt;::X == i32</code>).</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.predicates_of.html" title="rustc_typeck::collect::predicates_of fn">predicates_of</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Returns a list of all type predicates (explicit and implicit) for the definition with
ID <code>def_id</code>. This includes all predicates returned by <code>predicates_defined_on</code>, plus
<code>Self: Trait</code> predicates for traits.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.provide.html" title="rustc_typeck::collect::provide fn">provide</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.reject_placeholder_type_signatures_in_item.html" title="rustc_typeck::collect::reject_placeholder_type_signatures_in_item fn">reject_placeholder_type_signatures_in_item</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.should_inherit_track_caller.html" title="rustc_typeck::collect::should_inherit_track_caller fn">should_inherit_track_caller</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Checks if the provided DefId is a method in a trait impl for a trait which has track_caller
applied to the method prototype.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.super_predicates_of.html" title="rustc_typeck::collect::super_predicates_of fn">super_predicates_of</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Ensures that the super-predicates of the trait with a <code>DefId</code>
of <code>trait_def_id</code> are converted and stored. This also ensures that
the transitive super-predicates are converted.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.super_predicates_that_define_assoc_type.html" title="rustc_typeck::collect::super_predicates_that_define_assoc_type fn">super_predicates_that_define_assoc_type</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Ensures that the super-predicates of the trait with a <code>DefId</code>
of <code>trait_def_id</code> are converted and stored. This also ensures that
the transitive super-predicates are converted.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.trait_def.html" title="rustc_typeck::collect::trait_def fn">trait_def</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.trait_explicit_predicates_and_bounds.html" title="rustc_typeck::collect::trait_explicit_predicates_and_bounds fn">trait_explicit_predicates_and_bounds</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.type_param_predicates.html" title="rustc_typeck::collect::type_param_predicates fn">type_param_predicates</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Returns the predicates defined on <code>item_def_id</code> of the form
<code>X: Foo</code> where <code>X</code> is the type parameter <code>def_id</code>.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="rustc_typeck" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0-dev" ></div></body></html>