<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source positions and related helper functions."><meta name="keywords" content="rust, rustlang, rust-lang, rustc_span"><title>rustc_span - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="../crates.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../rustc_span/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../rustc_span/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate rustc_span</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 1.65.0-dev</li><li><a id="all-types" href="all.html">All Items</a></li></ul></div><section><div class="block"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#statics">Statics</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../rustc_span/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">rustc_span</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/rustc_span/lib.rs.html#1-2131">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Source positions and related helper functions.</p>
<p>Important concepts in this module include:</p>
<ul>
<li>the <em>span</em>, represented by <a href="struct.SpanData.html" title="SpanData"><code>SpanData</code></a> and related types;</li>
<li>source code as represented by a <a href="source_map/struct.SourceMap.html" title="SourceMap"><code>SourceMap</code></a>; and</li>
<li>interned strings, represented by <a href="symbol/struct.Symbol.html" title="Symbol"><code>Symbol</code></a>s, with some common symbols available statically in the <a href="symbol/sym/index.html" title="sym"><code>sym</code></a> module.</li>
</ul>
<p>Unlike most compilers, the span contains not only the position in the source code, but also various other metadata,
such as the edition and macro hygiene. This metadata is stored in <a href="hygiene/struct.SyntaxContext.html" title="SyntaxContext"><code>SyntaxContext</code></a> and <a href="hygiene/struct.ExpnData.html" title="ExpnData"><code>ExpnData</code></a>.</p>
<h3 id="note"><a href="#note">Note</a></h3>
<p>This API is completely unstable and subject to change.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable import-item" id="reexport.DesugaringKind"><code>pub use hygiene::<a class="enum" href="hygiene/enum.DesugaringKind.html" title="enum rustc_span::hygiene::DesugaringKind">DesugaringKind</a>;</code></div></div><div class="item-row"><div class="item-left unstable import-item" id="reexport.ExpnKind"><code>pub use hygiene::<a class="enum" href="hygiene/enum.ExpnKind.html" title="enum rustc_span::hygiene::ExpnKind">ExpnKind</a>;</code></div></div><div class="item-row"><div class="item-left unstable import-item" id="reexport.MacroKind"><code>pub use hygiene::<a class="enum" href="hygiene/enum.MacroKind.html" title="enum rustc_span::hygiene::MacroKind">MacroKind</a>;</code></div></div><div class="item-row"><div class="item-left unstable import-item" id="reexport.ExpnData"><code>pub use hygiene::<a class="struct" href="hygiene/struct.ExpnData.html" title="struct rustc_span::hygiene::ExpnData">ExpnData</a>;</code></div></div><div class="item-row"><div class="item-left unstable import-item" id="reexport.ExpnHash"><code>pub use hygiene::<a class="struct" href="hygiene/struct.ExpnHash.html" title="struct rustc_span::hygiene::ExpnHash">ExpnHash</a>;</code></div></div><div class="item-row"><div class="item-left unstable import-item" id="reexport.ExpnId"><code>pub use hygiene::<a class="struct" href="hygiene/struct.ExpnId.html" title="struct rustc_span::hygiene::ExpnId">ExpnId</a>;</code></div></div><div class="item-row"><div class="item-left unstable import-item" id="reexport.LocalExpnId"><code>pub use hygiene::<a class="struct" href="hygiene/struct.LocalExpnId.html" title="struct rustc_span::hygiene::LocalExpnId">LocalExpnId</a>;</code></div></div><div class="item-row"><div class="item-left unstable import-item" id="reexport.SyntaxContext"><code>pub use hygiene::<a class="struct" href="hygiene/struct.SyntaxContext.html" title="struct rustc_span::hygiene::SyntaxContext">SyntaxContext</a>;</code></div></div><div class="item-row"><div class="item-left unstable import-item" id="reexport.sym"><code>pub use symbol::<a class="mod" href="symbol/sym/index.html" title="mod rustc_span::symbol::sym">sym</a>;</code></div></div><div class="item-row"><div class="item-left unstable import-item" id="reexport.Symbol"><code>pub use symbol::<a class="struct" href="symbol/struct.Symbol.html" title="struct rustc_span::symbol::Symbol">Symbol</a>;</code></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="analyze_source_file/index.html" title="rustc_span::analyze_source_file mod">analyze_source_file</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="caching_source_map_view/index.html" title="rustc_span::caching_source_map_view mod">caching_source_map_view</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="def_id/index.html" title="rustc_span::def_id mod">def_id</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="edition/index.html" title="rustc_span::edition mod">edition</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="fatal_error/index.html" title="rustc_span::fatal_error mod">fatal_error</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="hygiene/index.html" title="rustc_span::hygiene mod">hygiene</a></div><div class="item-right docblock-short">Machinery for hygienic macros.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="lev_distance/index.html" title="rustc_span::lev_distance mod">lev_distance</a></div><div class="item-right docblock-short">Levenshtein distances.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="profiling/index.html" title="rustc_span::profiling mod">profiling</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="source_map/index.html" title="rustc_span::source_map mod">source_map</a></div><div class="item-right docblock-short">Types for tracking pieces of source code within a crate.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="span_encoding/index.html" title="rustc_span::span_encoding mod">span_encoding</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="mod" href="symbol/index.html" title="rustc_span::symbol mod">symbol</a></div><div class="item-right docblock-short">An “interner” is a data structure that associates values with usize tags and
allows bidirectional lookup; i.e., given a value, one can easily find the
type, and vice versa.</div></div></div><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="macro" href="macro.impl_pos.html" title="rustc_span::impl_pos macro">impl_pos</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.BytePos.html" title="rustc_span::BytePos struct">BytePos</a></div><div class="item-right docblock-short">A byte offset.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.CachingSourceMapView.html" title="rustc_span::CachingSourceMapView struct">CachingSourceMapView</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.CharPos.html" title="rustc_span::CharPos struct">CharPos</a></div><div class="item-right docblock-short">A character offset.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.DebuggerVisualizerFile.html" title="rustc_span::DebuggerVisualizerFile struct">DebuggerVisualizerFile</a></div><div class="item-right docblock-short">A single debugger visualizer file.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.DistinctSources.html" title="rustc_span::DistinctSources struct">DistinctSources</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.FileLines.html" title="rustc_span::FileLines struct">FileLines</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.FileNameDisplay.html" title="rustc_span::FileNameDisplay struct">FileNameDisplay</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.InnerSpan.html" title="rustc_span::InnerSpan struct">InnerSpan</a></div><div class="item-right docblock-short">Range inside of a <code>Span</code> used for diagnostics when we only have access to relative positions.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.LineInfo.html" title="rustc_span::LineInfo struct">LineInfo</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.Loc.html" title="rustc_span::Loc struct">Loc</a></div><div class="item-right docblock-short">A source code location used for error reporting.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.MalformedSourceMapPositions.html" title="rustc_span::MalformedSourceMapPositions struct">MalformedSourceMapPositions</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.MultiByteChar.html" title="rustc_span::MultiByteChar struct">MultiByteChar</a></div><div class="item-right docblock-short">Identifies an offset of a multi-byte character in a <code>SourceFile</code>.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.NormalizedPos.html" title="rustc_span::NormalizedPos struct">NormalizedPos</a></div><div class="item-right docblock-short">Identifies an offset of a character that was normalized away from <code>SourceFile</code>.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.OffsetOverflowError.html" title="rustc_span::OffsetOverflowError struct">OffsetOverflowError</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.SessionGlobals.html" title="rustc_span::SessionGlobals struct">SessionGlobals</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.SourceFile.html" title="rustc_span::SourceFile struct">SourceFile</a></div><div class="item-right docblock-short">A single source in the <a href="source_map/struct.SourceMap.html" title="SourceMap"><code>SourceMap</code></a>.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.SourceFileAndBytePos.html" title="rustc_span::SourceFileAndBytePos struct">SourceFileAndBytePos</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.SourceFileAndLine.html" title="rustc_span::SourceFileAndLine struct">SourceFileAndLine</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.SourceFileDiffs.html" title="rustc_span::SourceFileDiffs struct">SourceFileDiffs</a></div><div class="item-right docblock-short">The source file lines in difference list form. This matches the form
used within metadata, which saves space by exploiting the fact that the
lines list is sorted and individual lines are usually not that long.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.SourceFileHash.html" title="rustc_span::SourceFileHash struct">SourceFileHash</a></div><div class="item-right docblock-short">The hash of the on-disk source file used for debug info.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.Span.html" title="rustc_span::Span struct">Span</a></div><div class="item-right docblock-short">A compressed span.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.SpanData.html" title="rustc_span::SpanData struct">SpanData</a></div><div class="item-right docblock-short">Represents a span.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="enum" href="enum.DebuggerVisualizerType.html" title="rustc_span::DebuggerVisualizerType enum">DebuggerVisualizerType</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="enum" href="enum.ExternalSource.html" title="rustc_span::ExternalSource enum">ExternalSource</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="enum" href="enum.ExternalSourceKind.html" title="rustc_span::ExternalSourceKind enum">ExternalSourceKind</a></div><div class="item-right docblock-short">The state of the lazy external source loading mechanism of a <code>SourceFile</code>.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="enum" href="enum.FileName.html" title="rustc_span::FileName enum">FileName</a></div><div class="item-right docblock-short">Differentiates between real files and common virtual files.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="enum" href="enum.FileNameDisplayPreference.html" title="rustc_span::FileNameDisplayPreference enum">FileNameDisplayPreference</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="enum" href="enum.NonNarrowChar.html" title="rustc_span::NonNarrowChar enum">NonNarrowChar</a></div><div class="item-right docblock-short">Identifies an offset of a non-narrow character in a <code>SourceFile</code>.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="enum" href="enum.RealFileName.html" title="rustc_span::RealFileName enum">RealFileName</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="enum" href="enum.SourceFileHashAlgorithm.html" title="rustc_span::SourceFileHashAlgorithm enum">SourceFileHashAlgorithm</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="enum" href="enum.SourceFileLines.html" title="rustc_span::SourceFileLines enum">SourceFileLines</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="enum" href="enum.SpanLinesError.html" title="rustc_span::SpanLinesError enum">SpanLinesError</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="enum" href="enum.SpanSnippetError.html" title="rustc_span::SpanSnippetError enum">SpanSnippetError</a></div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="constant" href="constant.DUMMY_SP.html" title="rustc_span::DUMMY_SP constant">DUMMY_SP</a></div><div class="item-right docblock-short">Dummy span, both position and length are zero, syntax context is zero as well.</div></div></div><h2 id="statics" class="small-section-header"><a href="#statics">Statics</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="static" href="static.SESSION_GLOBALS.html" title="rustc_span::SESSION_GLOBALS static">SESSION_GLOBALS</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></div><div class="item-row"><div class="item-left unstable module-item"><a class="static" href="static.SPAN_TRACK.html" title="rustc_span::SPAN_TRACK static">SPAN_TRACK</a></div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="trait" href="trait.HashStableContext.html" title="rustc_span::HashStableContext trait">HashStableContext</a></div><div class="item-right docblock-short">Requirements for a <code>StableHashingContext</code> to be used in this crate.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="trait" href="trait.Pos.html" title="rustc_span::Pos trait">Pos</a></div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.create_default_session_globals_then.html" title="rustc_span::create_default_session_globals_then fn">create_default_session_globals_then</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.create_default_session_if_not_set_then.html" title="rustc_span::create_default_session_if_not_set_then fn">create_default_session_if_not_set_then</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.create_session_globals_then.html" title="rustc_span::create_session_globals_then fn">create_session_globals_then</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.create_session_if_not_set_then.html" title="rustc_span::create_session_if_not_set_then fn">create_session_if_not_set_then</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.normalize_newlines.html" title="rustc_span::normalize_newlines fn">normalize_newlines</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Replaces <code>\r\n</code> with <code>\n</code> in-place in <code>src</code>.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.normalize_src.html" title="rustc_span::normalize_src fn">normalize_src</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Normalizes the source code and records the normalizations.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.remove_bom.html" title="rustc_span::remove_bom fn">remove_bom</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="item-right docblock-short">Removes UTF-8 BOM, if any.</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.set_session_globals_then.html" title="rustc_span::set_session_globals_then fn">set_session_globals_then</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.with_session_globals.html" title="rustc_span::with_session_globals fn">with_session_globals</a></div></div><div class="item-row"><div class="item-left unstable module-item"><a class="fn" href="fn.with_source_map.html" title="rustc_span::with_source_map fn">with_source_map</a></div><div class="item-right docblock-short">Calls the provided closure, using the provided <code>SourceMap</code> to format
any spans that are debug-printed during the closure’s execution.</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="type" href="type.FileLinesResult.html" title="rustc_span::FileLinesResult type">FileLinesResult</a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="rustc_span" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0-dev" ></div></body></html>