<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Like `resolve_lifetimes`, but does not resolve lifetimes for trait items. Also does not generate any diagnostics."><meta name="keywords" content="rust, rustlang, rust-lang, resolve_lifetimes_trait_definition"><title>resolve_lifetimes_trait_definition in rustc_resolve::late::lifetimes - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../../normalize.css"><link rel="stylesheet" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../../ayu.css" disabled><link rel="stylesheet" href="../../../dark.css" disabled><link rel="stylesheet" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../main.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../rustc_resolve/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../rustc_resolve/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><div class="sidebar-elems"><h2 class="location"><a href="index.html">In rustc_resolve::late::lifetimes</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../rustc_resolve/index.html"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Function <a href="../../index.html">rustc_resolve</a>::<wbr><a href="../index.html">late</a>::<wbr><a href="index.html">lifetimes</a>::<wbr><a class="fn" href="#">resolve_lifetimes_trait_definition</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../../src/rustc_resolve/late/lifetimes.rs.html#281">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="item-decl"><pre class="rust fn"><code>fn resolve_lifetimes_trait_definition(<br>&nbsp;&nbsp;&nbsp;&nbsp;tcx: <a class="struct" href="../../../rustc_middle/ty/context/struct.TyCtxt.html" title="struct rustc_middle::ty::context::TyCtxt">TyCtxt</a>&lt;'_&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;local_def_id: <a class="struct" href="../../../rustc_span/def_id/struct.LocalDefId.html" title="struct rustc_span::def_id::LocalDefId">LocalDefId</a><br>) -&gt; <a class="struct" href="../../../rustc_middle/middle/resolve_lifetime/struct.ResolveLifetimes.html" title="struct rustc_middle::middle::resolve_lifetime::ResolveLifetimes">ResolveLifetimes</a></code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Like <code>resolve_lifetimes</code>, but does not resolve lifetimes for trait items.
Also does not generate any diagnostics.</p>
<p>This is ultimately a subset of the <code>resolve_lifetimes</code> work. It effectively
resolves lifetimes only within the trait “header” – that is, the trait
and supertrait list. In contrast, <code>resolve_lifetimes</code> resolves all the
lifetimes within the trait and its items. There is room to refactor this,
for example to resolve lifetimes for each trait item in separate queries,
but it’s convenient to do the entire trait at once because the lifetimes
from the trait definition are in scope within the trait items as well.</p>
<p>The reason for this separate call is to resolve what would otherwise
be a cycle. Consider this example:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code><span class="kw">trait </span>Base&lt;<span class="lifetime">&#39;a</span>&gt; {
    <span class="kw">type </span>BaseItem;
}
<span class="kw">trait </span>Sub&lt;<span class="lifetime">&#39;b</span>&gt;: <span class="kw">for</span>&lt;<span class="lifetime">&#39;a</span>&gt; Base&lt;<span class="lifetime">&#39;a</span>&gt; {
   <span class="kw">type </span>SubItem: Sub&lt;BaseItem = <span class="kw-2">&amp;</span><span class="lifetime">&#39;b </span>u32&gt;;
}</code></pre></div>
<p>When we resolve <code>Sub</code> and all its items, we also have to resolve <code>Sub&lt;BaseItem = &amp;'b u32&gt;</code>.
To figure out the index of <code>'b</code>, we have to know about the supertraits
of <code>Sub</code> so that we can determine that the <code>for&lt;'a&gt;</code> will be in scope.
(This is because we – currently at least – flatten all the late-bound
lifetimes into a single binder.) This requires us to resolve the
<em>trait definition</em> of <code>Sub</code>; basically just enough lifetime information
to look at the supertraits.</p>
</div></details></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="rustc_resolve" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.0-dev" ></div></body></html>